import{X as B}from"./chunk-OTPP36PQ.js";import{c as N}from"./chunk-ZQO5YA2I.js";import{a as H}from"./chunk-EX2TMPQP.js";import{b as G}from"./chunk-DDFJRRPS.js";import{b as ct,c as $,d as bt}from"./chunk-XBCDWUL3.js";import{a as pt}from"./chunk-Y4T524RJ.js";import{c as mt,e as U,g as dt,h as ut,i as _t,k as z,m as vt,o as ft,q as gt,t as ht,u as xt}from"./chunk-22R6BKWA.js";import{$a as e,$b as ot,Ca as i,Da as g,Eb as h,Fb as q,Hb as c,Ib as m,Na as j,Pa as _,Ta as F,U as W,Ua as tt,V as X,Wa as A,Xa as et,Ya as it,Z as v,Za as nt,_a as t,ab as d,ca as f,cc as rt,da as Y,eb as at,hb as P,ib as I,ka as k,kc as M,la as D,ma as S,mc as R,na as E,nb as O,nc as V,pc as st,qc as w,rc as lt,tc as x,ub as r,vb as p,wb as C,xb as T}from"./chunk-PG4FGKY3.js";import{a as K,b as Q}from"./chunk-DM275RSA.js";var b=(()=>{let a=class a{constructor(){this.http=v(rt),this.resourceUrl=lt("marketing/utm")}utms(){return this.http.get(this.resourceUrl)}create(n){return this.http.post(this.resourceUrl,n)}detail(n,o){return this.http.get(`${this.resourceUrl}/${o}/stats/${n}`)}periods(n){return this.http.get(`${this.resourceUrl}/${n}/period_stats`)}delete(n){return this.http.delete(`${this.resourceUrl}/${n}`)}};a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=W({token:a,factory:a.\u0275fac,providedIn:"root"});let l=a;return l})();var Ut=l=>({path:l}),Lt=l=>({id:l});function jt(l,a){if(l&1&&(t(0,"div",7)(1,"div",9)(2,"p"),r(3),e(),d(4,"span",10),e(),t(5,"span",11),S(),t(6,"svg",12),d(7,"path",13),e()()()),l&2){let u=a.$implicit;O("routerLink","view/",u.created_at,"/",u.utm,""),i(3),p(u.name),i(),_("params",q(5,Lt,u.utm))}}var Ct=(()=>{let a=class a{constructor(){this.utmService=v(b),this.backButton=v(w),this.titles={data:"utm_exists_page_label",noData:"utm_not_exists_page_label"},this.description={data:"utm_exists_page_label_substring",noData:"utm_not_exists_page_label_substring"},this.images={noData:"assets/Enot web/enot_thinking.json",data:"assets/Enot web/enot_business.json"},this.mode="noData"}ngOnInit(){this.backButton.getButton("/marketing/menu"),this.utmService.utms().subscribe(n=>{this.utms=n,n.length>0&&(this.mode="data")})}};a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=f({type:a,selectors:[["ng-component"]],decls:20,vars:15,consts:[[1,"title"],[3,"options"],["routerLink","create/",1,"create"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["cx","10","cy","10","r","10","fill","white"],["x","9","y","5","width","2","height","10","rx","1","fill","#007AFF"],["x","15","y","9","width","2","height","10","rx","1","transform","rotate(90 15 9)","fill","#007AFF"],[1,"container-white","card","m-4",3,"routerLink"],[1,"bottom"],[1,"infos"],["translatePaid","utm_element_id",3,"params"],[1,"right"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#3C3C43","fill-opacity","0.3"]],template:function(o,s){o&1&&(t(0,"div")(1,"div",0),d(2,"ng-lottie",1),t(3,"h1"),r(4),c(5,"translatePaid"),e(),t(6,"p"),r(7),c(8,"translatePaid"),e()(),t(9,"button",2),S(),t(10,"svg",3),d(11,"circle",4)(12,"rect",5)(13,"rect",6),e(),r(14),c(15,"translatePaid"),e(),it(16,jt,8,7,"div",7,et),E(),t(18,"div",8),d(19,"alert-notify"),e()()),o&2&&(tt("main ",s.mode,""),i(2),_("options",q(13,Ut,s.images[s.mode])),i(2),p(m(5,7,s.titles[s.mode])),i(3),p(m(8,9,s.description[s.mode])),i(7),C(" ",m(15,11,"utm_create")," "),i(2),nt(s.utms))},dependencies:[V,G,pt,$,x],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{width:calc(var(--width) + 20px)}"]});let l=a;return l})();var St=(()=>{let a=class a{constructor(){this.utmService=v(b),this.router=v(R),this.notificationService=v(ct),this.editForm=new _t({name:new z(null,[U.required,U.minLength(1),U.maxLength(32)]),label:new z(null,[U.required])})}save(){if(this.editForm.controls.name.invalid){this.notificationService.createNotification("notify__utm_name_is_required");return}else if(this.editForm.controls.label.invalid){this.notificationService.createNotification("notify__utm_id_is_required");return}this.utmService.create(this.editForm.getRawValue()).subscribe(()=>{this.notificationService.createNotification("notify__utm_created"),this.router.navigate(["/marketing/utm"])})}};a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=f({type:a,selectors:[["ng-component"]],decls:19,vars:11,consts:[[1,"main",3,"ngSubmit","formGroup"],[1,"title-text"],[1,"container-white"],["placeholder","utm_create_form__name_textbox",3,"container"],[1,"line"],[1,"position-relative"],["type","text","formControlName","label","placeholder","\u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440"],[1,"down-description"],[1,"bottom"],[1,"down-button"],["type","submit"]],template:function(o,s){o&1&&(t(0,"form",0),P("ngSubmit",function(){return s.save()}),t(1,"div",1)(2,"h1"),r(3),c(4,"translatePaid"),e()(),t(5,"div",2),d(6,"name",3)(7,"div",4),t(8,"div",5),d(9,"input",6),e()(),t(10,"p",7),r(11),c(12,"translatePaid"),e(),t(13,"div",8),d(14,"alert-notify"),t(15,"div",9)(16,"button",10),r(17),c(18,"translatePaid"),e()()()()),o&2&&(_("formGroup",s.editForm),i(3),p(m(4,5,"utm_create_form_label")),i(3),_("container",!1),i(5),C(" ",m(12,7,"utm_create_form__substring")," "),i(6),C(" ",m(18,9,"ab_tests__settings__msg_save")," "))},dependencies:[vt,mt,dt,ut,ft,gt,H,$,x],encapsulation:2});let l=a;return l})();function At(l,a){if(l&1){let u=at();t(0,"div",1),P("click",function(){k(u);let o=I();return D(o.changeDeleteAlert())}),e(),t(1,"div",2)(2,"span",3),P("click",function(){k(u);let o=I();return D(o.changeDeleteAlert())}),S(),t(3,"svg",4),d(4,"path",5),e()(),E(),t(5,"h1"),r(6),c(7,"translatePaid"),e(),t(8,"p"),r(9),c(10,"translatePaid"),e(),t(11,"button",0),P("click",function(){k(u);let o=I();return D(o.deleteMailing())}),r(12),c(13,"translatePaid"),e(),t(14,"button",6),P("click",function(){k(u);let o=I();return D(o.changeDeleteAlert())}),r(15),c(16,"translatePaid"),e()()}l&2&&(i(6),p(m(7,4,"utm_drop_page_label")),i(3),p(m(10,6,"resource_explorer__drop_resource_label_substring")),i(3),p(m(13,8,"utm_explorer_page_drop_utm")),i(3),p(m(16,10,"utm_drop_page__cancel_drop")))}var Pt=(()=>{let a=class a{constructor(){this.utmService=v(b),this.router=v(R),this.openModal=!1}changeDeleteAlert(){this.openModal=!this.openModal}deleteMailing(){this.changeDeleteAlert(),this.utmService.delete(this.label).subscribe(()=>{this.router.navigate(["/marketing/utm/"])})}};a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=f({type:a,selectors:[["utm-delete"]],inputs:{label:"label"},decls:4,vars:4,consts:[[1,"delete","container-white",3,"click"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"cancel","container-white","primary",3,"click"]],template:function(o,s){o&1&&(t(0,"button",0),P("click",function(){return s.changeDeleteAlert()}),r(1),c(2,"translatePaid"),e(),j(3,At,17,12)),o&2&&(i(),p(m(2,2,"utm_explorer_page_drop_utm")),i(2),A(3,s.openModal?3:-1))},dependencies:[x],encapsulation:2});let l=a;return l})();function Vt(l,a){if(l&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),r(3),e()(),t(4,"div",2)(5,"p"),r(6),c(7,"translatePaid"),e()(),t(8,"div",3)(9,"div",4)(10,"p"),r(11),c(12,"translatePaid"),e(),t(13,"span",5),r(14),e()(),d(15,"div",6),t(16,"div",4)(17,"p"),r(18),c(19,"translatePaid"),e(),t(20,"span",5),r(21),e()(),d(22,"div",6),t(23,"div",4)(24,"p"),r(25),c(26,"translatePaid"),e(),t(27,"span",5),r(28),e()(),d(29,"div",6),t(30,"div",4)(31,"p"),r(32),c(33,"translatePaid"),e(),t(34,"span",5),r(35),e()(),d(36,"div",6),t(37,"div",7)(38,"p"),r(39,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0433\u0440\u0430\u0444\u0438\u043A"),e(),t(40,"span",5),S(),t(41,"svg",8),d(42,"path",9),e()()()(),E(),t(43,"div",2)(44,"p"),r(45),c(46,"translatePaid"),e()(),t(47,"div",3)(48,"div",4)(49,"p"),r(50,"RUB"),e(),t(51,"span",5),r(52),e()(),d(53,"div",6),t(54,"div",4)(55,"p"),r(56,"USD"),e(),t(57,"span",5),r(58),e()(),d(59,"div",6),t(60,"div",7)(61,"p"),r(62,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0433\u0440\u0430\u0444\u0438\u043A"),e(),t(63,"span",5),S(),t(64,"svg",8),d(65,"path",9),e()()()(),E(),d(66,"utm-delete",10),e()),l&2){let u=I();i(3),p(u.label),i(3),C(" ",m(7,20,"utm_explorer_page_stats_section")," "),i(5),p(m(12,22,"utm__stats_explorer_page__registration_count")),i(3),p(u.utm.users_count),i(4),p(m(19,24,"ab_tests__metric_blocked_bot_count")),i(3),p(u.utm.inactive_users_count),i(4),p(m(26,26,"autowebinar_settings_page__stats_buy_subs_count")),i(3),p(u.utm.buyed_subs_users_count),i(4),p(m(33,28,"utm_explorer_page_stats__not_prolong_subscription_count")),i(3),p(u.utm.not_prolong_subs_users_count),i(2),O("routerLink","/marketing/utm/view-statistica/",u.created_at,"/",u.label,""),i(8),C(" ",m(46,30,"utm_explorer_page_finance_stats_section")," "),i(7),p(u.utm.finance_stats[1].amount),i(6),p(u.utm.finance_stats[0].amount),i(2),O("routerLink","/marketing/utm/view-statistica-price/",u.created_at,"/",u.label,""),i(6),_("label",u.label)}}var Et=(()=>{let a=class a{constructor(n,o,s){this.activatedRoute=n,this.utmService=o,this.backButton=s}ngOnInit(){this.backButton.getButton("/marketing/utm"),this.activatedRoute.params.subscribe(n=>{this.created_at=n.created_at,this.label=n.label,this.loadUtm()})}loadUtm(){this.utmService.detail(this.created_at,this.label).subscribe(n=>{this.utm=Q(K({},n),{finance_stats:n.finance_stats.length?n.finance_stats:[{amount:0,currency:"RUB"},{amount:0,currency:"USD"}]})})}};a.\u0275fac=function(o){return new(o||a)(g(M),g(b),g(w))},a.\u0275cmp=f({type:a,selectors:[["ng-component"]],decls:1,vars:1,consts:[[1,"main"],[1,"title-text"],[1,"container-title"],[1,"container-white"],[1,"position-relative"],[1,"right"],[1,"line"],[1,"position-relative","primary",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#007AFF"],[3,"label"]],template:function(o,s){o&1&&j(0,Vt,67,32,"div",0),o&2&&A(0,s.utm?0:-1)},dependencies:[V,Pt,x],encapsulation:2});let l=a;return l})();var It=()=>["users_count"],yt=()=>["buyed_subs_users_count"],Mt=()=>["inactive_users_count"],Bt=()=>["not_prolong_subs_users_count"],kt=(()=>{let a=class a{constructor(n,o,s){this.activatedRoute=n,this.utmService=o,this.backButton=s,this.data={users_count:{sum:0,action:0,persentage:0,color:"#3178DE"},inactive_users_count:{sum:0,action:0,persentage:0,color:"#B84041"},buyed_subs_users_count:{sum:0,action:0,persentage:0,color:"#4CC063"},not_prolong_subs_users_count:{sum:0,action:0,persentage:0,color:"#F7931A"}}}ngOnInit(){this.activatedRoute.params.subscribe(n=>{this.created_at=n.created_at,this.label=n.label,this.loadPeriods(),this.backButton.getButton("/marketing/utm/view/"+this.created_at+"/"+this.label)})}loadPeriods(){this.utmService.periods(this.label).subscribe(n=>{this.stats=n,this.fromToDate=N(n[0].date,n[n.length-1].date),this.calculateInfos("users_count"),this.calculateInfos("inactive_users_count"),this.calculateInfos("buyed_subs_users_count"),this.calculateInfos("not_prolong_subs_users_count")})}calculateInfos(n){this.stats.forEach(o=>{this.data[n].sum+=o[n]}),this.data[n].action=this.stats[this.stats.length-1][n]-this.stats[this.stats.length-2][n],this.data[n].persentage=Math.floor((this.stats[this.stats.length-1][n]??1/this.stats[this.stats.length-2][n]??1)*100)}};a.\u0275fac=function(o){return new(o||a)(g(M),g(b),g(w))},a.\u0275cmp=f({type:a,selectors:[["ng-component"]],decls:72,vars:75,consts:[[1,"main"],[1,"title-text"],[1,"container-title","position-relative"],[1,"position-relative"],[1,"right"],[1,"container-white","period-main-infos"],[1,"persentage"],[1,"current"],[1,"amount"],[1,"name"],[1,"container-title"],[1,"container-white"],[3,"labels","statistics","columns"]],template:function(o,s){o&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),r(3),c(4,"translatePaid"),e()(),t(5,"div",2)(6,"p",3),r(7),c(8,"translatePaid"),t(9,"span",4),r(10),e()()(),t(11,"div",5)(12,"div",6)(13,"div",7)(14,"span",8),r(15),e(),t(16,"span"),r(17),e()(),t(18,"p",9),r(19),c(20,"translatePaid"),e()(),t(21,"div",6)(22,"div",7)(23,"span",8),r(24),e(),t(25,"span"),r(26),e()(),t(27,"p",9),r(28),c(29,"translatePaid"),e()(),t(30,"div",6)(31,"div",7)(32,"span",8),r(33),e(),t(34,"span"),r(35),e()(),t(36,"p",9),r(37),c(38,"translatePaid"),e()(),t(39,"div",6)(40,"div",7)(41,"span",8),r(42),e(),t(43,"span"),r(44),e()(),t(45,"p",9),r(46),c(47,"translatePaid"),e()()(),t(48,"div",10)(49,"p"),r(50),c(51,"translatePaid"),e()(),t(52,"div",11),d(53,"statistica-grafig",12),e(),t(54,"div",10)(55,"p"),r(56),c(57,"translatePaid"),e()(),t(58,"div",11),d(59,"statistica-grafig",12),e(),t(60,"div",10)(61,"p"),r(62),c(63,"translatePaid"),e()(),t(64,"div",11),d(65,"statistica-grafig",12),e(),t(66,"div",10)(67,"p"),r(68),c(69,"translatePaid"),e()(),t(70,"div",11),d(71,"statistica-grafig",12),e()()),o&2&&(i(3),p(m(4,47,"utm__stats_explorer_page_label")),i(4),C(" ",m(8,49,"utm__stats_explorer_page__main_stats_label")," "),i(3),C(" ",s.fromToDate," "),i(5),p(s.data.users_count.sum),i(),F(s.data.users_count.action>0?"plus":"minus"),i(),T(" ",s.data.users_count.action," (",s.data.users_count.persentage,"%) "),i(2),p(m(20,51,"ab_tests__metric_reg_count")),i(5),p(s.data.buyed_subs_users_count.sum),i(),F(s.data.buyed_subs_users_count.action>0?"plus":"minus"),i(),T(" ",s.data.buyed_subs_users_count.action," (",s.data.buyed_subs_users_count.persentage,"%) "),i(2),p(m(29,53,"utm_explorer_page_stats__blocked_bot_count")),i(5),p(s.data.inactive_users_count.sum),i(),F(s.data.inactive_users_count.action>0?"plus":"minus"),i(),T(" ",s.data.inactive_users_count.action," (",s.data.inactive_users_count.persentage,"%) "),i(2),p(m(38,55,"utm__stats_explorer_page__buy_subscription_count")),i(5),p(s.data.not_prolong_subs_users_count.sum),i(),F(s.data.not_prolong_subs_users_count.action>0?"plus":"minus"),i(),T(" ",s.data.not_prolong_subs_users_count.action," (",s.data.not_prolong_subs_users_count.persentage,"%) "),i(2),p(m(47,57,"utm_explorer_page_stats__not_prolong_subscription_count")),i(4),p(m(51,59,"utm__stats_explorer_page__registration_count")),i(3),_("labels",h(67,It))("statistics",s.stats)("columns",h(68,It)),i(3),p(m(57,61,"ab_tests__metric_blocked_bot_count")),i(3),_("labels",h(69,yt))("statistics",s.stats)("columns",h(70,yt)),i(3),p(m(63,63,"autowebinar_settings_page__stats_buy_subs_count")),i(3),_("labels",h(71,Mt))("statistics",s.stats)("columns",h(72,Mt)),i(3),p(m(69,65,"utm_explorer_page_stats__not_prolong_subscription_count")),i(3),_("labels",h(73,Bt))("statistics",s.stats)("columns",h(74,Bt)))},dependencies:[B,x],styles:['.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]{width:calc(50% - 8px);margin:10px 4px}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#000;font-size:17px;font-style:normal;font-weight:600;line-height:normal;letter-spacing:-.5px;margin-right:3px}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-size:12px;color:#b84041}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:before{content:"+"}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{font-size:12px;color:#38913b}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#636366;font-size:13px;font-style:normal;font-weight:400;line-height:18px}']});let l=a;return l})();var Dt=()=>["rub","usd"],Ft=(()=>{let a=class a{constructor(n,o,s){this.activatedRoute=n,this.utmService=o,this.backButton=s}ngOnInit(){this.activatedRoute.params.subscribe(n=>{this.created_at=n.created_at,this.label=n.label,this.loadPeriod(),this.backButton.getButton("/marketing/utm/view/"+this.created_at+"/"+this.label)})}loadPeriod(){this.utmService.periods(this.label).subscribe(n=>{this.stats=n,this.stats.forEach(o=>{o.finance_stats.length?(o.rub=o.finance_stats[1]?.amount,o.usd=o.finance_stats[0].amount):(o.rub=0,o.usd=0)}),this.fromToDate=N(n[0].date,n[n.length-1].date)})}};a.\u0275fac=function(o){return new(o||a)(g(M),g(b),g(w))},a.\u0275cmp=f({type:a,selectors:[["ng-component"]],decls:7,vars:8,consts:[[1,"main"],[1,"title-text"],[1,"container-white"],[3,"labels","statistics","columns"]],template:function(o,s){o&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),r(3),c(4,"translatePaid"),e()(),t(5,"div",2),d(6,"statistica-grafig",3),e()()),o&2&&(i(3),p(m(4,4,"utm_explorer_page_finance_stats_section")),i(3),_("labels",h(6,Dt))("statistics",s.stats)("columns",h(7,Dt)))},dependencies:[B,x],encapsulation:2});let l=a;return l})();var je=(()=>{let a=class a{};a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=Y({type:a}),a.\u0275inj=X({imports:[st.forChild([{path:"",component:Ct},{path:"create",component:St},{path:"view/:created_at/:label",component:Et},{path:"view-statistica/:created_at/:label",component:kt},{path:"view-statistica-price/:created_at/:label",component:Ft}]),xt,ht,ot,H,G,bt,B]});let l=a;return l})();export{je as UtmModule};
