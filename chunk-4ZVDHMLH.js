import{a as Et}from"./chunk-MAAQSTPP.js";import{a as q,b as $,d as T}from"./chunk-Q2HNSVUD.js";import{a as Z}from"./chunk-KTEV526X.js";import{b as H}from"./chunk-SCGMYTJN.js";import{b as ht,c as z,d as Pt}from"./chunk-QXDOXOUL.js";import{a as _t}from"./chunk-F3ADXDIB.js";import{c as vt,e as R,g as ft,h as gt,i as xt,k as K,m as bt,o as Ct,q as St,t as yt,u as wt}from"./chunk-CTHILYG6.js";import{D as O,E as U,Ea as J,F as C,G as P,Ga as c,Ha as m,O as n,P as f,T as V,V as S,Wa as ct,Ya as mt,Z as F,_ as ot,aa as N,ab as B,ba as rt,ca as st,cb as Q,da as lt,db as G,ea as t,fa as i,fb as dt,ga as d,gb as w,hb as ut,ia as pt,ja as y,jb as g,ka as E,na as A,pa as I,q as it,qa as M,r as nt,ra as D,t as h,ta as s,ua as l,v,va as b,w as at,wa as L}from"./chunk-OZNZNZBL.js";import{a as Y,b as tt,f as et}from"./chunk-DM275RSA.js";var x=(()=>{let r=class r{constructor(){this.http=h(mt),this.resourceUrl=ut("marketing/utm")}utms(){return this.http.get(this.resourceUrl)}create(e){return this.http.post(this.resourceUrl,e)}detail(e,o){return this.http.get(`${this.resourceUrl}/${o}/stats/${e}`)}periods(e){return this.http.get(`${this.resourceUrl}/${e}/period_stats`)}delete(e){return this.http.delete(`${this.resourceUrl}/${e}`)}};r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=it({token:r,factory:r.\u0275fac,providedIn:"root"});let p=r;return p})();var Lt=p=>({path:p}),Rt=p=>({id:p});function jt(p,r){if(p&1&&(t(0,"div",7)(1,"div",9)(2,"p"),s(3),i(),d(4,"span",10),i(),t(5,"span",11),C(),t(6,"svg",12),d(7,"path",13),i()()()),p&2){let u=r.$implicit;A("routerLink","view/",u.created_at,"/",u.utm,""),n(3),l(u.name),n(),S("params",J(5,Rt,u.utm))}}var It=(()=>{let r=class r{constructor(){this.utmService=h(x),this.backButton=h(w),this.titles={data:"utm_exists_page_label",noData:"utm_not_exists_page_label"},this.description={data:"utm_exists_page_label_substring",noData:"utm_not_exists_page_label_substring"},this.images={noData:"assets/Enot web/enot_thinking.json",data:"assets/Enot web/enot_business.json"},this.mode="noData"}ngOnInit(){this.backButton.getButton("/marketing/menu"),this.utmService.utms().subscribe(e=>{this.utms=e,e.length>0&&(this.mode="data")})}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=v({type:r,selectors:[["ng-component"]],decls:20,vars:15,consts:[[1,"title"],[3,"options"],["routerLink","create/",1,"create"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["cx","10","cy","10","r","10","fill","white"],["x","9","y","5","width","2","height","10","rx","1","fill","#007AFF"],["x","15","y","9","width","2","height","10","rx","1","transform","rotate(90 15 9)","fill","#007AFF"],[1,"container-white","card","m-4",3,"routerLink"],[1,"bottom"],[1,"infos"],["translatePaid","utm_element_id",3,"params"],[1,"right"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#3C3C43","fill-opacity","0.3"]],template:function(o,a){o&1&&(t(0,"div")(1,"div",0),d(2,"ng-lottie",1),t(3,"h1"),s(4),c(5,"translatePaid"),i(),t(6,"p"),s(7),c(8,"translatePaid"),i()(),t(9,"button",2),C(),t(10,"svg",3),d(11,"circle",4)(12,"rect",5)(13,"rect",6),i(),s(14),c(15,"translatePaid"),i(),st(16,jt,8,7,"div",7,rt),P(),t(18,"div",8),d(19,"alert-notify"),i()()),o&2&&(ot("main ",a.mode,""),n(2),S("options",J(13,Lt,a.images[a.mode])),n(2),l(m(5,7,a.titles[a.mode])),n(3),l(m(8,9,a.description[a.mode])),n(7),b(" ",m(15,11,"utm_create")," "),n(2),lt(a.utms))},dependencies:[G,H,_t,z,g],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{width:calc(var(--width) + 20px)}"]});let p=r;return p})();var Mt=(()=>{let r=class r{constructor(){this.utmService=h(x),this.router=h(Q),this.notificationService=h(ht),this.editForm=new xt({name:new K(null,[R.required,R.minLength(1),R.maxLength(32)]),label:new K(null,[R.required])})}save(){if(this.editForm.controls.label.valid){if(!this.editForm.controls.name.valid){this.notificationService.createNotification("notify__utm_name_is_required");return}}else{this.notificationService.createNotification("notify__utm_id_is_required");return}this.utmService.create(this.editForm.getRawValue()).subscribe(()=>{this.notificationService.createNotification("notify__utm_created"),this.router.navigate(["/marketing/utm"])})}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=v({type:r,selectors:[["ng-component"]],decls:19,vars:11,consts:[[1,"main",3,"ngSubmit","formGroup"],[1,"title-text"],[1,"container-white"],["placeholder","utm_create_form__name_textbox",3,"container"],[1,"line"],[1,"position-relative"],["type","text","formControlName","label","placeholder","\u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440"],[1,"down-description"],[1,"bottom"],[1,"down-button"],["type","submit"]],template:function(o,a){o&1&&(t(0,"form",0),y("ngSubmit",function(){return a.save()}),t(1,"div",1)(2,"h1"),s(3),c(4,"translatePaid"),i()(),t(5,"div",2),d(6,"name",3)(7,"div",4),t(8,"div",5),d(9,"input",6),i()(),t(10,"p",7),s(11),c(12,"translatePaid"),i(),t(13,"div",8),d(14,"alert-notify"),t(15,"div",9)(16,"button",10),s(17),c(18,"translatePaid"),i()()()()),o&2&&(S("formGroup",a.editForm),n(3),l(m(4,5,"utm_create_form_label")),n(3),S("container",!1),n(5),b(" ",m(12,7,"utm_create_form__substring")," "),n(6),b(" ",m(18,9,"ab_tests__settings__msg_save")," "))},dependencies:[bt,vt,ft,gt,Ct,St,Z,z,g],encapsulation:2});let p=r;return p})();function Vt(p,r){if(p&1){let u=pt();t(0,"div",1),y("click",function(){O(u);let o=E();return U(o.changeDeleteAlert())}),i(),t(1,"div",2)(2,"span",3),y("click",function(){O(u);let o=E();return U(o.changeDeleteAlert())}),C(),t(3,"svg",4),d(4,"path",5),i()(),P(),t(5,"h1"),s(6),c(7,"translatePaid"),i(),t(8,"p"),s(9),c(10,"translatePaid"),i(),t(11,"button",0),y("click",function(){O(u);let o=E();return U(o.deleteMailing())}),s(12),c(13,"translatePaid"),i(),t(14,"button",6),y("click",function(){O(u);let o=E();return U(o.changeDeleteAlert())}),s(15),c(16,"translatePaid"),i()()}p&2&&(n(6),l(m(7,4,"utm_drop_page_label")),n(3),l(m(10,6,"resource_explorer__drop_resource_label_substring")),n(3),l(m(13,8,"utm_explorer_page_drop_utm")),n(3),l(m(16,10,"utm_drop_page__cancel_drop")))}var Dt=(()=>{let r=class r{constructor(){this.utmService=h(x),this.router=h(Q),this.openModal=!1}changeDeleteAlert(){this.openModal=!this.openModal}deleteMailing(){this.changeDeleteAlert(),this.utmService.delete(this.label).subscribe(()=>{this.router.navigate(["/marketing/utm/"])})}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=v({type:r,selectors:[["utm-delete"]],inputs:{label:"label"},decls:4,vars:4,consts:[[1,"delete","container-white",3,"click"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"cancel","container-white","primary",3,"click"]],template:function(o,a){o&1&&(t(0,"button",0),y("click",function(){return a.changeDeleteAlert()}),s(1),c(2,"translatePaid"),i(),V(3,Vt,17,12)),o&2&&(n(),l(m(2,2,"utm_explorer_page_drop_utm")),n(2),N(3,a.openModal?3:-1))},dependencies:[g],encapsulation:2});let p=r;return p})();function Qt(p,r){if(p&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),s(3),i()(),t(4,"div",2)(5,"p"),s(6),c(7,"translatePaid"),i()(),t(8,"div",3)(9,"div",4)(10,"p"),s(11),c(12,"translatePaid"),i(),t(13,"span",5),s(14),i()(),d(15,"div",6),t(16,"div",4)(17,"p"),s(18),c(19,"translatePaid"),i(),t(20,"span",5),s(21),i()(),d(22,"div",6),t(23,"div",4)(24,"p"),s(25),c(26,"translatePaid"),i(),t(27,"span",5),s(28),i()(),d(29,"div",6),t(30,"div",4)(31,"p"),s(32),c(33,"translatePaid"),i(),t(34,"span",5),s(35),i()(),d(36,"div",6),t(37,"div",7)(38,"p"),s(39,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0433\u0440\u0430\u0444\u0438\u043A"),i(),t(40,"span",5),C(),t(41,"svg",8),d(42,"path",9),i()()()(),P(),t(43,"div",2)(44,"p"),s(45),c(46,"translatePaid"),i()(),t(47,"div",3)(48,"div",4)(49,"p"),s(50,"RUB"),i(),t(51,"span",5),s(52),i()(),d(53,"div",6),t(54,"div",4)(55,"p"),s(56,"USD"),i(),t(57,"span",5),s(58),i()(),d(59,"div",6),t(60,"div",7)(61,"p"),s(62,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0433\u0440\u0430\u0444\u0438\u043A"),i(),t(63,"span",5),C(),t(64,"svg",8),d(65,"path",9),i()()()(),P(),d(66,"utm-delete",10),i()),p&2){let u=E();n(3),l(u.label),n(3),b(" ",m(7,20,"utm_explorer_page_stats_section")," "),n(5),l(m(12,22,"utm__stats_explorer_page__registration_count")),n(3),l(u.utm.users_count),n(4),l(m(19,24,"ab_tests__metric_blocked_bot_count")),n(3),l(u.utm.inactive_users_count),n(4),l(m(26,26,"autowebinar_settings_page__stats_buy_subs_count")),n(3),l(u.utm.buyed_subs_users_count),n(4),l(m(33,28,"utm_explorer_page_stats__not_prolong_subscription_count")),n(3),l(u.utm.not_prolong_subs_users_count),n(2),A("routerLink","/marketing/utm/view-statistica/",u.created_at,"/",u.label,""),n(8),b(" ",m(46,30,"utm_explorer_page_finance_stats_section")," "),n(7),l(u.utm.finance_stats[1].amount),n(6),l(u.utm.finance_stats[0].amount),n(2),A("routerLink","/marketing/utm/view-statistica-price/",u.created_at,"/",u.label,""),n(6),S("label",u.label)}}var Bt=(()=>{let r=class r{constructor(e,o,a){this.activatedRoute=e,this.utmService=o,this.backButton=a}ngOnInit(){this.backButton.getButton("/marketing/utm"),this.activatedRoute.params.subscribe(e=>{this.created_at=e.created_at,this.label=e.label,this.loadUtm()})}loadUtm(){this.utmService.detail(this.created_at,this.label).subscribe(e=>{this.utm=tt(Y({},e),{finance_stats:e.finance_stats.length?e.finance_stats:[{amount:0,currency:"RUB"},{amount:0,currency:"USD"}]})})}};r.\u0275fac=function(o){return new(o||r)(f(B),f(x),f(w))},r.\u0275cmp=v({type:r,selectors:[["ng-component"]],decls:1,vars:1,consts:[[1,"main"],[1,"title-text"],[1,"container-title"],[1,"container-white"],[1,"position-relative"],[1,"right"],[1,"line"],[1,"position-relative","primary",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#007AFF"],[3,"label"]],template:function(o,a){o&1&&V(0,Qt,67,32,"div",0),o&2&&N(0,a.utm?0:-1)},dependencies:[G,Dt,g],encapsulation:2});let p=r;return p})();var Tt=et(Et());var Gt=["users_count_tmpl"],qt=["buyed_subs_users_count_tmpl"],$t=["inactive_users_count_tmpl"],Ht=["not_prolong_subs_users_count_tmpl"],Ot=(()=>{let r=class r{constructor(e,o,a){this.activatedRoute=e,this.utmService=o,this.backButton=a,this.data={users_count:{data:[],sum:0,action:0,persentage:0,color:"#3178DE"},inactive_users_count:{data:[],sum:0,action:0,persentage:0,color:"#B84041"},buyed_subs_users_count:{data:[],sum:0,action:0,persentage:0,color:"#4CC063"},not_prolong_subs_users_count:{data:[],sum:0,action:0,persentage:0,color:"#F7931A"}}}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.created_at=e.created_at,this.label=e.label,this.loadPeriods(),this.backButton.getButton("/marketing/utm/view/"+this.created_at+"/"+this.label)})}loadPeriods(){this.utmService.periods(this.label).subscribe(e=>{this.stats=e,this.fromToDate=$(e[0].date,e[e.length-1].date),this.calculateInfos("users_count",this.users_count_tmpl),this.calculateInfos("inactive_users_count",this.inactive_users_count_tmpl),this.calculateInfos("buyed_subs_users_count",this.buyed_subs_users_count_tmpl),this.calculateInfos("not_prolong_subs_users_count",this.not_prolong_subs_users_count_tmpl)})}calculateInfos(e,o){this.stats.forEach(a=>{this.data[e].data.push({x:a.date,y:a[e]}),this.data[e].sum+=a[e]}),this.data[e].action=this.stats[this.stats.length-1][e]-this.stats[this.stats.length-2][e],this.data[e].persentage=Math.floor((this.stats[this.stats.length-1][e]??1/this.stats[this.stats.length-2][e]??1)*100),this.loadChart(o,this.data[e].data,this.data[e].color)}loadChart(e,o,a){this.canvas=e.nativeElement,this.ctx=this.canvas.getContext("2d"),new Tt.Chart(this.ctx,{type:"line",data:{datasets:[{label:"Broadcasted",backgroundColor:"rgba(255, 99, 132, 0.0)",borderColor:a,fill:!0,data:o}]},options:{plugins:{legend:!0},responsive:!0,scales:{xAxes:[{type:"linear",position:"bottom",ticks:{userCallback:_=>q(new Date(T(_,!0)).getMonth())+" "+new Date(T(_,!0)).getDate()}}],yAxes:[{type:"linear",ticks:{userCallback:function(_){return _.toString()}}}]}}})}};r.\u0275fac=function(o){return new(o||r)(f(B),f(x),f(w))},r.\u0275cmp=v({type:r,selectors:[["ng-component"]],viewQuery:function(o,a){if(o&1&&(I(Gt,5),I(qt,5),I($t,5),I(Ht,5)),o&2){let _;M(_=D())&&(a.users_count_tmpl=_.first),M(_=D())&&(a.buyed_subs_users_count_tmpl=_.first),M(_=D())&&(a.inactive_users_count_tmpl=_.first),M(_=D())&&(a.not_prolong_subs_users_count_tmpl=_.first)}},decls:84,vars:59,consts:[["users_count_tmpl",""],["buyed_subs_users_count_tmpl",""],["inactive_users_count_tmpl",""],["not_prolong_subs_users_count_tmpl",""],[1,"main"],[1,"title-text"],[1,"container-title","position-relative"],[1,"position-relative"],[1,"right"],[1,"container-white","period-main-infos"],[1,"persentage"],[1,"current"],[1,"amount"],[1,"name"],[1,"container-title"],[1,"container-white"],[1,"from-to"],["width","340","height","350"]],template:function(o,a){o&1&&(t(0,"div",4)(1,"div",5)(2,"h1"),s(3),c(4,"translatePaid"),i()(),t(5,"div",6)(6,"p",7),s(7),c(8,"translatePaid"),t(9,"span",8),s(10),i()()(),t(11,"div",9)(12,"div",10)(13,"div",11)(14,"span",12),s(15),i(),t(16,"span"),s(17),i()(),t(18,"p",13),s(19),c(20,"translatePaid"),i()(),t(21,"div",10)(22,"div",11)(23,"span",12),s(24),i(),t(25,"span"),s(26),i()(),t(27,"p",13),s(28),c(29,"translatePaid"),i()(),t(30,"div",10)(31,"div",11)(32,"span",12),s(33),i(),t(34,"span"),s(35),i()(),t(36,"p",13),s(37),c(38,"translatePaid"),i()(),t(39,"div",10)(40,"div",11)(41,"span",12),s(42),i(),t(43,"span"),s(44),i()(),t(45,"p",13),s(46),c(47,"translatePaid"),i()()(),t(48,"div",14)(49,"p"),s(50),c(51,"translatePaid"),i()(),t(52,"div",15)(53,"span",16),s(54),i(),d(55,"canvas",17,0),i(),t(57,"div",14)(58,"p"),s(59),c(60,"translatePaid"),i()(),t(61,"div",15)(62,"span",16),s(63),i(),d(64,"canvas",17,1),i(),t(66,"div",14)(67,"p"),s(68),c(69,"translatePaid"),i()(),t(70,"div",15)(71,"span",16),s(72),i(),d(73,"canvas",17,2),i(),t(75,"div",14)(76,"p"),s(77),c(78,"translatePaid"),i()(),t(79,"div",15)(80,"span",16),s(81),i(),d(82,"canvas",17,3),i()()),o&2&&(n(3),l(m(4,39,"utm__stats_explorer_page_label")),n(4),b(" ",m(8,41,"utm__stats_explorer_page__main_stats_label")," "),n(3),b(" ",a.fromToDate," "),n(5),l(a.data.users_count.sum),n(),F(a.data.users_count.action>0?"plus":"minus"),n(),L(" ",a.data.users_count.action," (",a.data.users_count.persentage,"%) "),n(2),l(m(20,43,"ab_tests__metric_reg_count")),n(5),l(a.data.buyed_subs_users_count.sum),n(),F(a.data.buyed_subs_users_count.action>0?"plus":"minus"),n(),L(" ",a.data.buyed_subs_users_count.action," (",a.data.buyed_subs_users_count.persentage,"%) "),n(2),l(m(29,45,"utm_explorer_page_stats__blocked_bot_count")),n(5),l(a.data.inactive_users_count.sum),n(),F(a.data.inactive_users_count.action>0?"plus":"minus"),n(),L(" ",a.data.inactive_users_count.action," (",a.data.inactive_users_count.persentage,"%) "),n(2),l(m(38,47,"utm__stats_explorer_page__buy_subscription_count")),n(5),l(a.data.not_prolong_subs_users_count.sum),n(),F(a.data.not_prolong_subs_users_count.action>0?"plus":"minus"),n(),L(" ",a.data.not_prolong_subs_users_count.action," (",a.data.not_prolong_subs_users_count.persentage,"%) "),n(2),l(m(47,49,"utm_explorer_page_stats__not_prolong_subscription_count")),n(4),l(m(51,51,"utm__stats_explorer_page__registration_count")),n(4),l(a.fromToDate),n(5),l(m(60,53,"ab_tests__metric_blocked_bot_count")),n(4),l(a.fromToDate),n(5),l(m(69,55,"autowebinar_settings_page__stats_buy_subs_count")),n(4),l(a.fromToDate),n(5),l(m(78,57,"utm_explorer_page_stats__not_prolong_subscription_count")),n(4),l(a.fromToDate))},dependencies:[g],styles:['.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]{width:calc(50% - 8px);margin:10px 4px}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#000;font-size:17px;font-style:normal;font-weight:600;line-height:normal;letter-spacing:-.5px;margin-right:3px}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-size:12px;color:#b84041}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:before{content:"+"}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{font-size:12px;color:#38913b}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#636366;font-size:13px;font-style:normal;font-weight:400;line-height:18px}']});let p=r;return p})();var Ut=et(Et());var zt=["price"],Ft=(()=>{let r=class r{constructor(e,o,a){this.activatedRoute=e,this.utmService=o,this.backButton=a,this.priceData={rub:[],usd:[]}}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.created_at=e.created_at,this.label=e.label,this.loadPeriod(),this.backButton.getButton("/marketing/utm/view/"+this.created_at+"/"+this.label)})}loadPeriod(){var e=0;this.utmService.periods(this.label).subscribe(o=>{this.stats=o,o.forEach(a=>{a.finance_stats.length?(this.priceData.rub.push({x:a.date,y:a.finance_stats[1]?.amount}),this.priceData.usd.push({x:a.date,y:a.finance_stats[0].amount})):(this.priceData.rub.push({x:a.date,y:0}),this.priceData.usd.push({x:a.date,y:0}))}),this.fromToDate=$(o[0].date,o[o.length-1].date),this.loadChart()})}loadChart(){this.canvas=this.price.nativeElement,this.ctx=this.canvas.getContext("2d"),new Ut.Chart(this.ctx,{type:"line",data:{datasets:[{label:"USD",backgroundColor:"rgba(255, 99, 132, 0.0)",borderColor:"#3178DE",fill:!0,data:this.priceData.usd},{label:"RUB",backgroundColor:"rgba(255, 99, 132, 0.0)",borderColor:"#4CC063",fill:!0,data:this.priceData.rub}]},options:{plugins:{legend:!0},responsive:!0,scales:{xAxes:[{type:"linear",position:"bottom",ticks:{userCallback:e=>q(new Date(T(e,!0)).getMonth())+" "+new Date(T(e,!0)).getDate()}}],yAxes:[{type:"linear",ticks:{userCallback:function(e){return e.toString()}}}]}}})}};r.\u0275fac=function(o){return new(o||r)(f(B),f(x),f(w))},r.\u0275cmp=v({type:r,selectors:[["ng-component"]],viewQuery:function(o,a){if(o&1&&I(zt,5),o&2){let _;M(_=D())&&(a.price=_.first)}},decls:10,vars:4,consts:[["price",""],[1,"main"],[1,"title-text"],[1,"container-white"],[1,"from-to"],["width","340","height","350"]],template:function(o,a){o&1&&(t(0,"div",1)(1,"div",2)(2,"h1"),s(3),c(4,"translatePaid"),i()(),t(5,"div",3)(6,"span",4),s(7),i(),d(8,"canvas",5,0),i()()),o&2&&(n(3),l(m(4,2,"utm_explorer_page_finance_stats_section")),n(4),l(a.fromToDate))},dependencies:[g],encapsulation:2});let p=r;return p})();var Qe=(()=>{let r=class r{};r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=at({type:r}),r.\u0275inj=nt({imports:[dt.forChild([{path:"",component:It},{path:"create",component:Mt},{path:"view/:created_at/:label",component:Bt},{path:"view-statistica/:created_at/:label",component:Ot},{path:"view-statistica-price/:created_at/:label",component:Ft}]),wt,yt,ct,Z,H,Pt]});let p=r;return p})();export{Qe as UtmModule};
