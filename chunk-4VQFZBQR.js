import{a as Me}from"./chunk-VUNMNEZD.js";import{a as Be}from"./chunk-PTV2XGQC.js";import{a as q}from"./chunk-MEAZIUAG.js";import{a as X}from"./chunk-X45VFNDL.js";import{c as Xe}from"./chunk-UU7W4BPF.js";import{a as Z}from"./chunk-RWA3J2TQ.js";import{b as me}from"./chunk-I2HLB5WR.js";import{h as Pe,i as ke}from"./chunk-YJWMZDQW.js";import{b as W,c as Y,d as Qe}from"./chunk-DKSFB3XB.js";import{a as _e}from"./chunk-D3XCSWEP.js";import{c as J,e as B,f as N,g as Q,h as R,i as z,k as v,l as we,m as $,n as Se,o as K,q as ye,s as We,t as Ye,u as Je}from"./chunk-RYXNNZL7.js";import{a as Ze,b as qe,d as ze,g as Ue}from"./chunk-TNEU45BB.js";import{A as x,B as je,Ca as s,D as Ge,Da as m,Ea as h,Fa as De,Ha as le,I as P,Ia as se,J as k,Ja as ce,K as M,L as I,Ma as U,Na as ie,Oa as de,Pa as d,Q as Fe,Qa as p,Ra as ge,U as r,V as C,aa as w,ca as u,cb as xe,db as He,fb as Re,ga as Te,ha as ne,ia as be,ja as S,ka as ae,kb as j,la as re,ma as oe,mb as G,na as t,nb as pe,oa as n,pa as c,pb as $e,qb as H,ra as D,rb as Ke,sa as g,ta as f,tb as b,u as Ae,v as Ne,va as ue,y as E}from"./chunk-TXA45OZS.js";import{a as L,b as A}from"./chunk-CWTPBX7D.js";var O=(()=>{let a=class a{constructor(){this.resourceUrl=Ke("marketing/broadcasting"),this.http=E(Re)}mailings(){return this.http.get(`${this.resourceUrl}/getAllBroadcastTasks`)}deleteManual(e){return this.http.delete(`${this.resourceUrl}/broadcastTasks/${e}`)}createManual(e){return this.http.post(`${this.resourceUrl}/runManuallyBroadcast`,e)}createBefore(e){return this.http.post(`${this.resourceUrl}/retouchTasks`,e)}updateBefore(e,o){return this.http.put(`${this.resourceUrl}/retouchTasks/${o}`,e)}deleteBefore(e){return this.http.delete(`${this.resourceUrl}/retouchTasks/${e}`)}findBefore(e){return this.http.get(`${this.resourceUrl}/retouchTasks/${e}`)}createAfter(e){return this.http.post(`${this.resourceUrl}/retouchAfterEndSubscription`,e)}updateAfter(e,o){return this.http.put(`${this.resourceUrl}/retouchAfterEndSubscription/${o}`,e)}deleteAfter(e){return this.http.delete(`${this.resourceUrl}/retouchAfterEndSubscription/${e}`)}findAfter(e){return this.http.get(`${this.resourceUrl}/retouchAfterEndSubscription/${e}`)}detail(e){return this.http.get(`${this.resourceUrl}/${e}`)}period(e,o){return Ue(this.http.get(`${this.resourceUrl}/retouchTasks/${e}/period`,{params:o}),!0)}delete(e){return this.http.delete(`${this.resourceUrl}/broadcastTasks/${e}`)}};a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=Ae({token:a,factory:a.\u0275fac,providedIn:"root"});let i=a;return i})();var ee=function(i){return i.manual="manual_broadcast",i.buy_before="retouch_task",i.buy_after="retouch_after_end_subscription",i}(ee||{}),he=function(i){return i.all="all",i.only_subscribers="only_subscribers",i.not_prolong_subscriptionn="not_prolong_subscriptionn",i.not_prolong_subscription="not_prolong_subscription",i}(he||{});function Pt(i,a){if(i&1&&(t(0,"span",6),M(),t(1,"svg",7)(2,"desc"),s(3," Created with Pixso. "),n(),c(4,"defs")(5,"path",8),n()(),I(),t(6,"h1"),s(7),d(8,"translatePaid"),n(),t(9,"div",9)(10,"div",10)(11,"p"),s(12),d(13,"translatePaid"),n(),t(14,"span",11),s(15),n()(),c(16,"div",12),t(17,"div",10)(18,"p"),s(19),d(20,"translatePaid"),n(),t(21,"span",11),s(22),n()(),c(23,"div",12),t(24,"div",10)(25,"p"),s(26),d(27,"translatePaid"),n(),t(28,"span",11),s(29),n()()()),i&2){let _=f();r(7),m(p(8,7,"broadcasting_page__manual_broadcast_not_started_label")),r(5),m(p(13,9,"broadcasting_page__manual_broadcast_users_count")),r(3),m(_.manualMailings.broadcast_process.users_count),r(4),m(p(20,11,"broadcasting_page__manual_broadcast_users_success_count")),r(3),m(_.manualMailings.broadcast_process.success),r(4),m(p(27,13,"broadcasting_page__manual_broadcast_users_failed_count")),r(3),m(_.manualMailings.broadcast_process.failed)}}function kt(i,a){if(i&1&&(t(0,"span",13),M(),t(1,"svg",14),c(2,"defs")(3,"path",15),n()(),I(),t(4,"h1",16),s(5,"\u0420\u0430\u0441\u0441\u044B\u043B\u043A\u0430 \u0435\u0449\u0435 \u043D\u0435 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430"),n(),t(6,"div",17)(7,"p"),s(8),d(9,"translatePaid"),n()(),t(10,"div",9)(11,"div",10)(12,"p"),s(13),d(14,"date"),n(),t(15,"span",11),s(16),d(17,"translatePaid"),n()(),c(18,"div",12),t(19,"div",10)(20,"p"),s(21),d(22,"date"),n(),t(23,"span",11),s(24),d(25,"translatePaid"),n()()()),i&2){let _=f();r(8),m(p(9,5,"broadcasting_page__manual_broadcast_planned_start_label")),r(5),m(ge(14,7,_.manualMailings.broadcast_time,"HH:mm")),r(3),m(p(17,10,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_send_time")),r(5),m(ge(22,12,_.manualMailings.broadcast_time,"dd.MM.YYYY")),r(3),m(p(25,15,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_send_hours"))}}var et=(()=>{let a=class a{constructor(){this.close=new Fe,this.deleted=new Fe,this.router=E(G),this.mailingsService=E(O)}closeModal(){this.close.next(void 0)}deleteMailing(){this.mailingsService.deleteManual(this.manualMailings.broadcast_time).subscribe(()=>{this.close.next(void 0),this.deleted.next(void 0)})}};a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=x({type:a,selectors:[["manual-alert"]],inputs:{manualMailings:"manualMailings"},outputs:{close:"close",deleted:"deleted"},decls:10,vars:6,consts:[[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"delete","container-white",3,"click"],[1,"finished"],["width","30.000000","height","23.000000","viewBox","0 0 30 23","fill","none","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Vector","d","M28.41 6.36L12.36 22.41C12.17 22.59 11.95 22.74 11.71 22.84C11.47 22.94 11.21 22.99 10.95 22.99C10.68 22.99 10.42 22.94 10.18 22.84C9.94 22.74 9.72 22.59 9.53 22.41L0.58 13.41C0.2 13.03 -0.01 12.53 -0.01 12C-0.01 11.47 0.2 10.96 0.58 10.58L3.58 7.58C3.95 7.21 4.46 7 4.99 7C5.52 7 6.02 7.2 6.4 7.57L10.98 11.98L10.99 12L22.58 0.58C22.96 0.2 23.47 -0.01 24 -0.01C24.53 -0.01 25.03 0.2 25.41 0.58L28.41 3.52C28.59 3.71 28.74 3.93 28.85 4.17C28.95 4.41 29 4.68 29 4.94C29 5.2 28.95 5.46 28.85 5.71C28.75 5.95 28.6 6.17 28.41 6.36Z","fill","#FFFFFF","fill-opacity","1.000000","fill-rule","nonzero"],[1,"container-white"],[1,"position-relative"],[1,"right"],[1,"line"],[1,"waiting"],["width","18.000000","height","26.000000","viewBox","0 0 18 26","fill","none","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Vector","d","M18 6.45L18 2C18 1.46 17.78 0.96 17.41 0.58C17.03 0.21 16.53 0 16 0L2 0C1.46 0 0.96 0.21 0.58 0.58C0.21 0.96 0 1.46 0 2L0 6.5C0 6.81 0.07 7.11 0.21 7.39C0.35 7.67 0.55 7.91 0.79 8.1L7.33 13L0.79 17.9C0.55 18.08 0.35 18.32 0.21 18.6C0.07 18.88 0 19.18 0 19.5L0 24C0 24.53 0.21 25.03 0.58 25.41C0.96 25.78 1.46 26 2 26L16 26C16.53 26 17.03 25.78 17.41 25.41C17.78 25.03 18 24.53 18 24L18 19.54C17.99 19.23 17.92 18.93 17.79 18.65C17.65 18.37 17.45 18.13 17.2 17.94L10.65 13L17.2 8.05C17.45 7.86 17.65 7.62 17.79 7.34C17.92 7.06 17.99 6.76 18 6.45ZM16 19.54L16 24L2 24L2 19.5L8 15L8 18C8 18.26 8.1 18.51 8.29 18.7C8.48 18.89 8.73 19 9 19C9.26 19 9.51 18.89 9.7 18.7C9.89 18.51 10 18.26 10 18L10 15.01L16 19.54ZM16 6.45L15.27 7L2.66 7L2 6.5L2 2L16 2L16 6.45Z","fill","#FFFFFF","fill-opacity","1.000000","fill-rule","nonzero"],[2,"margin-bottom","20px"],[1,"container-title"]],template:function(o,l){o&1&&(t(0,"div",0),g("click",function(){return l.closeModal()}),n(),t(1,"div",1)(2,"span",2),g("click",function(){return l.closeModal()}),M(),t(3,"svg",3),c(4,"path",4),n()(),w(5,Pt,30,15)(6,kt,26,17),I(),t(7,"button",5),g("click",function(){return l.deleteMailing()}),s(8),d(9,"translatePaid"),n()()),o&2&&(u("@alertBackgroundAnimation",void 0),r(),u("@alertAnimation",void 0),r(4),S(5,l.manualMailings.broadcast_process.state!=="wait_start"?5:6),r(3),m(p(9,4,"broadcasting_page__manual_broadcast_drop")))},dependencies:[xe,b],styles:[".waiting[_ngcontent-%COMP%], .finished[_ngcontent-%COMP%]{border-radius:20px;padding:15px;font-size:22px}.waiting[_ngcontent-%COMP%]{background:#f7931a;padding:15px 20px}.finished[_ngcontent-%COMP%]{background:#28c281}.alert[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:start;margin:0}.alert[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:30px;width:80%}.delete[_ngcontent-%COMP%]{margin-top:20px}"],data:{animation:[Pe,ke]}});let i=a;return i})();var It=i=>({path:i}),Ot=i=>["view-before",i],Ft=i=>["view-after",i];function Tt(i,a){if(i&1){let _=D();t(0,"div",11),g("click",function(){P(_);let o=f().$implicit,l=f();return k(l.setMailing(o.task))}),t(1,"span",12),M(),t(2,"svg",13)(3,"g",14),c(4,"path",15),n(),t(5,"defs")(6,"clipPath",16),c(7,"rect",17),n()()()(),I(),t(8,"div",18)(9,"p"),s(10),n(),t(11,"span"),s(12),d(13,"date"),n(),c(14,"span"),n()()}if(i&2){let _=f().$implicit,e=f();r(10),m(_.task.name),r(2),h(" \u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435: ",ge(13,2,e.getDate(_.task.broadcast_time),"dd.MM.YYYY / HH:mm")," ")}}function Dt(i,a){if(i&1&&(t(0,"div",19)(1,"span",20),M(),t(2,"svg",13)(3,"g",21),c(4,"path",22),n(),t(5,"defs")(6,"clipPath",23),c(7,"rect",17),n()()()(),I(),t(8,"div",18)(9,"p"),s(10),n(),t(11,"span"),s(12," \u0414\u043E \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u0442\u0435\u043D\u0438\u044F \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0438 "),n(),c(13,"span"),n()()),i&2){let _=f().$implicit;u("routerLink",ie(2,Ot,_.task.id)),r(10),m(_.task.name)}}function Vt(i,a){if(i&1&&(t(0,"div",19)(1,"span",24),M(),t(2,"svg",13)(3,"g",25),c(4,"path",26),n(),t(5,"defs")(6,"clipPath",27),c(7,"rect",28),n()()()(),I(),t(8,"div",18)(9,"p"),s(10),n(),t(11,"span"),s(12),d(13,"translatePaid"),n(),c(14,"span"),n()()),i&2){let _=f().$implicit;u("routerLink",ie(5,Ft,_.task.id)),r(10),m(_.task.name),r(2),h(" ",p(13,3,"broadcasting_page__create_page_after_end_subs")," ")}}function Lt(i,a){if(i&1&&w(0,Tt,15,5,"div",10)(1,Dt,14,4)(2,Vt,15,7),i&2){let _=a.$implicit,e=f();S(0,_.type===e.broadcastKind.manual?0:_.type===e.broadcastKind.buy_before?1:2)}}function At(i,a){if(i&1){let _=D();t(0,"manual-alert",29),g("close",function(){P(_);let o=f();return k(o.mailing=void 0)})("deleted",function(){P(_);let o=f();return k(o.loadMailings())}),n()}if(i&2){let _=f();u("manualMailings",_.mailing)}}var tt=(()=>{let a=class a{constructor(){this.mailingsService=E(O),this.backButton=E(H),this.broadcastKind=ee,this.titles={data:"\u0412\u0430\u0448\u0438 \u0440\u0430\u0441\u0441\u044B\u043B\u043A\u0438",noData:"\u0420\u0430\u0441\u0441\u044B\u043B\u043E\u043A \u043F\u043E\u043A\u0430 \u043D\u0435\u0442..."},this.description={data:"\u0414\u043B\u044F \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A \u0432\u0430\u0448\u0435\u0439 \u0440\u0430\u0441\u0441\u044B\u043B\u043A\u0438 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430.",noData:"\u0427\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E, \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443 \u043D\u0438\u0436\u0435"},this.images={noData:"assets/Enot web/enot_thinking.json",data:"assets/Enot web/enot_happy 2.json"},this.mode="noData"}ngOnInit(){this.loadMailings(),this.backButton.getButton("/marketing/menu")}loadMailings(){this.mailingsService.mailings().subscribe(e=>{this.mailings=e,this.mode=e.length?"data":"noData"})}setMailing(e){this.mailing=e}getDate(e){return new Date(ze(e))}};a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=x({type:a,selectors:[["ng-component"]],decls:20,vars:12,consts:[[1,"title"],[3,"options"],[1,"mailings"],["routerLink","create/",1,"create"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["cx","10","cy","10","r","10","fill","white"],["x","9","y","5","width","2","height","10","rx","1","fill","#007AFF"],["x","15","y","9","width","2","height","10","rx","1","transform","rotate(90 15 9)","fill","#007AFF"],[1,"bottom"],[3,"manualMailings"],[1,"mailing","container-white","card","m-4"],[1,"mailing","container-white","card","m-4",3,"click"],[1,"image","manual"],["xmlns","http://www.w3.org/2000/svg","width","22","height","22","viewBox","0 0 22 22","fill","none"],["clip-path","url(#clip0_96_4229)"],["d","M18.2054 11.5853L13.0672 16.7819C12.9413 16.9093 12.7914 17.0104 12.6262 17.0794C12.461 17.1485 12.2837 17.184 12.1047 17.1841H6.47319L3.92429 19.7364C3.86041 19.8003 3.78458 19.851 3.70112 19.8855C3.61767 19.9201 3.52822 19.9379 3.43788 19.9379C3.34755 19.9379 3.2581 19.9201 3.17464 19.8855C3.09118 19.851 3.01535 19.8003 2.95148 19.7364C2.8876 19.6726 2.83693 19.5967 2.80236 19.5133C2.76779 19.4298 2.75 19.3404 2.75 19.25C2.75 19.1597 2.76779 19.0702 2.80236 18.9868C2.83693 18.9033 2.8876 18.8275 2.95148 18.7636L4.8928 16.8231L10.7168 11H17.9613C18.0291 11.0001 18.0953 11.0203 18.1516 11.0579C18.208 11.0955 18.2519 11.1489 18.278 11.2115C18.3041 11.274 18.3111 11.3428 18.2982 11.4093C18.2853 11.4758 18.253 11.537 18.2054 11.5853ZM18.623 2.62713C17.5682 1.75902 16.2279 1.31458 14.8634 1.38034C13.4988 1.44611 12.2075 2.01738 11.241 2.98291L10.416 3.7976C10.351 3.86128 10.3139 3.94812 10.3129 4.03909V9.45315L15.0394 4.72659C15.1694 4.6031 15.3425 4.53527 15.5218 4.53757C15.701 4.53986 15.8723 4.6121 15.9991 4.73887C16.1259 4.86565 16.1981 5.03693 16.2004 5.21621C16.2027 5.39548 16.1349 5.56856 16.0114 5.69854L12.0926 9.62502H19.6878C19.7509 9.62516 19.8129 9.6079 19.8668 9.57516C19.9208 9.54242 19.9647 9.49545 19.9937 9.4394C20.5828 8.3193 20.7682 7.03048 20.5185 5.78978C20.2689 4.54908 19.5995 3.43222 18.623 2.62713ZM5.39984 14.3714L8.93788 10.8333V6.08096C8.93777 6.01321 8.91764 5.94701 8.88002 5.89067C8.8424 5.83432 8.78897 5.79035 8.72644 5.76427C8.66391 5.7382 8.59508 5.73118 8.52857 5.7441C8.46207 5.75702 8.40086 5.78931 8.35265 5.8369L5.21593 8.93752C5.08785 9.06486 4.98628 9.21632 4.9171 9.38315C4.84792 9.54998 4.8125 9.72887 4.81288 9.90948V14.1281C4.81283 14.1962 4.83296 14.2627 4.87073 14.3193C4.9085 14.3758 4.9622 14.4199 5.02505 14.446C5.08789 14.472 5.15705 14.4788 5.22377 14.4655C5.29049 14.4523 5.35176 14.4195 5.39984 14.3714Z","fill","white"],["id","clip0_96_4229"],["width","22","height","22","fill","white"],[1,"infos"],[1,"mailing","container-white","card","m-4",3,"routerLink"],[1,"image","before"],["clip-path","url(#clip0_96_2128)"],["d","M19.9371 17.1876C19.9371 17.3699 19.8646 17.5448 19.7357 17.6737C19.6068 17.8026 19.4319 17.8751 19.2496 17.8751C19.0672 17.8751 18.8924 17.8026 18.7634 17.6737C18.6345 17.5448 18.5621 17.3699 18.5621 17.1876C18.5598 15.1826 17.7623 13.2603 16.3445 11.8426C14.9268 10.4248 13.0046 9.62733 10.9996 9.62505H7.56206V13.0626C7.56217 13.1986 7.52191 13.3316 7.44637 13.4448C7.37084 13.558 7.26342 13.6462 7.13773 13.6982C7.01204 13.7503 6.87372 13.7639 6.74029 13.7374C6.60686 13.7108 6.48431 13.6452 6.38816 13.549L2.26316 9.42396C2.19924 9.36011 2.14853 9.28429 2.11393 9.20082C2.07933 9.11736 2.06152 9.0279 2.06152 8.93755C2.06152 8.84721 2.07933 8.75774 2.11393 8.67428C2.14853 8.59082 2.19924 8.515 2.26316 8.45115L6.38816 4.32615C6.48431 4.22989 6.60686 4.16432 6.74029 4.13775C6.87372 4.11118 7.01204 4.1248 7.13773 4.17688C7.26342 4.22895 7.37084 4.31716 7.44637 4.43032C7.52191 4.54347 7.56217 4.6765 7.56206 4.81255V8.25005H10.9996C13.3692 8.25256 15.641 9.19499 17.3166 10.8706C18.9921 12.5461 19.9346 14.8179 19.9371 17.1876Z","fill","white"],["id","clip0_96_2128"],[1,"image","after"],["clip-path","url(#clip0_96_1508)"],["d","M2.06294 17.1876C2.06294 17.3699 2.13537 17.5448 2.2643 17.6737C2.39323 17.8026 2.5681 17.8751 2.75044 17.8751C2.93277 17.8751 3.10764 17.8026 3.23657 17.6737C3.3655 17.5448 3.43794 17.3699 3.43794 17.1876C3.44021 15.1826 4.2377 13.2603 5.65545 11.8426C7.0732 10.4248 8.99543 9.62733 11.0004 9.62505H14.4379V13.0626C14.4378 13.1986 14.4781 13.3316 14.5536 13.4448C14.6292 13.558 14.7366 13.6462 14.8623 13.6982C14.988 13.7503 15.1263 13.7639 15.2597 13.7374C15.3931 13.7108 15.5157 13.6452 15.6118 13.549L19.7368 9.42396C19.8008 9.36011 19.8515 9.28429 19.8861 9.20082C19.9207 9.11736 19.9385 9.0279 19.9385 8.93755C19.9385 8.84721 19.9207 8.75774 19.8861 8.67428C19.8515 8.59082 19.8008 8.515 19.7368 8.45115L15.6118 4.32615C15.5157 4.22989 15.3931 4.16432 15.2597 4.13775C15.1263 4.11118 14.988 4.1248 14.8623 4.17688C14.7366 4.22895 14.6292 4.31716 14.5536 4.43032C14.4781 4.54347 14.4378 4.6765 14.4379 4.81255V8.25005H11.0004C8.63083 8.25256 6.359 9.19499 4.68343 10.8706C3.00787 12.5461 2.06544 14.8179 2.06294 17.1876Z","fill","white"],["id","clip0_96_1508"],["width","22","height","22","fill","white","transform","matrix(-1 0 0 1 22 0)"],[3,"close","deleted","manualMailings"]],template:function(o,l){o&1&&(t(0,"div")(1,"div",0),c(2,"ng-lottie",1),t(3,"h1"),s(4),n(),t(5,"p"),s(6),n()(),t(7,"div",2)(8,"button",3),M(),t(9,"svg",4),c(10,"circle",5)(11,"rect",6)(12,"rect",7),n(),s(13),d(14,"translatePaid"),n(),re(15,Lt,3,1,null,null,ae),n(),I(),t(17,"div",8),c(18,"alert-notify"),n()(),w(19,At,1,1,"manual-alert",9)),o&2&&(ne("main m-7 ",l.mode,""),r(2),u("options",ie(10,It,l.images[l.mode])),r(2),m(l.titles[l.mode]),r(2),m(l.description[l.mode]),r(7),h(" ",p(14,8,"broadcasting_page__add_button")," "),r(2),oe(l.mailings),r(4),S(19,l.mailing?19:-1))},dependencies:[pe,me,Y,et,xe,b],styles:[".manual[_ngcontent-%COMP%]{background-color:#0098ea}.before[_ngcontent-%COMP%]{background:#f7931a}.after[_ngcontent-%COMP%]{background:#28c281}.mailings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.create[_ngcontent-%COMP%]{width:calc(var(--width) + 25px)}"]});let i=a;return i})();var it=()=>({standalone:!0});function Nt(i,a){i&1&&(t(0,"div",3),M(),t(1,"svg",14),c(2,"path",15),n()())}function jt(i,a){i&1&&(t(0,"div",3),M(),t(1,"svg",14),c(2,"path",15),n()())}function Gt(i,a){i&1&&(t(0,"div",3),M(),t(1,"svg",14),c(2,"path",15),n()())}function Ht(i,a){i&1&&(t(0,"div",3),M(),t(1,"svg",14),c(2,"path",15),n()())}function Rt(i,a){i&1&&(s(0),d(1,"translatePaid")),i&2&&h(" ",p(1,1,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_send_now")," ")}function $t(i,a){i&1&&(s(0),d(1,"translatePaid")),i&2&&h(" ",p(1,1,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_send_postponed")," ")}function Kt(i,a){if(i&1){let _=D();t(0,"div",12)(1,"div",16)(2,"input",17),ce("ngModelChange",function(o){P(_);let l=f();return se(l.hours,o)||(l.hours=o),k(o)}),g("ngModelChange",function(){P(_);let o=f();return k(o.changeDate())}),n(),t(3,"p",3),s(4),d(5,"translatePaid"),n()(),c(6,"div",4),t(7,"div",16)(8,"input",18),ce("ngModelChange",function(o){P(_);let l=f();return se(l.date,o)||(l.date=o),k(o)}),g("ngModelChange",function(){P(_);let o=f();return k(o.changeDate())}),n(),t(9,"p",3),s(10),d(11,"translatePaid"),n()()()}if(i&2){let _=f();r(2),u("dropSpecialCharacters",!1),le("ngModel",_.hours),u("ngModelOptions",U(12,it)),r(2),m(p(5,8,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_send_time")),r(4),u("dropSpecialCharacters",!1),le("ngModel",_.date),u("ngModelOptions",U(13,it)),r(2),m(p(11,10,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_send_hours"))}}var nt=(()=>{let a=class a{constructor(e){this.controlContainer=e,this.modalOpen=!1,this.time=!1,this.target_auditory=he}ngOnInit(){this.editForm=this.controlContainer.control}changeModal(e){this.modalOpen=!this.modalOpen,e!==void 0&&(this.time=e,this.editForm.patchValue({broadcast_time:null,time:e}),this.editForm.get("broadcast_time").addValidators(B.required),this.editForm.get("broadcast_time").updateValueAndValidity())}changeDate(){if(this.date&&this.hours){let e=this.date.split("-").map(l=>Number(l)),o=this.hours.split(":").map(l=>Number(l));e.length===3&&o.length===2&&String(e[2]).length===4&&o[0]<24&&o[1]<60&&e[0]<32&&e[1]<13&&this.editForm.patchValue({broadcast_time:new Date(e[2],e[1]-1,e[0],o[0],o[1]).getTime()})}}changeAuditory(e){this.editForm.get("target_auditory").setValue(e)}};a.\u0275fac=function(o){return new(o||a)(C(N))},a.\u0275cmp=x({type:a,selectors:[["marketing-create-send-manual"]],decls:52,vars:38,consts:[[1,"container-title",2,"margin-top","0"],[1,"container-white"],[1,"position-relative",3,"click"],[1,"right"],[1,"line"],[1,"container-title"],[1,"position-relative","dropup"],[1,"right",3,"click"],[1,"margin-4"],["src","assets/images/Group 31.svg","alt","menu"],[1,"item",3,"click"],[1,"line-border"],[1,"container-white","date"],["title","\u0440\u0430\u0441\u0441\u044B\u043B\u043A\u0438",3,"isHaveButton","form"],["xmlns","http://www.w3.org/2000/svg","width","12","height","10","viewBox","0 0 12 10","fill","none"],["d","M1 5.8L4.15789 9L11 1","stroke","#007AFF","stroke-width","1.7","stroke-linecap","round","stroke-linejoin","round"],[1,"position-relative"],["type","text","placeholder","\u0427\u0427:\u043C\u043C","mask","00:00",3,"ngModelChange","dropSpecialCharacters","ngModel","ngModelOptions"],["type","text","placeholder","\u041C\u041C-\u0414\u0414-\u0413\u0413\u0413\u0413","mask","00-00-0000",3,"ngModelChange","dropSpecialCharacters","ngModel","ngModelOptions"]],template:function(o,l){o&1&&(t(0,"div",0)(1,"p"),s(2),d(3,"translatePaid"),n()(),t(4,"div",1)(5,"div",2),g("click",function(){return l.changeAuditory(l.target_auditory.all)}),t(6,"p"),s(7),d(8,"translatePaid"),n(),w(9,Nt,3,0,"div",3),n(),c(10,"div",4),t(11,"div",2),g("click",function(){return l.changeAuditory(l.target_auditory.only_subscribers)}),t(12,"p"),s(13),d(14,"translatePaid"),n(),w(15,jt,3,0,"div",3),n(),c(16,"div",4),t(17,"div",2),g("click",function(){return l.changeAuditory(l.target_auditory.not_prolong_subscriptionn)}),t(18,"p"),s(19),d(20,"translatePaid"),n(),w(21,Gt,3,0,"div",3),n(),c(22,"div",4),t(23,"div",2),g("click",function(){return l.changeAuditory(l.target_auditory.not_prolong_subscription)}),t(24,"p"),s(25),d(26,"translatePaid"),n(),w(27,Ht,3,0,"div",3),n()(),t(28,"div",5)(29,"p"),s(30),d(31,"translatePaid"),n()(),t(32,"div",1)(33,"div",6)(34,"p"),s(35),d(36,"translatePaid"),n(),t(37,"div",7),g("click",function(){return l.changeModal()}),w(38,Rt,2,3)(39,$t,2,3),t(40,"span",8),c(41,"img",9),n()(),t(42,"div")(43,"span",10),g("click",function(){return l.changeModal(!1)}),s(44),d(45,"translatePaid"),n(),c(46,"span",11),t(47,"span",10),g("click",function(){return l.changeModal(!0)}),s(48),d(49,"translatePaid"),n()()()(),w(50,Kt,12,14,"div",12),c(51,"preview",13)),o&2&&(r(2),m(p(3,20,"broadcasting_page__manual_broadcast_create_step_4_select_target")),r(5),m(p(8,22,"broadcasting_page__manual_broadcast_create_step_4_target_all")),r(2),S(9,l.editForm.get("target_auditory").value===l.target_auditory.all?9:-1),r(4),m(p(14,24,"broadcasting_page__manual_broadcast_create_step_4_target_subscribers")),r(2),S(15,l.editForm.get("target_auditory").value===l.target_auditory.only_subscribers?15:-1),r(4),m(p(20,26,"broadcasting_page__manual_broadcast_create_step_4_target_not_subscribers")),r(2),S(21,l.editForm.get("target_auditory").value===l.target_auditory.not_prolong_subscriptionn?21:-1),r(4),m(p(26,28,"broadcasting_page__manual_broadcast_create_step_4_target_end_subscriptions")),r(2),S(27,l.editForm.get("target_auditory").value===l.target_auditory.not_prolong_subscription?27:-1),r(3),m(p(31,30,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_label")),r(5),m(p(36,32,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_send")),r(3),S(38,l.time?39:38),r(4),ne("dropup-content ",l.modalOpen?"dropup-active":"",""),r(2),m(p(45,34,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_send_now")),r(4),m(p(49,36,"broadcasting_page__manual_broadcast_create_step_4_broadcast_time_send_postponed")),r(2),S(50,l.time?50:-1),r(),u("isHaveButton",!0)("form",l.editForm))},dependencies:[J,Q,we,Xe,q,b],styles:[".manual[_ngcontent-%COMP%]{background-color:#0098ea}.before[_ngcontent-%COMP%]{background:#f7931a}.after[_ngcontent-%COMP%]{background:#28c281}.mailings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.create[_ngcontent-%COMP%]{width:calc(var(--width) + 25px)}.image[_ngcontent-%COMP%]{display:flex}.container-title[_ngcontent-%COMP%]{justify-content:start;color:#636366;margin-bottom:10px;margin-left:10px}.right[_ngcontent-%COMP%]{color:#8e8e93}.date[_ngcontent-%COMP%]{margin-top:10px}"]});let i=a;return i})();function qt(i,a){if(i&1){let _=D();t(0,"div",6)(1,"div",7)(2,"p"),s(3),n(),t(4,"span"),s(5),n()(),t(6,"div",8),g("click",function(){let o=P(_).$index,l=f();return k(l.deleteBtn(o))}),M(),t(7,"svg",9),c(8,"circle",10)(9,"rect",11)(10,"rect",12),n()()()}if(i&2){let _=a.$implicit;r(3),m(_.text),r(2),m(_.url)}}var rt=(()=>{let a=class a{constructor(e,o){this.controlContainer=e,this.notificationService=o,this.createBtn=new z({text:new v(null,B.required),url:new v(null,[B.required,B.pattern(/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/)])})}ngOnInit(){this.editForm=this.controlContainer.control}addBtn(){this.createBtn.valid?(this.editForm.get("keyboard_settings").push(new z({text:new v(this.createBtn.controls.text.value),url:new v(this.createBtn.controls.url.value)})),this.createBtn.reset()):this.createBtn.controls.url.errors?.pattern?this.notificationService.createNotification("notify__button_url_is_incorrect"):this.notificationService.createNotification("notify__need_set_all_button_fields")}deleteBtn(e){this.editForm.get("keyboard_settings").removeAt(e)}};a.\u0275fac=function(o){return new(o||a)(C(N),C(W))},a.\u0275cmp=x({type:a,selectors:[["marketing-create-button"]],decls:12,vars:8,consts:[[1,"main"],[1,"container-white",3,"formGroup"],["placeholder","broadcasting_page__manual_broadcast_create_step_3_button_name","controlName","text",3,"container"],[1,"line"],["type","text","formControlName","url",3,"placeholder"],[1,"add","container-white",2,"margin","10px 0","justify-content","center",3,"click"],[1,"container-white","card",2,"margin","5px 0"],[1,"infos"],[1,"right",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["cx","10","cy","10","r","10","fill","#3C3C43","fill-opacity","0.3"],["x","5.99023","y","5","width","13","height","1.4","rx","0.7","transform","rotate(45 5.99023 5)","fill","white"],["x","15.1826","y","5.98999","width","13","height","1.4","rx","0.7","transform","rotate(135 15.1826 5.98999)","fill","white"]],template:function(o,l){o&1&&(t(0,"div",0)(1,"form",1),c(2,"name",2)(3,"div",3),t(4,"div"),c(5,"input",4),d(6,"translatePaid"),n()(),t(7,"div",5),g("click",function(){return l.addBtn()}),s(8),d(9,"translatePaid"),n(),re(10,qt,11,2,"div",6,ae),n()),o&2&&(r(),u("formGroup",l.createBtn),r(),u("container",!1),r(3),u("placeholder",p(6,4,"broadcasting_page__manual_broadcast_create_step_3_button_url")),r(3),h(" ",p(9,6,"broadcasting_page__manual_broadcast_create_step_3_add_button")," "),r(2),oe(l.editForm.get("keyboard_settings").value))},dependencies:[$,J,Q,R,K,ye,Z,b],styles:[".manual[_ngcontent-%COMP%]{background-color:#0098ea}.before[_ngcontent-%COMP%]{background:#f7931a}.after[_ngcontent-%COMP%]{background:#28c281}.mailings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.create[_ngcontent-%COMP%]{width:calc(var(--width) + 25px)}.image[_ngcontent-%COMP%]{display:flex}.container-title[_ngcontent-%COMP%]{justify-content:start;color:#636366;margin-bottom:10px;margin-left:10px}.right[_ngcontent-%COMP%]{color:#8e8e93}.date[_ngcontent-%COMP%]{margin-top:10px}"]});let i=a;return i})();function Ut(i,a){i&1&&(t(0,"span",9),M(),t(1,"svg",20),c(2,"path",21),n()())}function Wt(i,a){i&1&&(t(0,"span",9),M(),t(1,"svg",20),c(2,"path",21),n()())}function Yt(i,a){i&1&&(t(0,"span",9),M(),t(1,"svg",20),c(2,"path",21),n()())}var ot=(()=>{let a=class a{constructor(e){this.controlContainer=e,this.broadcastKind=ee}ngOnInit(){this.editForm=this.controlContainer.control}setBroadCast(e){this.editForm.patchValue({broadcast_kind:e})}};a.\u0275fac=function(o){return new(o||a)(C(N))},a.\u0275cmp=x({type:a,selectors:[["marketing-create-action"]],decls:50,vars:18,consts:[[1,"container-white"],[1,"card",3,"click"],[1,"image","manual"],["xmlns","http://www.w3.org/2000/svg","width","22","height","22","viewBox","0 0 22 22","fill","none"],["clip-path","url(#clip0_96_4229)"],["d","M18.2054 11.5853L13.0672 16.7819C12.9413 16.9093 12.7914 17.0104 12.6262 17.0794C12.461 17.1485 12.2837 17.184 12.1047 17.1841H6.47319L3.92429 19.7364C3.86041 19.8003 3.78458 19.851 3.70112 19.8855C3.61767 19.9201 3.52822 19.9379 3.43788 19.9379C3.34755 19.9379 3.2581 19.9201 3.17464 19.8855C3.09118 19.851 3.01535 19.8003 2.95148 19.7364C2.8876 19.6726 2.83693 19.5967 2.80236 19.5133C2.76779 19.4298 2.75 19.3404 2.75 19.25C2.75 19.1597 2.76779 19.0702 2.80236 18.9868C2.83693 18.9033 2.8876 18.8275 2.95148 18.7636L4.8928 16.8231L10.7168 11H17.9613C18.0291 11.0001 18.0953 11.0203 18.1516 11.0579C18.208 11.0955 18.2519 11.1489 18.278 11.2115C18.3041 11.274 18.3111 11.3428 18.2982 11.4093C18.2853 11.4758 18.253 11.537 18.2054 11.5853ZM18.623 2.62713C17.5682 1.75902 16.2279 1.31458 14.8634 1.38034C13.4988 1.44611 12.2075 2.01738 11.241 2.98291L10.416 3.7976C10.351 3.86128 10.3139 3.94812 10.3129 4.03909V9.45315L15.0394 4.72659C15.1694 4.6031 15.3425 4.53527 15.5218 4.53757C15.701 4.53986 15.8723 4.6121 15.9991 4.73887C16.1259 4.86565 16.1981 5.03693 16.2004 5.21621C16.2027 5.39548 16.1349 5.56856 16.0114 5.69854L12.0926 9.62502H19.6878C19.7509 9.62516 19.8129 9.6079 19.8668 9.57516C19.9208 9.54242 19.9647 9.49545 19.9937 9.4394C20.5828 8.3193 20.7682 7.03048 20.5185 5.78978C20.2689 4.54908 19.5995 3.43222 18.623 2.62713ZM5.39984 14.3714L8.93788 10.8333V6.08096C8.93777 6.01321 8.91764 5.94701 8.88002 5.89067C8.8424 5.83432 8.78897 5.79035 8.72644 5.76427C8.66391 5.7382 8.59508 5.73118 8.52857 5.7441C8.46207 5.75702 8.40086 5.78931 8.35265 5.8369L5.21593 8.93752C5.08785 9.06486 4.98628 9.21632 4.9171 9.38315C4.84792 9.54998 4.8125 9.72887 4.81288 9.90948V14.1281C4.81283 14.1962 4.83296 14.2627 4.87073 14.3193C4.9085 14.3758 4.9622 14.4199 5.02505 14.446C5.08789 14.472 5.15705 14.4788 5.22377 14.4655C5.29049 14.4523 5.35176 14.4195 5.39984 14.3714Z","fill","white"],["id","clip0_96_4229"],["width","22","height","22","fill","white"],[1,"infos"],[1,"right","primary"],[1,"line"],[1,"image","before"],["clip-path","url(#clip0_96_2128)"],["d","M19.9371 17.1876C19.9371 17.3699 19.8646 17.5448 19.7357 17.6737C19.6068 17.8026 19.4319 17.8751 19.2496 17.8751C19.0672 17.8751 18.8924 17.8026 18.7634 17.6737C18.6345 17.5448 18.5621 17.3699 18.5621 17.1876C18.5598 15.1826 17.7623 13.2603 16.3445 11.8426C14.9268 10.4248 13.0046 9.62733 10.9996 9.62505H7.56206V13.0626C7.56217 13.1986 7.52191 13.3316 7.44637 13.4448C7.37084 13.558 7.26342 13.6462 7.13773 13.6982C7.01204 13.7503 6.87372 13.7639 6.74029 13.7374C6.60686 13.7108 6.48431 13.6452 6.38816 13.549L2.26316 9.42396C2.19924 9.36011 2.14853 9.28429 2.11393 9.20082C2.07933 9.11736 2.06152 9.0279 2.06152 8.93755C2.06152 8.84721 2.07933 8.75774 2.11393 8.67428C2.14853 8.59082 2.19924 8.515 2.26316 8.45115L6.38816 4.32615C6.48431 4.22989 6.60686 4.16432 6.74029 4.13775C6.87372 4.11118 7.01204 4.1248 7.13773 4.17688C7.26342 4.22895 7.37084 4.31716 7.44637 4.43032C7.52191 4.54347 7.56217 4.6765 7.56206 4.81255V8.25005H10.9996C13.3692 8.25256 15.641 9.19499 17.3166 10.8706C18.9921 12.5461 19.9346 14.8179 19.9371 17.1876Z","fill","white"],["id","clip0_96_2128"],[1,"image","after"],["clip-path","url(#clip0_96_1508)"],["d","M2.06294 17.1876C2.06294 17.3699 2.13537 17.5448 2.2643 17.6737C2.39323 17.8026 2.5681 17.8751 2.75044 17.8751C2.93277 17.8751 3.10764 17.8026 3.23657 17.6737C3.3655 17.5448 3.43794 17.3699 3.43794 17.1876C3.44021 15.1826 4.2377 13.2603 5.65545 11.8426C7.0732 10.4248 8.99543 9.62733 11.0004 9.62505H14.4379V13.0626C14.4378 13.1986 14.4781 13.3316 14.5536 13.4448C14.6292 13.558 14.7366 13.6462 14.8623 13.6982C14.988 13.7503 15.1263 13.7639 15.2597 13.7374C15.3931 13.7108 15.5157 13.6452 15.6118 13.549L19.7368 9.42396C19.8008 9.36011 19.8515 9.28429 19.8861 9.20082C19.9207 9.11736 19.9385 9.0279 19.9385 8.93755C19.9385 8.84721 19.9207 8.75774 19.8861 8.67428C19.8515 8.59082 19.8008 8.515 19.7368 8.45115L15.6118 4.32615C15.5157 4.22989 15.3931 4.16432 15.2597 4.13775C15.1263 4.11118 14.988 4.1248 14.8623 4.17688C14.7366 4.22895 14.6292 4.31716 14.5536 4.43032C14.4781 4.54347 14.4378 4.6765 14.4379 4.81255V8.25005H11.0004C8.63083 8.25256 6.359 9.19499 4.68343 10.8706C3.00787 12.5461 2.06544 14.8179 2.06294 17.1876Z","fill","white"],["id","clip0_96_1508"],["width","22","height","22","fill","white","transform","matrix(-1 0 0 1 22 0)"],["xmlns","http://www.w3.org/2000/svg","width","12","height","10","viewBox","0 0 12 10","fill","none"],["d","M1 5.8L4.15789 9L11 1","stroke","#007AFF","stroke-width","1.7","stroke-linecap","round","stroke-linejoin","round"]],template:function(o,l){o&1&&(t(0,"div",0)(1,"div",1),g("click",function(){return l.setBroadCast(l.broadcastKind.manual)}),t(2,"span",2),M(),t(3,"svg",3)(4,"g",4),c(5,"path",5),n(),t(6,"defs")(7,"clipPath",6),c(8,"rect",7),n()()()(),I(),t(9,"div",8)(10,"p"),s(11),d(12,"translatePaid"),n(),t(13,"span"),s(14),d(15,"translatePaid"),n()(),w(16,Ut,3,0,"span",9),n(),c(17,"div",10),t(18,"div",1),g("click",function(){return l.setBroadCast(l.broadcastKind.buy_before)}),t(19,"span",11),M(),t(20,"svg",3)(21,"g",12),c(22,"path",13),n(),t(23,"defs")(24,"clipPath",14),c(25,"rect",7),n()()()(),I(),t(26,"div",8)(27,"p"),s(28),d(29,"translatePaid"),n(),t(30,"span"),s(31),d(32,"translatePaid"),n()(),w(33,Wt,3,0,"span",9),n(),c(34,"div",10),t(35,"div",1),g("click",function(){return l.setBroadCast(l.broadcastKind.buy_after)}),t(36,"span",15),M(),t(37,"svg",3)(38,"g",16),c(39,"path",17),n(),t(40,"defs")(41,"clipPath",18),c(42,"rect",19),n()()()(),I(),t(43,"div",8)(44,"p"),s(45),d(46,"translatePaid"),n(),t(47,"span"),s(48,"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u043F\u0440\u043E\u0434\u0430\u0436\u0430"),n()(),w(49,Yt,3,0,"span",9),n()()),o&2&&(r(11),m(p(12,8,"broadcasting_page__manual_broadcast")),r(3),m(p(15,10,"broadcasting_page__create_page_manual_broadcast_sublabel")),r(2),S(16,l.editForm.get("broadcast_kind").value===l.broadcastKind.manual?16:-1),r(12),m(p(29,12,"broadcasting_page__broadcast_before_payment_sub_label")),r(3),m(p(32,14,"broadcasting_page__create_page_before_payment_sublabel")),r(2),S(33,l.editForm.get("broadcast_kind").value===l.broadcastKind.buy_before?33:-1),r(12),m(p(46,16,"broadcasting_page__create_page_after_end_subs")),r(4),S(49,l.editForm.get("broadcast_kind").value===l.broadcastKind.buy_after?49:-1))},dependencies:[b],styles:[".manual[_ngcontent-%COMP%]{background-color:#0098ea}.before[_ngcontent-%COMP%]{background:#f7931a}.after[_ngcontent-%COMP%]{background:#28c281}.mailings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.create[_ngcontent-%COMP%]{width:calc(var(--width) + 25px)}.image[_ngcontent-%COMP%]{display:flex}.container-title[_ngcontent-%COMP%]{justify-content:start;color:#636366;margin-bottom:10px;margin-left:10px}.right[_ngcontent-%COMP%]{color:#8e8e93}.date[_ngcontent-%COMP%]{margin-top:10px}"]});let i=a;return i})();var st=(()=>{let a=class a{constructor(e){this.controlContainer=e}ngOnInit(){this.editForm=this.controlContainer.control}};a.\u0275fac=function(o){return new(o||a)(C(N))},a.\u0275cmp=x({type:a,selectors:[["marketing-create-text"]],decls:9,vars:7,consts:[[3,"formGroup"],["placeholder","broadcasting_page__create_step_2_name_text_input","controlName","name"],[1,"down-description"],["placeholder","broadcasting_page__create_step_2_msg_text_input"]],template:function(o,l){o&1&&(t(0,"form",0),c(1,"name",1),t(2,"p",2),s(3),d(4,"translatePaid"),n(),c(5,"media",3),t(6,"p",2),s(7),d(8,"translatePaid"),n()()),o&2&&(u("formGroup",l.editForm),r(3),m(p(4,3,"autowebinar_notifications_name_textbox_sublabel")),r(4),m(p(8,5,"broadcasting_page__create_step_2_msg_text_input_sublabel")))},dependencies:[$,R,K,Z,X,b],styles:[".manual[_ngcontent-%COMP%]{background-color:#0098ea}.before[_ngcontent-%COMP%]{background:#f7931a}.after[_ngcontent-%COMP%]{background:#28c281}.mailings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.create[_ngcontent-%COMP%]{width:calc(var(--width) + 25px)}.image[_ngcontent-%COMP%]{display:flex}.container-title[_ngcontent-%COMP%]{justify-content:start;color:#636366;margin-bottom:10px;margin-left:10px}.right[_ngcontent-%COMP%]{color:#8e8e93}.date[_ngcontent-%COMP%]{margin-top:10px}"]});let i=a;return i})();function Xt(i,a){if(i&1){let _=D();t(0,"div",4)(1,"p",5),s(2),n(),t(3,"label",6)(4,"input",7),g("change",function(){let o=P(_).$implicit,l=f();return k(l.setTariff(o.id))}),n(),c(5,"span",8),n()(),c(6,"div")}if(i&2){let _=a.$implicit,e=a.$index,o=a.$count,l=f();r(2),m(_.name),r(2),u("checked",l.getChecked(_.id)),r(2),ne("line ",e===o-1?"no-active":"","")}}var Ie=(()=>{let a=class a{constructor(e){this.controlContainer=e,this.tariffService=E(Me)}ngOnInit(){this.tariffService.tariff().subscribe(e=>this.tariffs=e),this.editForm=this.controlContainer.control}setTariff(e){let o=this.editForm.get("tariffs").value,l=o.indexOf(e);l>-1?(o.splice(l,1),this.editForm.patchValue({tariffs:[...o]})):this.editForm.patchValue({tariffs:[...o,e]})}getChecked(e){return this.editForm.get("tariffs").value.includes(e)}};a.\u0275fac=function(o){return new(o||a)(C(N))},a.\u0275cmp=x({type:a,selectors:[["marketing-create-send-after"]],decls:10,vars:8,consts:[[1,"container-title"],[1,"container-white"],[1,"down-description"],["title","\u0440\u0430\u0441\u0441\u044B\u043B\u043A\u0438",3,"isHaveButton","form"],[1,"position-relative","card",2,"height","30px","width","100%","display","flex","align-items","center"],[1,"text-card"],[1,"switch","right"],["type","checkbox",1,"switch-input",3,"change","checked"],[1,"slider","round"]],template:function(o,l){o&1&&(t(0,"div",0),s(1),d(2,"translatePaid"),n(),t(3,"div",1),re(4,Xt,7,5,null,null,ae),n(),t(6,"p",2),s(7),d(8,"translatePaid"),n(),c(9,"preview",3)),o&2&&(r(),h(" ",p(2,4,"broadcasting_page__after_end_subs_step_3_resources"),`
`),r(3),oe(l.tariffs),r(3),m(p(8,6,"broadcasting_page__after_end_subs_step_3_resources_sublabel")),r(2),u("isHaveButton",!0)("form",l.editForm))},dependencies:[q,b],styles:[".manual[_ngcontent-%COMP%]{background-color:#0098ea}.before[_ngcontent-%COMP%]{background:#f7931a}.after[_ngcontent-%COMP%]{background:#28c281}.mailings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.create[_ngcontent-%COMP%]{width:calc(var(--width) + 25px)}.image[_ngcontent-%COMP%]{display:flex}.container-title[_ngcontent-%COMP%]{justify-content:start;color:#636366;margin-bottom:10px;margin-left:10px}.right[_ngcontent-%COMP%]{color:#8e8e93}.date[_ngcontent-%COMP%]{margin-top:10px}"]});let i=a;return i})();var dt=(()=>{let a=class a{constructor(e){this.controlContainer=e,this.hours="0"}ngOnInit(){this.editForm=this.controlContainer.control}change(){this.editForm.patchValue({hours:this.day?Number(this.day)*24+Number(this.hours):this.hours})}};a.\u0275fac=function(o){return new(o||a)(C(N))},a.\u0275cmp=x({type:a,selectors:[["marketing-create-send-before"]],decls:19,vars:15,consts:[[1,"container-title"],[1,"container-white"],[1,"position-relative"],["type","number","placeholder","0",3,"ngModelChange","ngModel"],[1,"right"],[1,"line"],[1,"down-description"],["title","\u0440\u0430\u0441\u0441\u044B\u043B\u043A\u0438",3,"form"]],template:function(o,l){o&1&&(t(0,"div",0),s(1),d(2,"translatePaid"),n(),t(3,"div",1)(4,"div",2)(5,"input",3),ce("ngModelChange",function(T){return se(l.hours,T)||(l.hours=T),T}),g("ngModelChange",function(){return l.change()}),n(),t(6,"p",4),s(7),d(8,"translatePaid"),n()(),c(9,"div",5),t(10,"div",2)(11,"input",3),ce("ngModelChange",function(T){return se(l.day,T)||(l.day=T),T}),g("ngModelChange",function(){return l.change()}),n(),t(12,"p",4),s(13),d(14,"translatePaid"),n()()(),t(15,"p",6),s(16),d(17,"translatePaid"),n(),c(18,"preview",7)),o&2&&(r(),h(" ",p(2,7,"broadcasting_page__before_payment_step_3_period_label"),`
`),r(4),le("ngModel",l.hours),r(2),m(p(8,9,"broadcasting_page__before_payment_step_3_period_hours")),r(4),le("ngModel",l.day),r(2),m(p(14,11,"broadcasting_page__before_payment_step_3_period_days")),r(3),h(" ",p(17,13,"broadcasting_page__before_payment_settings_menu_broadcast_period_sublabel"),`
`),r(2),u("form",l.editForm))},dependencies:[J,Se,Q,we,q,b],styles:[".manual[_ngcontent-%COMP%]{background-color:#0098ea}.before[_ngcontent-%COMP%]{background:#f7931a}.after[_ngcontent-%COMP%]{background:#28c281}.mailings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.create[_ngcontent-%COMP%]{width:calc(var(--width) + 25px)}.image[_ngcontent-%COMP%]{display:flex}.container-title[_ngcontent-%COMP%]{justify-content:start;color:#636366;margin-bottom:10px;margin-left:10px}.right[_ngcontent-%COMP%]{color:#8e8e93}.date[_ngcontent-%COMP%]{margin-top:10px}"]});let i=a;return i})();var ti=()=>({path:"assets/Enot web/enot_work.json"}),ii=(i,a)=>({step:i,of:a});function ni(i,a){i&1&&c(0,"marketing-create-action")}function ai(i,a){i&1&&c(0,"marketing-create-text")}function ri(i,a){i&1&&c(0,"marketing-create-button")}function oi(i,a){i&1&&c(0,"marketing-create-send-manual")}function li(i,a){if(i&1&&w(0,ri,1,0,"marketing-create-button")(1,oi,1,0),i&2){let _=f(2);S(0,_.mode===_.manual_step.button?0:_.mode===_.manual_step.send_manual?1:-1)}}function si(i,a){i&1&&c(0,"marketing-create-send-before")}function ci(i,a){i&1&&c(0,"marketing-create-send-after")}function di(i,a){if(i&1&&w(0,li,2,1)(1,si,1,0)(2,ci,1,0),i&2){let _=f();S(0,_.editForm.get("broadcast_kind").value===_.broadcastKind.manual?0:_.editForm.get("broadcast_kind").value===_.broadcastKind.buy_before?1:2)}}function pi(i,a){if(i&1&&c(0,"span"),i&2){let _=f();be("",_.step>2?"active":""," ",_.step===1?"last":"","")}}function mi(i,a){i&1&&s(0," \u0414\u0430\u043B\u0435\u0435 ")}function _i(i,a){i&1&&(s(0),d(1,"translatePaid")),i&2&&h(" ",p(1,1,"broadcasting_page__manual_broadcast_create_step_3_skip")," ")}function ui(i,a){if(i&1&&w(0,mi,1,0)(1,_i,2,3),i&2){let _=f();S(0,_.editForm.get("keyboard_settings").value.length>0?0:1)}}function gi(i,a){i&1&&(s(0),d(1,"translatePaid")),i&2&&h(" ",p(1,1,"broadcasting_page__before_payment_step_3_ok")," ")}function fi(i,a){i&1&&s(0," \u0414\u0430\u043B\u0435\u0435 ")}var ve=function(i){return i.text="text",i.button="button",i.send_manual="send_manual",i}(ve||{}),mt=function(i){return i.text="text",i.send_before="send_before",i}(mt||{}),_t=function(i){return i.text="text",i.send_after="send_after",i}(_t||{}),ut=(()=>{let a=class a{constructor(){this.mailingsService=E(O),this.router=E(G),this.notifySerice=E(W),this.editForm=new z({id:new v(null),broadcast_kind:new v(ee.manual),broadcast_time:new v(void 0),name:new v(null,B.required),message:new v(null,B.required),attachment:new v([]),keyboard_settings:new We([]),target_auditory:new v(he.all),time:new v(!1),hours:new v(0,[B.min(1),B.max(24)]),tariffs:new v([])}),this.broadcastKind=ee,this.titles={action:"broadcasting_page__create_page_step_1_label",text:"broadcasting_page__create_step_2_label",button:"broadcasting_page__manual_broadcast_create_step_3_label",send_manual:"broadcasting_page__manual_broadcast_create_step_4_label",send_after:"broadcasting_page__manual_broadcast_create_step_4_label",send_before:"broadcasting_page__manual_broadcast_create_step_4_label"},this.manual_step=ve,this.before_step=mt,this.after_step=_t,this.mode="action"}ngOnInit(){window?.Telegram?.WebApp?.onEvent("backButtonClicked",()=>this.backButton())}backButton(){switch(this.mode){case"text":{this.mode="action";break}case"button":{this.mode=ve.text;break}case"send_manual":{this.mode=ve.send_manual;break}default:{this.router.navigate(["/marketing/mailings"]);break}}}next(){switch(this.mode){case"action":this.editForm.get("broadcast_kind").value!==null&&(this.mode=this.manual_step.text,this.editForm.get("target_auditory").addValidators(B.required));break;case"text":this.editForm.controls.name.valid?this.editForm.controls.message.valid?this.editForm.controls.broadcast_kind.value===this.broadcastKind.buy_after?this.mode=this.after_step.send_after:this.editForm.controls.broadcast_kind.value===this.broadcastKind.buy_before?this.mode=this.before_step.send_before:this.mode=this.manual_step.button:this.notifySerice.createNotification("notify__broadcast_content_is_required"):this.notifySerice.createNotification("notify__broadcast_name_is_required");break;case this.manual_step.button:this.mode=ve.send_manual;break;case this.manual_step.send_manual:{let e=this.editForm.controls.time.value;!e||e&&this.editForm.controls.broadcast_time.value?this.saveManual():this.notifySerice.createNotification("notify__broadcast_date_is_incorrect");break}case this.before_step.send_before:this.editForm.controls.hours.valid&&this.editForm.controls.hours.value>0?this.saveBefore():this.notifySerice.createNotification("notify__broadcast_period_is_incorrect");break;case this.after_step.send_after:this.editForm.controls.tariffs.value.length?this.saveAfter():this.notifySerice.createNotification("notify__need_select_resource");break}}saveManual(){this.successResponse(this.mailingsService.createManual(this.rowValue))}saveBefore(){this.successResponse(this.mailingsService.createBefore(this.rowValue))}saveAfter(){this.successResponse(this.mailingsService.createAfter(this.rowValue))}get rowValue(){return A(L({},this.editForm.getRawValue()),{attachment:this.editForm.controls.attachment.value.map(e=>e.id)})}successResponse(e){e.subscribe(()=>{this.router.navigate(["/marketing/mailings"]),this.notifySerice.createNotification("notify__broadcast_created",1)})}get step(){switch(this.mode){case"action":return 0;case"text":return 1;case"button":return 2;case"send_manual":return 3;case"send_after":return 2;case"send_before":return 2;default:return 0}}};a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=x({type:a,selectors:[["ng-component"]],decls:24,vars:21,consts:[[1,"main",2,"margin-bottom","100px",3,"ngSubmit","formGroup"],[1,"title"],[2,"width","150px","height","150px",3,"options"],[1,"container"],[1,"bottom"],[1,"step-view"],["translatePaid","admin_panel_tariffs_page__create_step",3,"params"],[1,"indicator"],[1,"active"],[3,"class"],[1,"down-button"],["type","submit"]],template:function(o,l){o&1&&(t(0,"form",0),g("ngSubmit",function(){return l.next()}),t(1,"div",1),c(2,"ng-lottie",2),t(3,"h1"),s(4),d(5,"translatePaid"),n()(),t(6,"div",3),w(7,ni,1,0,"marketing-create-action")(8,ai,1,0)(9,di,3,1),n(),t(10,"div",4),c(11,"alert-notify"),t(12,"div",5),c(13,"span",6),t(14,"div",7),c(15,"span",8)(16,"span")(17,"span"),w(18,pi,1,4,"span",9),n()(),t(19,"div",10)(20,"button",11),w(21,ui,2,1)(22,gi,2,3)(23,fi,1,0),n()()()()),o&2&&(u("formGroup",l.editForm),r(2),u("options",U(17,ti)),r(2),m(p(5,15,l.titles[l.mode])),r(3),S(7,l.mode==="action"?7:l.mode===l.before_step.text?8:9),r(6),u("params",de(18,ii,(l.step+1).toString(),(l.editForm.get("broadcast_kind").value!==l.broadcastKind.manual?3:4).toString())),r(3),be("",l.step>0?"active":""," ",l.step===1?"last":"",""),r(),be("",l.step>1?"active":""," ",l.step===1?"last":"",""),r(),S(18,l.editForm.get("broadcast_kind").value===l.broadcastKind.manual?18:-1),r(3),S(21,l.mode===l.manual_step.button?21:l.step===3||l.editForm.get("broadcast_kind").value!==l.broadcastKind.manual&&l.step===2?22:23))},dependencies:[$,R,K,me,_e,Y,nt,rt,ot,st,Ie,dt,b],styles:[".manual[_ngcontent-%COMP%]{background-color:#0098ea}.before[_ngcontent-%COMP%]{background:#f7931a}.after[_ngcontent-%COMP%]{background:#28c281}.mailings[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.create[_ngcontent-%COMP%]{width:calc(var(--width) + 25px)}.image[_ngcontent-%COMP%]{display:flex}.container-title[_ngcontent-%COMP%]{justify-content:start;color:#636366;margin-bottom:10px;margin-left:10px}.right[_ngcontent-%COMP%]{color:#8e8e93}.date[_ngcontent-%COMP%]{margin-top:10px}"]});let i=a;return i})();var hi=()=>({column:"broadcasted",color:"#3178DE"}),gt=i=>[i],Ci=()=>({column:"buyed",color:"#4CC063"}),ft=(()=>{let a=class a{constructor(e,o){this.activatedRoute=e,this.mailinsService=o,this.broadCasted=0,this.broadCastedAction=0,this.buyed=0,this.buyedAction=0,this.lastDate=new Date().getTime()}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.mailingId=e.id,this.loadPeriod()})}loadPeriod(){this.mailinsService.period(this.mailingId,this.params).subscribe(e=>{this.periods=e,this.fromToDate=qe(e[0].date,e[e.length-1].date),e.forEach(o=>{this.broadCasted+=o.broadcasted,this.buyed+=o.buyed}),e.length>1&&(this.broadCastedAction=e[e.length-1].broadcasted-e[e.length-2].broadcasted,this.broadCastedPersentage=Math.floor(e[e.length-1].broadcasted/e[e.length-2].broadcasted*100),this.buyedAction=e[e.length-1].buyed-e[e.length-2].buyed,this.buyedPersentage=Math.floor(e[e.length-1].buyed/e[e.length-2].buyed*100))})}get params(){return{start:this.firstDate,end:this.lastDate}}set params(e){this.firstDate=e.start,this.lastDate=e.end,this.loadPeriod()}};a.\u0275fac=function(o){return new(o||a)(C(j),C(O))},a.\u0275cmp=x({type:a,selectors:[["ng-component"]],decls:42,vars:43,consts:[[1,"main"],[1,"title-text"],[1,"container-title","position-relative"],[1,"position-relative"],[1,"right",2,"font-weight","600","font-size","12px"],[1,"container-white","period-main-infos"],[1,"all"],[1,"current"],[1,"amount"],[1,"name"],[1,"follows"],[1,"container-title"],[1,"container-white"],[3,"params","dateIncrease","fields","statistics"]],template:function(o,l){o&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),s(3),d(4,"translatePaid"),n()(),t(5,"div",2)(6,"p",3),s(7),d(8,"translatePaid"),t(9,"span",4),s(10),n()()(),t(11,"div",5)(12,"div",6)(13,"div",7)(14,"span",8),s(15),n(),t(16,"span"),s(17),n()(),t(18,"p",9),s(19),d(20,"translatePaid"),n()(),t(21,"div",10)(22,"div",7)(23,"span",8),s(24),n(),t(25,"span"),s(26),n()(),t(27,"p",9),s(28),d(29,"translatePaid"),n()()(),t(30,"div",11)(31,"p"),s(32),d(33,"translatePaid"),n()(),t(34,"div",12)(35,"statistica-grafig",13),g("params",function(T){return l.params=T}),n()(),t(36,"div",11)(37,"p"),s(38),d(39,"translatePaid"),n()(),t(40,"div",12)(41,"statistica-grafig",13),g("params",function(T){return l.params=T}),n()()()),o&2&&(r(3),m(p(4,25,"broadcasting_page__before_payment_stats_label")),r(4),h(" ",p(8,27,"broadcasting_page__before_payment_stats_menu_all_label")," "),r(3),m(l.fromToDate),r(5),m(l.broadCasted),r(),Te(l.broadCastedAction>0?"plus":"minus"),r(),De("",l.broadCastedAction,"(",l.broadCastedPersentage||0,"%)"),r(2),m(p(20,29,"utm_explorer_page_stats__registration_count")),r(5),m(l.buyed),r(),Te(l.buyedAction>0?"plus":"minus"),r(),De("",l.buyedAction,"(",l.buyedPersentage||0,"%)"),r(2),m(p(29,31,"broadcasting_page__before_payment_sell_subs_count_label")),r(4),m(p(33,33,"broadcasting_page__before_payment_stats_menu_broadcast_count_schedulle_label")),r(3),u("dateIncrease",!0)("fields",ie(38,gt,U(37,hi)))("statistics",l.periods),r(3),m(p(39,35,"broadcasting_page__before_payment_stats_menu_sell_subs_count_schedulle_label")),r(3),u("dateIncrease",!0)("fields",ie(41,gt,U(40,Ci)))("statistics",l.periods))},dependencies:[Be,b],styles:['.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{width:var(--width);font-size:15px}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .follows[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#000;font-size:17px;font-style:normal;font-weight:600;line-height:normal;letter-spacing:-.5px;margin-right:3px}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .follows[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-size:12px;color:#b84041}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:before, .main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .follows[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:before{content:"+"}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .follows[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{font-size:12px;color:#38913b}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .follows[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#636366;font-size:13px;font-style:normal;font-weight:400;line-height:18px}']});let i=a;return i})();function vi(i,a){if(i&1){let _=D();t(0,"div",1),g("click",function(){P(_);let o=f();return k(o.changeDeleteAlert())}),n(),t(1,"div",2)(2,"span",3),g("click",function(){P(_);let o=f();return k(o.changeDeleteAlert())}),M(),t(3,"svg",4),c(4,"path",5),n()(),I(),t(5,"h1"),s(6),d(7,"translatePaid"),n(),t(8,"p"),s(9),d(10,"translatePaid"),n(),t(11,"button",0),g("click",function(){P(_);let o=f();return k(o.deleteMailing())}),s(12),d(13,"translatePaid"),n(),t(14,"button",6),g("click",function(){P(_);let o=f();return k(o.changeDeleteAlert())}),s(15),d(16,"translatePaid"),n()()}i&2&&(u("@alertBackgroundAnimation",void 0),r(),u("@alertAnimation",void 0),r(5),m(p(7,6,"broadcasting_page__drop_broadcast_label")),r(3),m(p(10,8,"resource_explorer__drop_resource_label_substring")),r(3),m(p(13,10,"broadcasting_page__manual_broadcast_drop")),r(3),m(p(16,12,"broadcasting_page__drop_broadcast_cancel_btn")))}var Oe=(()=>{let a=class a{constructor(){this.mailingsService=E(O),this.router=E(G),this.openModal=!1}changeDeleteAlert(){this.openModal=!this.openModal}deleteMailing(){this.changeDeleteAlert(),this.mailingsService[this.mailingType](this.id).subscribe(()=>{this.router.navigate(["/marketing/mailings/"])})}};a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=x({type:a,selectors:[["mailing-delete"]],inputs:{id:"id",mailingType:"mailingType"},decls:4,vars:4,consts:[[1,"delete","container-white",3,"click"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"cancel","container-white","primary",3,"click"]],template:function(o,l){o&1&&(t(0,"button",0),g("click",function(){return l.changeDeleteAlert()}),s(1),d(2,"translatePaid"),n(),w(3,vi,17,14)),o&2&&(r(),m(p(2,2,"broadcasting_page__before_payment_drop")),r(2),S(3,l.openModal?3:-1))},dependencies:[b],data:{animation:[Pe,ke]}});let i=a;return i})();var Ct=(()=>{let a=class a{constructor(){this.translatePaid=E(b),this.map=new Map([[1,"hour_1"],[2,"hour_2"]])}transform(e){let o=this.map.get(e)||"hour_3";return this.translatePaid.transform(o)}};a.\u0275fac=function(o){return new(o||a)},a.\u0275pipe=Ge({name:"beforeDetailHour",type:a,pure:!0,standalone:!0});let i=a;return i})();var xi=(i,a)=>({period_digit:i,period_name:a});function Mi(i,a){if(i&1){let _=D();t(0,"div",0)(1,"div",1)(2,"h1"),s(3),n()(),t(4,"div",2)(5,"p"),s(6),d(7,"translatePaid"),n(),t(8,"div",3)(9,"label",4)(10,"input",5),g("change",function(){P(_);let o=f();return k(o.save())}),n(),c(11,"span",6),n()()(),c(12,"p",7),d(13,"beforeDetailHour"),t(14,"div",8)(15,"p"),s(16),d(17,"translatePaid"),n()(),t(18,"div",9)(19,"div",10)(20,"p"),s(21),d(22,"translatePaid"),n(),t(23,"span",3),s(24),n()(),c(25,"div",11),t(26,"div",10)(27,"p"),s(28),d(29,"translatePaid"),n(),t(30,"span",3),s(31),n()(),c(32,"div",11),t(33,"div",12)(34,"p"),s(35),d(36,"translatePaid"),n(),t(37,"span",3),M(),t(38,"svg",13),c(39,"path",14),n()()()(),I(),t(40,"p",15),s(41),d(42,"translatePaid"),n(),t(43,"div",16)(44,"p"),s(45),d(46,"translatePaid"),n(),t(47,"span",3),M(),t(48,"svg",13),c(49,"path",17),n()()(),I(),c(50,"preview",18),t(51,"p",15),s(52),d(53,"translatePaid"),n(),c(54,"mailing-delete",19),n()}if(i&2){let _=f();r(3),m(_.mailing.name),r(3),m(p(7,19,"broadcasting_page__before_payment_page_enable_btn")),r(4),u("checked",_.mailing.enabled),r(2),u("params",de(37,xi,_.mailing.hours.toString(),p(13,21,_.mailing.hours))),r(4),m(p(17,23,"broadcasting_page__before_payment_stats_label")),r(5),m(p(22,25,"utm_explorer_page_stats__registration_count")),r(3),m(_.broadcasted),r(4),m(p(29,27,"broadcasting_page__before_payment_sell_subs_count_label")),r(3),m(_.buyed),r(2),ue("routerLink","../../statistic/",_.mailingId,""),r(2),m(p(36,29,"broadcasting_page__before_payment_watch_schedulle_label")),r(6),h(" ",p(42,31,"broadcasting_page__before_payment_settings_sublabel")," "),r(2),ue("routerLink","../../view-before-setting/",_.mailingId,"/"),r(2),m(p(46,33,"broadcasting_page__after_end_subs_settings_button")),r(5),u("model",_.mailing),r(2),h(" ",p(53,35,"broadcasting_page__after_end_subs_preview_label")," "),r(2),u("id",_.mailingId)}}var bt=(()=>{let a=class a{constructor(e,o,l){this.activatedRoute=e,this.mailingsService=o,this.backButton=l,this.broadcasted=0,this.buyed=0}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.mailingId=e.id,this.loadTariff(),this.backButton.getButton("/marketing/mailings")})}loadTariff(){this.mailingsService.period(this.mailingId,{}).subscribe(e=>{this.period=e,e.forEach(o=>{this.broadcasted+=o.broadcasted,this.buyed+=o.buyed})}),this.mailingsService.findBefore(this.mailingId).subscribe(e=>{this.mailing=A(L({},e),{message:e.message.text})})}save(){this.mailing.enabled=!this.mailing.enabled,this.mailingsService.updateBefore(A(L({},this.mailing),{message:{text:this.mailing.message}}),this.mailingId).subscribe()}};a.\u0275fac=function(o){return new(o||a)(C(j),C(O),C(H))},a.\u0275cmp=x({type:a,selectors:[["ng-component"]],decls:1,vars:1,consts:[[1,"main"],[1,"title-text"],[1,"container-white","card","active"],[1,"right"],[1,"switch-mini"],["type","checkbox",1,"switch-input",3,"change","checked"],[1,"slider","round"],["translatePaid","broadcasting_page__before_payment_broadcast_period_text",1,"down-description",3,"params"],[1,"container-title"],[1,"container-white"],[1,"position-relative"],[1,"line"],[1,"primary","position-relative",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#007AFF"],[1,"down-description"],[1,"container-white","position-relative",3,"routerLink"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#3C3C43","fill-opacity","0.3"],[3,"model"],["mailingType","deleteBefore",3,"id"]],template:function(o,l){o&1&&w(0,Mi,55,40,"div",0),o&2&&S(0,l.mailing?0:-1)},dependencies:[pe,q,_e,Oe,b,Ct],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{width:var(--width);font-size:15px}.main[_ngcontent-%COMP%]   .tariff[_ngcontent-%COMP%]{height:30px}"]});let i=a;return i})();var xt=(()=>{let a=class a{constructor(e,o,l,y,T){this.activatedRoute=e,this.mailingsService=o,this.router=l,this.backButton=y,this.notifySerice=T,this.editForm=new z({enabled:new v(!1),broadcasted:new v(null),name:new v(null,B.required),hours:new v(null,B.min(1)),calculateHours:new v(null),calculateDay:new v(null),message:new v(null,B.required),attachment:new v([],B.maxLength(10))})}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.mailingId=e.id,this.loadTariff(),this.backButton.getButton(`/marketing/mailings/view-before/${this.mailingId}`)})}loadTariff(){this.mailingsService.findBefore(this.mailingId).subscribe(e=>{this.mailing=e,this.editForm.patchValue(A(L({},e),{message:e.message.text,calculateHours:e.hours}))})}save(){let e=this.rowValue;this.editForm.controls.attachment.invalid?this.notifySerice.createNotification("notify_max_images"):this.editForm.controls.name.invalid?this.notifySerice.createNotification("notify__broadcast_name_is_required"):this.editForm.controls.message.invalid?this.notifySerice.createNotification("notify__broadcast_content_is_required"):e.hours?this.mailingsService.updateBefore(e,this.mailingId).subscribe(()=>{this.router.navigate(["/marketing/mailings/view-before/"+this.mailingId])}):this.notifySerice.createNotification("notify__broadcast_period_is_incorrect")}get rowValue(){return A(L({},this.editForm.getRawValue()),{message:{text:this.editForm.get("message").value,attachments:[...this.editForm.get("attachment").value].map(e=>e.id)},hours:this.editForm.controls.calculateDay.value?this.editForm.controls.calculateDay.value*24+this.editForm.controls.calculateHours.value:this.editForm.controls.calculateHours.value})}};a.\u0275fac=function(o){return new(o||a)(C(j),C(O),C(G),C(H),C(W))},a.\u0275cmp=x({type:a,selectors:[["ng-component"]],decls:38,vars:25,consts:[[1,"main",3,"ngSubmit","formGroup"],[1,"title-text"],["placeholder",""],[1,"down-description"],["placeholder","broadcasting_page__create_step_2_msg_text_input"],[1,"container-title"],[1,"container-white"],[1,"position-relative"],["type","number","placeholder","0","formControlName","calculateHours"],[1,"right"],[1,"line"],["type","number","placeholder","0","formControlName","calculateDay"],[1,"bottom"],[1,"down-button"],["type","submit"]],template:function(o,l){o&1&&(t(0,"form",0),g("ngSubmit",function(){return l.save()}),t(1,"div",1)(2,"h1"),s(3),d(4,"translatePaid"),n()(),c(5,"name",2),t(6,"div",3),s(7),d(8,"translatePaid"),n(),c(9,"media",4),t(10,"div",3),s(11),d(12,"translatePaid"),n(),t(13,"div",5)(14,"p"),s(15),d(16,"translatePaid"),n()(),t(17,"div",6)(18,"div",7),c(19,"input",8),t(20,"p",9),s(21),d(22,"translatePaid"),n()(),c(23,"div",10),t(24,"div",7),c(25,"input",11),t(26,"p",9),s(27),d(28,"translatePaid"),n()()(),t(29,"div",3),s(30),d(31,"translatePaid"),n(),t(32,"div",12),c(33,"alert-notify"),t(34,"div",13)(35,"button",14),s(36),d(37,"translatePaid"),n()()()()),o&2&&(u("formGroup",l.editForm),r(3),m(p(4,9,"broadcasting_page__after_end_subs_settings_menu_label")),r(4),h(" ",p(8,11,"broadcasting_page__create_step_2_name_sublabel")," "),r(4),h(" ",p(12,13,"broadcasting_page__create_step_2_msg_text_input_sublabel")," "),r(4),m(p(16,15,"broadcasting_page__before_payment_step_3_period_label")),r(6),h(" ",p(22,17,"broadcasting_page__before_payment_step_3_period_hours")," "),r(6),h(" ",p(28,19,"broadcasting_page__before_payment_step_3_period_days")," "),r(3),h(" ",p(31,21,"broadcasting_page__before_payment_step_3_period_sublabel")," "),r(6),h(" ",p(37,23,"save_button")," "))},dependencies:[$,J,Se,Q,R,K,ye,Z,X,Y,b],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{width:var(--width);font-size:15px}.main[_ngcontent-%COMP%]   .tariff[_ngcontent-%COMP%]{height:30px}"]});let i=a;return i})();var wi=(i,a)=>({start:i,end:a});function Si(i,a){if(i&1){let _=D();t(0,"div",0)(1,"div",1)(2,"h1"),s(3),n()(),t(4,"div",2)(5,"p"),s(6),d(7,"translatePaid"),n(),t(8,"div",3)(9,"label",4)(10,"input",5),g("change",function(){P(_);let o=f();return k(o.changeEnabled())}),n(),c(11,"span",6),n()()(),t(12,"p",7),s(13),d(14,"translatePaid"),n(),t(15,"div",8)(16,"p"),s(17),d(18,"translatePaid"),n()(),t(19,"div",2)(20,"p"),s(21),d(22,"translatePaid"),n(),t(23,"span",3),s(24),n()(),c(25,"p",9),t(26,"div",10)(27,"p"),s(28),d(29,"translatePaid"),n(),t(30,"span",3),M(),t(31,"svg",11),c(32,"path",12),n()()(),I(),c(33,"preview",13),t(34,"p",7),s(35),d(36,"translatePaid"),n(),c(37,"mailing-delete",14),n()}if(i&2){let _=f();r(3),m(_.mailing.name),r(3),m(p(7,14,"broadcasting_page__after_end_subs_page_enable_btn")),r(4),u("checked",_.mailing.enabled),r(3),h(" ",p(14,16,"broadcasting_page__after_end_subs_period_text")," "),r(4),m(p(18,18,"autowebinar_settings_page__stats_section")),r(4),m(p(22,20,"broadcasting_page__before_payment_broadcast_count_label")),r(3),m(_.mailing.broadcasted),r(),u("params",de(26,wi,_.getDate(_.mailing.created_date),_.getDate())),r(),ue("routerLink","../../view-after-setting/",_.mailingId,"/"),r(2),m(p(29,22,"broadcasting_page__before_payment_settings_label")),r(5),u("model",_.mailing),r(2),h(" ",p(36,24,"broadcasting_page__before_payment_preview_label")," "),r(2),u("id",_.mailingId)}}var Mt=(()=>{let a=class a{constructor(e,o){this.activatedRoute=e,this.mailingsService=o,this.backButton=E(H),this.getDate=Ze}ngOnInit(){this.backButton.getButton("/marketing/mailings"),this.activatedRoute.params.subscribe(e=>{this.mailingId=e.id,this.loadTariff()})}loadTariff(){this.mailingsService.findAfter(this.mailingId).subscribe(e=>{this.mailing=A(L({},e),{message:e.message_settings.text})})}changeEnabled(){this.mailing.enabled=!this.mailing.enabled,this.mailingsService.updateAfter(this.mailing,this.mailingId).subscribe()}};a.\u0275fac=function(o){return new(o||a)(C(j),C(O))},a.\u0275cmp=x({type:a,selectors:[["ng-component"]],decls:1,vars:1,consts:[[1,"main"],[1,"title-text"],[1,"container-white","position-relative"],[1,"right"],[1,"switch-mini"],["type","checkbox",1,"switch-input",3,"change","checked"],[1,"slider","round"],[1,"down-description"],[1,"container-title"],["translatePaid","broadcasting_page__after_end_subs_stats_broadcast_count_substring",1,"down-description",3,"params"],[1,"container-white","position-relative",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#3C3C43","fill-opacity","0.3"],[3,"model"],["mailingType","deleteAfter",3,"id"]],template:function(o,l){o&1&&w(0,Si,38,29,"div",0),o&2&&S(0,l.mailing?0:-1)},dependencies:[pe,q,_e,Oe,b],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{width:var(--width);font-size:15px}.main[_ngcontent-%COMP%]   .tariff[_ngcontent-%COMP%]{height:30px}"]});let i=a;return i})();var wt=(()=>{let a=class a{constructor(e,o,l,y,T,St){this.activatedRoute=e,this.mailingsService=o,this.tariffsService=l,this.router=y,this.backButton=T,this.notifySerice=St,this.editForm=new z({id:new v(null),name:new v(null,B.required),message:new v(null,B.required),attachment:new v([],B.maxLength(10)),tariffs:new v([]),enabled:new v(!1),broadcasted:new v(null),hours:new v(null,B.min(1)),calculateHours:new v(null),calculateDay:new v(null)})}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.mailingId=e.id,this.backButton.getButton(`/marketing/mailings/view-after/${this.mailingId}`),this.loadMailing()}),this.loadTariffs()}loadMailing(){this.mailingsService.findAfter(this.mailingId).subscribe(e=>{this.mailing=e,this.editForm.patchValue(A(L({},e),{message:e.message_settings.text}))})}loadTariffs(){this.tariffsService.tariff().subscribe(e=>{this.tariffs=e})}save(){this.editForm.controls.attachment.invalid?this.notifySerice.createNotification("notify_max_images"):this.editForm.controls.name.invalid?this.notifySerice.createNotification("notify__broadcast_name_is_required"):this.editForm.controls.message.invalid?this.notifySerice.createNotification("notify__broadcast_content_is_required"):this.editForm.controls.tariffs.value.length?this.mailingsService.updateAfter(A(L({},this.editForm.getRawValue()),{message:{text:this.editForm.get("message").value,attachments:this.editForm.get("attachment").value.map(e=>e.id)}}),this.mailingId).subscribe(()=>{this.router.navigate(["/marketing/mailings/view-after/"+this.mailingId])}):this.notifySerice.createNotification("notify__need_select_resource")}};a.\u0275fac=function(o){return new(o||a)(C(j),C(O),C(Me),C(G),C(H),C(W))},a.\u0275cmp=x({type:a,selectors:[["ng-component"]],decls:23,vars:16,consts:[[1,"main",2,"margin-bottom","60px",3,"ngSubmit","formGroup"],[1,"title-text"],["placeholder","\u0440\u0430\u0441\u0441\u044B\u043B\u043A\u0438"],[1,"down-description"],[1,"bottom"],[1,"down-button"],["type","submit"]],template:function(o,l){o&1&&(t(0,"form",0),g("ngSubmit",function(){return l.save()}),t(1,"div",1)(2,"h1"),s(3),d(4,"translatePaid"),n()(),c(5,"name",2),t(6,"p",3),s(7),d(8,"translatePaid"),n(),c(9,"media",2),t(10,"p",3),s(11),d(12,"translatePaid"),n(),c(13,"marketing-create-send-after"),t(14,"p",3),s(15),d(16,"translatePaid"),n(),t(17,"div",4),c(18,"alert-notify"),t(19,"div",5)(20,"button",6),s(21),d(22,"translatePaid"),n()()()()),o&2&&(u("formGroup",l.editForm),r(3),m(p(4,6,"broadcasting_page__before_payment_settings_menu_label")),r(4),h(" ",p(8,8,"broadcasting_page__before_payment_settings_menu_sublabel")," "),r(4),h(" ",p(12,10,"broadcasting_page__create_step_2_msg_text_input_sublabel")," "),r(4),h(" ",p(16,12,"broadcasting_page__after_end_subs_step_3_resources_sublabel")," "),r(6),h(" ",p(22,14,"save_button")," "))},dependencies:[$,R,K,Z,X,Y,Ie,b],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{width:var(--width);font-size:15px}.main[_ngcontent-%COMP%]   .tariff[_ngcontent-%COMP%]{height:30px}"]});let i=a;return i})();var ba=(()=>{let a=class a{};a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=je({type:a}),a.\u0275inj=Ne({providers:[b],imports:[$e.forChild([{path:"",component:tt},{path:"create",component:ut},{path:"view-before/:id",component:bt},{path:"view-before-setting/:id",component:xt},{path:"view-after/:id",component:Mt},{path:"view-after-setting/:id",component:wt},{path:"statistic/:id",component:ft}]),Je,Ye,He,Z,X,me,Qe,Be]});let i=a;return i})();export{ba as MailingsModule};
