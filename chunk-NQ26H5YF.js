import{a as dt,b as gt}from"./chunk-2EUJWTWE.js";import{a as U}from"./chunk-34GC5AH6.js";import{b as J}from"./chunk-PNNFWK47.js";import{a as It,b as pt,c as K,d as zt}from"./chunk-TKZ6F5IW.js";import{a as lt}from"./chunk-2USQMU67.js";import{n as jt,o as Nt}from"./chunk-KNFDVZSQ.js";import{c as Q,e as v,f as $,g as X,h as F,i as W,k as O,m as V,n as Dt,o as E,q as tt,r as Et,s as _t,u as Bt}from"./chunk-FZZ6HX5J.js";import{e as kt,f as Ft,g as Vt}from"./chunk-TRRUAURR.js";import{$a as y,Ab as G,Bb as vt,Cb as _,Db as d,Eb as Ct,Ia as M,Ka as h,Oa as rt,Ob as ct,Pa as B,Q as nt,Ra as P,Rb as wt,Sa as j,Ta as N,U as k,Ua as z,Va as o,Vb as bt,Wa as s,Wb as Tt,Xa as p,Z as b,_ as it,cb as C,db as g,fa as f,fc as st,ga as u,gb as ut,ha as T,hb as at,hc as Y,ia as L,ic as q,kc as St,lc as Z,oc as S,pb as l,qb as m,rb as x,sb as Ot,ua as ot,xa as c,ya as w,z as xt,zb as yt}from"./chunk-7AOOGZWM.js";import{a as D,b as A}from"./chunk-YHOLSLLF.js";var Xt=n=>({path:n}),te=n=>({"margin-bottom-100":n}),Gt=n=>({drop_date:n});function ee(n,r){n&1&&(o(0,"button",4),T(),o(1,"svg",7),p(2,"circle",8)(3,"rect",9)(4,"rect",10),s(),l(5),_(6,"translatePaid"),s()),n&2&&(c(5),x(" ",d(6,1,"admin_panel_tariffs_page__create_tariff")," "))}function ne(n,r){if(n&1&&(p(0,"p",13),_(1,"date")),n&2){let a=g().$implicit,t=g();h("params",G(4,Gt,Ct(1,1,t.getStableDate(a.drop_timestamp),"dd.MM.YYYY")))}}function ie(n,r){if(n&1&&(l(0),_(1,"translatePaid")),n&2){let a=g().$implicit;x(" ",d(1,1,a.display_option)," ")}}function oe(n,r){n&1&&(T(),o(0,"svg",15),p(1,"path",18),s())}function re(n,r){if(n&1&&(T(),o(0,"svg",16),p(1,"rect",19)(2,"rect",20)(3,"rect",21),s()),n&2){let a=g().$index;h("id",a),c(),h("id",a),c(),h("id",a),c(),h("id",a)}}function ae(n,r){if(n&1){let a=y();o(0,"div",11),C("click",function(){let e=f(a).$implicit,i=g();return u(i.roudeTariff(e))})("dragover",function(e){f(a);let i=g();return u(i.allowDrop(e))})("drop",function(e){f(a);let i=g();return u(i.drop(e))})("dragstart",function(e){f(a);let i=g();return u(i.drag(e))}),o(1,"div",12)(2,"p"),l(3),s(),o(4,"span"),M(5,ne,2,6,"p",13)(6,ie,2,3),s()(),o(7,"span",14),M(8,oe,2,0,":svg:svg",15)(9,re,4,4,":svg:svg",16),s()(),p(10,"div",17)}if(n&2){let a,t=r.$implicit,e=r.$index,i=g();B("card container-white m-7 ",i.editIndex===e?"tariff-edit":"",""),at("id","tariff-",e,""),h("draggable",(a=i.mode==="edit")!==null&&a!==void 0?a:!0),c(3),m(t.name),c(2),P(5,t.is_drop_marked?5:6),c(2),h("id",e),c(),P(8,i.mode!=="edit"?8:-1),c(),P(9,i.mode==="edit"?9:-1),c(),B("tariff ",i.editIndex===e?"tariff-edit-loyaut":"","")}}function ce(n,r){if(n&1){let a=y();o(0,"div",22),C("click",function(){f(a);let e=g();return u(e.edit())}),o(1,"p"),l(2),_(3,"translatePaid"),s(),o(4,"span",23),T(),o(5,"svg",24)(6,"g",25),p(7,"path",26)(8,"path",27)(9,"path",28)(10,"path",29),s(),o(11,"defs")(12,"clipPath",30),p(13,"path",31),s()()()()()}n&2&&(c(2),m(d(3,1,"admin_panel_tariffs_page__open_change_display_priority_menu")))}function se(n,r){if(n&1){let a=y();o(0,"div",6),p(1,"alert-notify"),o(2,"div",32)(3,"button",33),C("click",function(){f(a);let e=g();return u(e.savePosition())}),l(4),_(5,"translatePaid"),s()()()}n&2&&(c(4),x(" ",d(5,1,"save_button")," "))}function le(n,r){n&1&&(o(0,"div",6),p(1,"alert-notify"),s())}function pe(n,r){if(n&1){let a=y();o(0,"div",34),C("click",function(){f(a);let e=g();return u(e.closeDroppedTariff())}),s(),o(1,"div",35)(2,"span",36),C("click",function(){f(a);let e=g();return u(e.closeDroppedTariff())}),T(),o(3,"svg",37),p(4,"path",38),s()(),L(),o(5,"div",39),T(),o(6,"svg",40),p(7,"path",41),s()(),L(),o(8,"h1",42),l(9),_(10,"translatePaid"),s(),p(11,"p",43),_(12,"date"),o(13,"button",44),l(14),_(15,"translatePaid"),s()()}if(n&2){let a=g();c(9),m(d(10,3,"tariff_marked_as_drop")),c(2),h("params",G(10,Gt,Ct(12,5,a.droppedTariff.drop_timestamp,"dd.MM.YYYY"))),c(3),m(d(15,8,"tariff_cancel_drop"))}}var Ut=(()=>{let r=class r{constructor(){this.titles={noData:"admin_panel_tariffs_page__not_tariffs",data:"admin_panel_tariffs_page__your_tariffs",edit:"admin_panel_tariffs_page__open_change_display_priority_menu"},this.paragraph={noData:"admin_panel_tariffs_page__not_tariffs_substring",data:"admin_panel_tariffs_page__your_tariffs_substring",edit:"admin_panel_tariffs_page__change_display_priority_menu_label_substring"},this.images={noData:"assets/Enot web/enot_thinking.json",data:"assets/Enot web/enot_money.json",edit:"assets/Enot web/enot_money.json"},this.mode="noData",this.tariffs=[],this.tariffsCache=[],this.getdownWorking=!1,this.touchWorking=!1,this.tariffService=k(U),this.route=k(Y),this.backButton=k(Z)}ngOnInit(){this.backButton.getButton("/menu"),this.loadTariff()}loadTariff(){this.tariffService.tariff().subscribe(t=>{this.tariffs=t,this.sortByPosition(),t.length!==0&&(this.mode="data")})}getStableDate(t){return kt(t,!0)}sortByPosition(){this.tariffs.sort(function(t,e){return t.display_position-e.display_position})}touch(){window.scroll({top:0}),this.touchWorking=!0,this.tariffs.forEach((t,e)=>{let i=document.getElementById(this.getId(e));this.setCache(i,e),this.touchStart(i,e),this.touchMove(i),this.touchend(i,e)})}touchStart(t,e){t.addEventListener("touchstart",()=>{window.Telegram.WebApp.disableVerticalSwipes(),this.touchWorking&&(this.disableScroll(),this.editIndex=e)})}touchMove(t){t.addEventListener("touchmove",e=>{if(this.touchWorking){let i=e.targetTouches[0];t.style.top=i.pageY-260+"px",this.scrollSwipe(i.pageY,i.clientY)}})}scrollSwipe(t,e){window.innerHeight-30<e?this.getdownWorking||(this.getdownWorking=!0,this.getdown=setTimeout(()=>{window.scroll({top:t+1}),this.getdownWorking=!1},300)):50>e&&(this.getdownWorking||(this.getdownWorking=!0,this.getdown=setTimeout(()=>{window.scroll({top:t-100}),this.getdownWorking=!1},300)))}touchend(t,e){t.addEventListener("touchend",i=>{if(window.Telegram.WebApp.enableVerticalSwipes(),this.touchWorking){let I=i.changedTouches[0],Mt=this.getIndex(I.pageY);typeof Mt=="number"&&this.replacementTariff(e,Mt),t.style.top="0px",this.enableScroll(),this.editIndex=void 0}})}replacePosition(){this.sortByPosition(),this.tariffsCache=[],setTimeout(()=>{this.touch()},100)}replacementTariff(t,e){let i=D({},this.tariffs[t]),I=D({},this.tariffs[e]);this.update(A(D({},i),{display_position:I.display_position})),this.update(A(D({},I),{display_position:i.display_position})),this.tariffs[t].display_position=I.display_position,this.tariffs[e].display_position=i.display_position,this.replacePosition()}update(t){this.tariffService.update(t,t.id).subscribe()}setCache(t,e){let i=t.getBoundingClientRect();this.tariffsCache.push({index:e,pageY:i.y})}getIndex(t){for(let e=0;e<this.tariffsCache.length;e++)if(this.tariffsCache[e].pageY<=t&&this.tariffsCache[e].pageY+71>=t)return this.tariffsCache[e].index}getId(t){return`tariff-${t}`}disableScroll(){document.body.classList.add("remove-scrolling")}enableScroll(){document.body.classList.remove("remove-scrolling")}drop(t){t.preventDefault();var e=t.dataTransfer.getData("text").split("tariff-")[1];if(t.target.id){let i=this.tariffs[t.target.id].display_position,I=this.tariffs[e].display_position;this.tariffs[e].display_position=i,this.tariffs[t.target.id].display_position=I,this.update(this.tariffs[e]),this.update(this.tariffs[t.target.id]),this.sortByPosition()}}drag(t){t.dataTransfer.setData("text",t.target.id)}allowDrop(t){t.preventDefault()}edit(){this.mode="edit",this.touch()}savePosition(){this.mode="data",this.touchWorking=!1}roudeTariff(t){this.touchWorking||(t.is_drop_marked?this.droppedTariff=t:this.route.navigate([`/tariffs/view/${t.id}`]))}closeDroppedTariff(){this.droppedTariff=void 0}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b({type:r,selectors:[["ng-component"]],decls:18,vars:16,consts:[[1,"main"],[1,"title"],[3,"options"],[1,"tariffs",3,"ngClass"],["routerLink","create/",1,"create"],[1,"container-white","primary","position-relative"],[1,"bottom"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["cx","10","cy","10","r","10","fill","white"],["x","9","y","5","width","2","height","10","rx","1","fill","#007AFF"],["x","15","y","9","width","2","height","10","rx","1","transform","rotate(90 15 9)","fill","#007AFF"],[3,"click","dragover","drop","dragstart","draggable","id"],[1,"infos"],["translatePaid","admin_panel_tariffs_page__tariff_marked_drop",2,"color","red",3,"params"],[1,"right",3,"id"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["width","20","height","12","viewBox","0 0 20 12","fill","none","xmlns","http://www.w3.org/2000/svg",3,"id"],[2,"display","none"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m9 5 7 7-7 7"],["width","20","height","1.3","fill","#3C3C43","fill-opacity","0.3",3,"id"],["y","5.29999","width","20","height","1.3","fill","#3C3C43","fill-opacity","0.3",3,"id"],["y","10.6","width","20","height","1.3","fill","#3C3C43","fill-opacity","0.3",3,"id"],[1,"container-white","primary","position-relative",3,"click"],[1,"right"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["clip-path","url(#clip0_22_2173)"],["d","M6 6C6 6 8.25 3.75 12 3.75C17.25 3.75 20.25 9 20.25 9","stroke","#007AFF","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M18 18C18 18 15.75 20.25 12 20.25C6.75 20.25 3.75 15 3.75 15","stroke","#007AFF","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M15.75 9H20.25V4.5","stroke","#007AFF","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M8.25 15H3.75V19.5","stroke","#007AFF","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["id","clip0_22_2173"],["d","M0 10C0 4.47715 4.47715 0 10 0H14C19.5228 0 24 4.47715 24 10V24H0V10Z","fill","white"],[1,"down-button"],[1,"save",3,"click"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"image"],["width","18","height","26","viewBox","0 0 18 26","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M18 6.455V2C18 1.46957 17.7893 0.960859 17.4142 0.585786C17.0391 0.210714 16.5304 0 16 0H2C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2V6.5C0.000675612 6.81037 0.0732624 7.11636 0.212065 7.39397C0.350867 7.67157 0.552109 7.91324 0.8 8.1L7.33375 13L0.8 17.9C0.552109 18.0868 0.350867 18.3284 0.212065 18.606C0.0732624 18.8836 0.000675612 19.1896 0 19.5V24C0 24.5304 0.210714 25.0391 0.585786 25.4142C0.960859 25.7893 1.46957 26 2 26H16C16.5304 26 17.0391 25.7893 17.4142 25.4142C17.7893 25.0391 18 24.5304 18 24V19.545C17.9993 19.2358 17.9273 18.931 17.7896 18.6541C17.652 18.3773 17.4523 18.1359 17.2062 17.9487L10.6588 13L17.2062 8.05125C17.4523 7.86409 17.652 7.62271 17.7896 7.34587C17.9273 7.06903 17.9993 6.76418 18 6.455ZM16 19.545V24H2V19.5L8 15V18C8 18.2652 8.10536 18.5196 8.29289 18.7071C8.48043 18.8946 8.73478 19 9 19C9.26522 19 9.51957 18.8946 9.70711 18.7071C9.89464 18.5196 10 18.2652 10 18V15.01L16 19.545ZM16 6.455L15.2787 7H2.66625L2 6.5V2H16V6.455Z","fill","white"],[2,"width","70%"],["translatePaid","tariff_marked_as_drop_substring",2,"width","80%",3,"params"],[1,"container-white","primary"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1),p(2,"ng-lottie",2),o(3,"h1"),l(4),_(5,"translatePaid"),s(),o(6,"p"),l(7),_(8,"translatePaid"),s()(),o(9,"div",3)(10,"div"),M(11,ee,7,3,"button",4),N(12,ae,11,14,null,null,j),M(14,ce,14,3,"div",5),s()()(),M(15,se,6,3,"div",6)(16,le,2,0)(17,pe,16,12)),e&2&&(c(2),h("options",G(12,Xt,i.images[i.mode])),c(2),m(d(5,8,i.titles[i.mode])),c(3),m(d(8,10,i.paragraph[i.mode])),c(2),h("ngClass",G(14,te,i.mode==="edit")),c(2),P(11,i.mode!=="edit"?11:-1),c(),z(i.tariffs),c(2),P(14,i.tariffs.length>1&&i.mode!=="edit"?14:-1),c(),P(15,i.mode==="edit"?15:16),c(2),P(17,i.droppedTariff?17:-1))},dependencies:[q,ct,J,lt,K,bt,S],styles:[".main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-style:normal;font-weight:600;line-height:normal}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--down-text);text-align:center;font-size:13px;font-style:normal;font-weight:400;line-height:18px}.main[_ngcontent-%COMP%]   .tariffs[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;position:relative;height:100%;margin-bottom:30px}.main[_ngcontent-%COMP%]   .tariffs[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{width:calc(var(--width) + 23px);margin:8px 0}.main[_ngcontent-%COMP%]   .tariffs[_ngcontent-%COMP%]   .tariff[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:calc(var(--width) - 8px - 16px);background-color:#fff;height:45px;border-radius:10px;padding:var(--padding);margin:8px;position:relative}.main[_ngcontent-%COMP%]   .tariffs[_ngcontent-%COMP%]   .tariff[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{position:absolute;right:10px;top:0;bottom:0;display:flex;align-items:center;color:#3c3c434d}.main[_ngcontent-%COMP%]   .tariffs[_ngcontent-%COMP%]   .tariff[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:17px;font-style:normal;font-weight:400;width:90%;line-height:normal;letter-spacing:-.5px;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-moz-user-select:none}.main[_ngcontent-%COMP%]   .tariffs[_ngcontent-%COMP%]   .tariff[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--down-text);font-size:14px;font-style:normal;font-weight:400;line-height:18px;letter-spacing:-.2px;-webkit-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-moz-user-select:none}.main[_ngcontent-%COMP%]   .tariffs[_ngcontent-%COMP%]   .tariff-edit[_ngcontent-%COMP%]{position:absolute;z-index:100}.main[_ngcontent-%COMP%]   .tariffs[_ngcontent-%COMP%]   .tariff-edit-loyaut[_ngcontent-%COMP%]{display:flex!important}.image[_ngcontent-%COMP%]{padding:13px 20px;border-radius:19px;background:#f7931a;display:flex;align-items:center;justify-content:center}.infos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-weight:500;font-size:17px;line-height:19.92px}.infos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.save[_ngcontent-%COMP%]{-webkit-user-select:none;-ms-user-select:none;user-select:none}"]});let n=r;return n})();function _e(n,r){if(n&1&&(o(0,"form",0)(1,"div",1)(2,"div",2),p(3,"input",3),_(4,"translatePaid"),o(5,"span"),l(6),s()(),p(7,"span",4),o(8,"div",2),p(9,"textarea",5),_(10,"translatePaid"),s()()()),n&2){let a=g();h("formGroup",a.editForm),c(3),ut("placeholder",d(4,4,"admin_panel_tariffs_page__create__name")),c(3),m(a.maxLength),c(3),ut("placeholder",d(10,6,"admin_panel_tariffs_page__create_description"))}}var mt=(()=>{let r=class r{constructor(t){this.controlContainer=t,this.maxLength=32}ngOnInit(){this.editForm=this.controlContainer.control,this.editForm.get("name").valueChanges.subscribe(t=>{this.maxLength=32-t.length}),Vt(this.editForm,"description")}};r.\u0275fac=function(e){return new(e||r)(w($))},r.\u0275cmp=b({type:r,selectors:[["tariff-create-name"]],decls:1,vars:1,consts:[[1,"container",3,"formGroup"],[1,"name","container-white"],[1,"input"],["type","text","maxlength","32","formControlName","name",3,"placeholder"],[1,"line"],["formControlName","description","id","textarea","rows","5",3,"placeholder"]],template:function(e,i){e&1&&M(0,_e,11,8,"form",0),e&2&&P(0,i.editForm?0:-1)},dependencies:[V,Q,X,F,Et,E,tt,S],styles:[".main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:300px;text-align:center;font-size:24px;font-style:normal;font-weight:600;line-height:normal}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--down-text);text-align:center;font-size:13px;font-style:normal;font-weight:400;line-height:18px}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 10px;color:#000;font-size:17px;font-style:normal;font-weight:400;line-height:140%}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]{width:90%;display:flex;justify-content:center;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;position:relative}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{position:absolute;right:10px;top:0;bottom:0;display:flex;align-items:center;color:var(--primary)}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;width:100%;background:none;border:none;color:#000;font-size:17px;font-weight:400;letter-spacing:-.5px;padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#0000004d}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:0;top:0;align-items:center;display:flex;color:#000;text-align:right;font-size:17px;font-style:normal;font-weight:400;line-height:normal;letter-spacing:-.5px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]{padding:6px 8px;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{color:#8e8e93}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;margin-left:8px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#636366;font-size:13px;font-style:normal;font-weight:400;line-height:18px;width:var(--width);margin:20px 0 0 20px}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{color:var(--primary);display:flex;align-items:center;height:40px;font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px;width:40px;display:flex;justify-content:center}"]});let n=r;return n})();function de(n,r){n&1&&(l(0),_(1,"translatePaid")),n&2&&x(" ",d(1,1,"admin_panel_tariffs_page__create__months")," ")}function ge(n,r){n&1&&(l(0),_(1,"translatePaid")),n&2&&x(" ",d(1,1,"admin_panel_tariffs_page__create__days")," ")}function me(n,r){if(n&1&&(l(0),_(1,"translatePaid")),n&2){let a,t=g(2);x(" ",d(1,1,"admin_panel_tariffs_page__trial_period_"+((a=t.editForm.get("trial"))==null?null:a.value)+"_day")," ")}}function fe(n,r){n&1&&(l(0),_(1,"translatePaid")),n&2&&x(" ",d(1,1,"admin_panel_tariffs_page__create__disabled")," ")}function ue(n,r){if(n&1){let a=y();o(0,"form",0)(1,"div",1)(2,"div",2)(3,"p"),l(4),_(5,"translatePaid"),s()(),o(6,"div",3)(7,"div",4),p(8,"input",5),o(9,"p",6),l(10,"RUB"),s()(),p(11,"div",7),o(12,"div",4),p(13,"input",5),o(14,"p",6),l(15,"USD"),s()()(),o(16,"div",8)(17,"p"),l(18),_(19,"translatePaid"),s()(),o(20,"div",9)(21,"div"),p(22,"input",10),o(23,"p",6),M(24,de,2,3)(25,ge,2,3),s()(),p(26,"div",7),o(27,"div",11),C("click",function(){f(a);let e=g();return u(e.changeDayModal())}),o(28,"p"),l(29),_(30,"translatePaid"),s(),o(31,"p",6),M(32,me,2,3)(33,fe,2,3),o(34,"span"),p(35,"img",12),s()(),o(36,"div")(37,"span",13),C("click",function(){f(a);let e=g();return u(e.changeDay(1))}),l(38),_(39,"translatePaid"),s(),p(40,"span",14),o(41,"span",13),C("click",function(){f(a);let e=g();return u(e.changeDay(3))}),l(42),_(43,"translatePaid"),s(),p(44,"span",14),o(45,"span",13),C("click",function(){f(a);let e=g();return u(e.changeDay(7))}),l(46),_(47,"translatePaid"),s(),p(48,"span",14),o(49,"span",13),C("click",function(){f(a);let e=g();return u(e.changeDay(30))}),l(50),_(51,"translatePaid"),s(),p(52,"span",14),o(53,"span",13),C("click",function(){f(a);let e=g();return u(e.changeDay(void 0))}),l(54),_(55,"translatePaid"),s()()()(),o(56,"p",15),l(57),_(58,"translatePaid"),s()()()}if(n&2){let a,t=g();h("formGroup",t.editForm),c(4),m(d(5,17,"admin_panel_tariffs_page__create__price")),c(3),h("formGroup",t.editForm.get("price").controls[0]),c(5),h("formGroup",t.editForm.get("price").controls[1]),c(6),m(d(19,19,"admin_panel_tariffs_page__settings_duration")),c(6),P(24,t.editForm.get("is_recurrent").value?24:25),c(5),x(" ",d(30,21,"admin_panel_tariffs_page__create__trial_period")," "),c(3),P(32,(a=t.editForm.get("trial"))!=null&&a.value?32:33),c(4),B("dropup-content ",t.dayOpen?"dropup-active":"",""),c(2),m(d(39,23,"admin_panel_tariffs_page__trial_period_1_day")),c(4),m(d(43,25,"admin_panel_tariffs_page__trial_period_3_day")),c(4),m(d(47,27,"admin_panel_tariffs_page__trial_period_7_day")),c(4),m(d(51,29,"admin_panel_tariffs_page__trial_period_30_day")),c(4),m(d(55,31,"admin_panel_tariffs_page__trial_period_disabled")),c(3),m(d(58,33,"admin_panel_tariffs_page__create__duration_description"))}}var ft=(()=>{let r=class r{constructor(t){this.controlContainer=t,this.dayOpen=!1}ngOnInit(){this.editForm=this.controlContainer.control,this.editForm.get("duration").valueChanges.pipe(xt((t,e)=>e?(e<0?this.editForm.get("duration").setValue(this.prev):this.prev=e,!0):(this.editForm.get("duration").setValue(this.prev),!1))).subscribe()}changeDay(t){this.editForm.get("trial").setValue(t),this.editForm.get("trial").updateValueAndValidity()}changeDayModal(){this.dayOpen=!this.dayOpen}};r.\u0275fac=function(e){return new(e||r)(w($))},r.\u0275cmp=b({type:r,selectors:[["tariff-create-price-date"]],decls:1,vars:1,consts:[[1,"container",3,"formGroup"],[1,"price-date"],[1,"container-title",2,"margin-top","0"],[1,"price","container-white"],[1,"position-relative",3,"formGroup"],["type","number","placeholder","0","formControlName","amount"],[1,"right"],[1,"line"],[1,"container-title"],[1,"day","container-white"],["type","number","placeholder","\u0411\u0435\u0441\u0441\u0440\u043E\u0447\u043D\u043E","formControlName","duration"],[1,"dropup",3,"click"],["src","assets/images/Group 31.svg","alt","menu"],[1,"item",3,"click"],[1,"line-border"],[1,"down-description"]],template:function(e,i){e&1&&M(0,ue,59,35,"form",0),e&2&&P(0,i.editForm?0:-1)},dependencies:[V,Q,Dt,X,F,E,tt,S],styles:[".main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:300px;text-align:center;font-size:24px;font-style:normal;font-weight:600;line-height:normal}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--down-text);text-align:center;font-size:13px;font-style:normal;font-weight:400;line-height:18px}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 10px;color:#000;font-size:17px;font-style:normal;font-weight:400;line-height:140%}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]{width:90%;display:flex;justify-content:center;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;position:relative}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{position:absolute;right:10px;top:0;bottom:0;display:flex;align-items:center;color:var(--primary)}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;width:100%;background:none;border:none;color:#000;font-size:17px;font-weight:400;letter-spacing:-.5px;padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#0000004d}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:0;top:0;align-items:center;display:flex;color:#000;text-align:right;font-size:17px;font-style:normal;font-weight:400;line-height:normal;letter-spacing:-.5px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]{padding:6px 8px;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{color:#8e8e93}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;margin-left:8px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#636366;font-size:13px;font-style:normal;font-weight:400;line-height:18px;width:var(--width);margin:20px 0 0 20px}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{color:var(--primary);display:flex;align-items:center;height:40px;font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px;width:40px;display:flex;justify-content:center}"]});let n=r;return n})();function he(n,r){if(n&1){let a=y();o(0,"div",5)(1,"span",6),l(2),s(),o(3,"div",7)(4,"p"),l(5),s(),o(6,"span"),l(7,"\u041A\u0430\u043D\u0430\u043B"),s()(),o(8,"label",8)(9,"input",9),C("change",function(){let e=f(a).$implicit,i=g(2);return u(i.setResource(e.id))}),s(),p(10,"span",10),s()(),p(11,"div",11)}if(n&2){let a=r.$implicit;c(2),x(" ",a.name[0]," "),c(3),m(a.name)}}function Pe(n,r){if(n&1&&(o(0,"form",0)(1,"div",1)(2,"p",2),l(3),_(4,"translatePaid"),s(),o(5,"p",3),l(6),_(7,"translatePaid"),s(),o(8,"div",4),N(9,he,12,2,null,null,j),p(11,"resource-create"),s()()()),n&2){let a=g();c(3),m(d(4,2,"admin_panel_tariffs_page__select_resources_page_label_substring")),c(3),m(d(7,4,"admin_panel_tariffs_page__select_resources_page_label_substring_1")),c(3),z(a.resources)}}var Ht=(()=>{let r=class r{constructor(t){this.controlContainer=t,this.resourceService=k(dt),this.check=!1}ngOnInit(){this.editForm=this.controlContainer.control,this.loadResources()}loadResources(){this.resourceService.resources().subscribe(t=>{this.resources=t})}setResource(t){let e=this.editForm.get("resources").value,i=e.indexOf(t);i>-1?(e.splice(i,1),this.editForm.patchValue({resources:e})):this.editForm.patchValue({resources:[...e,t]})}};r.\u0275fac=function(e){return new(e||r)(w($))},r.\u0275cmp=b({type:r,selectors:[["tariff-create-resources"]],decls:1,vars:1,consts:[[1,"container"],[1,"resources"],[1,"paragraph",2,"margin","0 auto"],[1,"paragraph"],[1,"channels","container-white"],[1,"channel","card"],[1,"image"],[1,"infos"],[1,"switch","right"],["type","checkbox",1,"switch-input",3,"change"],[1,"slider","round"],[1,"line"]],template:function(e,i){e&1&&M(0,Pe,12,6,"form",0),e&2&&P(0,i.editForm?0:-1)},dependencies:[V,F,gt,S],styles:[".main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:300px;text-align:center;font-size:24px;font-style:normal;font-weight:600;line-height:normal}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--down-text);text-align:center;font-size:13px;font-style:normal;font-weight:400;line-height:18px}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 10px;color:#000;font-size:17px;font-style:normal;font-weight:400;line-height:140%}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]{width:90%;display:flex;justify-content:center;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;position:relative}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{position:absolute;right:10px;top:0;bottom:0;display:flex;align-items:center;color:var(--primary)}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;width:100%;background:none;border:none;color:#000;font-size:17px;font-weight:400;letter-spacing:-.5px;padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#0000004d}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:0;top:0;align-items:center;display:flex;color:#000;text-align:right;font-size:17px;font-style:normal;font-weight:400;line-height:normal;letter-spacing:-.5px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]{padding:6px 8px;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{color:#8e8e93}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;margin-left:8px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#636366;font-size:13px;font-style:normal;font-weight:400;line-height:18px;width:var(--width);margin:20px 0 0 20px}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{color:var(--primary);display:flex;align-items:center;height:40px;font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px;width:40px;display:flex;justify-content:center}"]});let n=r;return n})();function xe(n,r){n&1&&(o(0,"div",6),T(),o(1,"svg",8),p(2,"path",9),s()())}function Oe(n,r){n&1&&(o(0,"div",6),T(),o(1,"svg",8),p(2,"path",9),s()())}function ye(n,r){if(n&1){let a=y();o(0,"form",0)(1,"div",1)(2,"p",2),l(3),_(4,"translatePaid"),s(),o(5,"p",3),l(6),_(7,"translatePaid"),s(),o(8,"div",4)(9,"span",5),C("click",function(){f(a);let e=g();return u(e.changeRecurrent(!1))}),o(10,"p"),l(11),_(12,"translatePaid"),s(),M(13,xe,3,0,"div",6),s(),p(14,"div",7),o(15,"span",5),C("click",function(){f(a);let e=g();return u(e.changeRecurrent(!0))}),o(16,"p"),l(17),_(18,"translatePaid"),s(),M(19,Oe,3,0,"div",6),s()()()()}if(n&2){let a=g();h("formGroup",a.editForm),c(3),m(d(4,7,"admin_panel_tariffs_page__create__select_payments_type_one_payments_description")),c(3),m(d(7,9,"admin_panel_tariffs_page__create__select_payments_type_recurrent_payments_description")),c(5),m(d(12,11,"admin_panel_tariffs_page__create__select_payments_type_one_payments_button")),c(2),P(13,a.editForm.get("is_recurrent").value?-1:13),c(4),m(d(18,13,"admin_panel_tariffs_page__create__select_payments_type_recurrent_payments_button")),c(2),P(19,a.editForm.get("is_recurrent").value?19:-1)}}var Yt=(()=>{let r=class r{constructor(t){this.controlContainer=t}ngOnInit(){this.editForm=this.controlContainer.control}changeRecurrent(t){this.editForm.patchValue({is_recurrent:t})}};r.\u0275fac=function(e){return new(e||r)(w($))},r.\u0275cmp=b({type:r,selectors:[["tariff-create-recurrent"]],decls:1,vars:1,consts:[[1,"container",3,"formGroup"],[1,"recurrent"],[1,"paragraph"],[1,"paragraph",2,"margin-top","0","margin-bottom","25px"],[1,"select","container-white"],[3,"click"],[1,"selected"],[1,"line"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 11.917 9.724 16.5 19 7.5"]],template:function(e,i){e&1&&M(0,ye,20,15,"form",0),e&2&&P(0,i.editForm?0:-1)},dependencies:[V,F,E,S],styles:[".main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:300px;text-align:center;font-size:24px;font-style:normal;font-weight:600;line-height:normal}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--down-text);text-align:center;font-size:13px;font-style:normal;font-weight:400;line-height:18px}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 10px;color:#000;font-size:17px;font-style:normal;font-weight:400;line-height:140%}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]{width:90%;display:flex;justify-content:center;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;position:relative}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{position:absolute;right:10px;top:0;bottom:0;display:flex;align-items:center;color:var(--primary)}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;width:100%;background:none;border:none;color:#000;font-size:17px;font-weight:400;letter-spacing:-.5px;padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#0000004d}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:0;top:0;align-items:center;display:flex;color:#000;text-align:right;font-size:17px;font-style:normal;font-weight:400;line-height:normal;letter-spacing:-.5px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]{padding:6px 8px;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{color:#8e8e93}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;margin-left:8px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#636366;font-size:13px;font-style:normal;font-weight:400;line-height:18px;width:var(--width);margin:20px 0 0 20px}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{color:var(--primary);display:flex;align-items:center;height:40px;font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px;width:40px;display:flex;justify-content:center}"]});let n=r;return n})();var we=()=>({path:"assets/Enot web/enot_work.json"});function be(n,r){n&1&&p(0,"tariff-create-name")}function Te(n,r){n&1&&p(0,"tariff-create-recurrent")}function Se(n,r){n&1&&p(0,"tariff-create-price-date")}function ke(n,r){n&1&&p(0,"tariff-create-resources")}function Fe(n,r){n&1&&(l(0),_(1,"translatePaid")),n&2&&x(" ",d(1,1,"admin_panel_tariffs_page__save_button")," ")}function Ve(n,r){n&1&&l(0," \u0414\u0430\u043B\u0435\u0435 ")}var qt=(()=>{let r=class r{constructor(){this.titles={0:"admin_panel_tariffs_page__create__enter_name",1:"admin_panel_tariffs_page__create__enter_name",2:"admin_panel_tariffs_page__create__enter_price_and_duration_page_label",3:"admin_panel_tariffs_page__select_resources_page_label"},this.step=0,this.stepParams={of:"4",step:"1"},this.editForm=new W({name:new O(null,[v.required,v.minLength(1),v.maxLength(32)]),description:new O(null,[v.required,v.minLength(1)]),price:new _t([new W({currency:new O("RUB"),amount:new O(null)}),new W({currency:new O("USD"),amount:new O(null)})]),duration:new O(null),trial:new O(void 0),is_recurrent:new O(!1),resources:new O([])}),this.tariffService=k(U),this.router=k(Y),this.notifyService=k(pt),this.nextFuncs={0:()=>{this.editForm.controls.name.valid?this.editForm.controls.description.valid?(this.notifyService.deleteNotification(),this.step+=1):this.notifyService.createNotification("notify__error_min_tariff_description"):this.notifyService.createNotification("notify__error_min_tariff_name")},1:()=>{++this.step},2:()=>{if(this.rowValue.price.length){let{isNotStable:t,params:e}=this.pricetest();t.length?this.notifyService.createNotification(t,0,e):++this.step}else this.notifyService.createNotification("notify__error_tariff_price")},3:()=>{this.editForm.get("resources").value.length?this.tariffService.create(this.rowValue).subscribe(()=>{this.notifyService.createNotification("notify__tariff_created",It.success),this.router.navigate(["/tariffs"])}):this.notifyService.createNotification("notify__error_tariff_resources")}}}ngOnInit(){window?.Telegram?.WebApp?.onEvent("backButtonClicked",()=>this.backButton()),this.loadCurrency()}backButton(){this.step!==0?this.step-=1:this.router.navigate(["/tariffs"])}loadCurrency(){this.tariffService.minMaxCurrency().subscribe(t=>{this.minMaxCurrency=t,this.editForm.controls.price.controls[0].controls.amount.setValidators([v.min(t.RUB?.min),v.max(t.RUB?.max)]),this.editForm.controls.price.controls[1].controls.amount.setValidators([v.min(t.USD?.min),v.max(t.USD?.max)]),this.editForm.controls.price.controls[1].controls.amount.updateValueAndValidity(),this.editForm.controls.price.controls[0].controls.amount.updateValueAndValidity()})}next(){this.nextFuncs[this.step](),this.stepParams={of:"4",step:(this.step+1).toString()}}pricetest(){let t="",e={};return this.editForm.controls.price.controls.forEach(i=>{!t.length&&i.controls.amount.invalid&&(i.controls.amount.getError("min")?(t="notify__error_tariff_min_price",console.log(i.get("currency").value),e={currency:i.get("amount").value+this.getCurrency(i),min_price:i.controls.amount.getError("min").min+this.getCurrency(i)}):(e={currency:i.get("amount").value+this.getCurrency(i),max_price:i.controls.amount.getError("max").max+this.getCurrency(i)},console.log(i.get("currency").value),t="notify__error_tariff_max_price"))}),{isNotStable:t,params:e}}getCurrency(t){return" "+t.get("currency").value}get rowValue(){let t=A(D({},this.editForm.getRawValue()),{duration:this.editForm.get("duration").value??0,price:this.editForm.get("price").value.filter(e=>e.amount)});return t.trial||delete t.trial,t}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b({type:r,selectors:[["ng-component"]],decls:24,vars:18,consts:[[1,"main","m-7",2,"margin-bottom","100px"],[1,"title"],[3,"options"],[1,"body",3,"ngSubmit","formGroup"],[1,"bottom"],[1,"step-view"],["translatePaid","admin_panel_tariffs_page__create_step",3,"params"],[1,"indicator"],[1,"active"],[1,"down-button"],["type","submit"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1),p(2,"ng-lottie",2),o(3,"h1"),l(4),_(5,"translatePaid"),s()(),o(6,"form",3),C("ngSubmit",function(){return i.next()}),M(7,be,1,0,"tariff-create-name")(8,Te,1,0)(9,Se,1,0)(10,ke,1,0),o(11,"div",4),p(12,"alert-notify"),o(13,"div",5),p(14,"span",6),o(15,"div",7),p(16,"span",8)(17,"span")(18,"span")(19,"span"),s()(),o(20,"div",9)(21,"button",10),M(22,Fe,2,3)(23,Ve,1,0),s()()()()()),e&2&&(c(2),h("options",yt(17,we)),c(2),m(d(5,15,i.titles[i.step])),c(2),h("formGroup",i.editForm),c(),P(7,i.step===0?7:i.step===1?8:i.step===2?9:10),c(7),h("params",i.stepParams),c(3),rt(i.step>0?"active":""),c(),rt(i.step>1?"active":""),c(),rt(i.step>2?"active":""),c(3),P(22,i.step===3?22:23))},dependencies:[V,F,E,J,lt,K,mt,ft,Ht,Yt,S],styles:[".main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{max-width:300px;text-align:center;font-size:24px;font-style:normal;font-weight:600;line-height:normal}.main[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--down-text);text-align:center;font-size:13px;font-style:normal;font-weight:400;line-height:18px}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:15px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 10px;color:#000;font-size:17px;font-style:normal;font-weight:400;line-height:140%}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]{width:90%;display:flex;justify-content:center;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;position:relative}.container[_ngcontent-%COMP%]   .recurrent[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{position:absolute;right:10px;top:0;bottom:0;display:flex;align-items:center;color:var(--primary)}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;width:100%;background:none;border:none;color:#000;font-size:17px;font-weight:400;letter-spacing:-.5px;padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#0000004d}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#636366;font-size:14px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .rub[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .usd[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:0;top:0;align-items:center;display:flex;color:#000;text-align:right;font-size:17px;font-style:normal;font-weight:400;line-height:normal;letter-spacing:-.5px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:7px 9px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]{padding:6px 8px;display:flex;align-items:center}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{color:#8e8e93}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;margin-left:8px}.container[_ngcontent-%COMP%]   .price-date[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#636366;font-size:13px;font-style:normal;font-weight:400;line-height:18px;width:var(--width);margin:20px 0 0 20px}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{color:var(--primary);display:flex;align-items:center;height:40px;font-weight:500}.container[_ngcontent-%COMP%]   .resources[_ngcontent-%COMP%]   .channels[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px;width:40px;display:flex;justify-content:center}"]});let n=r;return n})();var ht=function(n){return n.tariff_display_option_disabled="tariff_display_option_disabled",n.tariff_display_options_only_for_url_access="tariff_display_options_only_for_url_access",n.tariff_display_options_only_for_selected_users="tariff_display_options_only_for_selected_users",n.tariff_display_option_not_prolong="tariff_display_option_not_prolong",n.tariff_display_option_for_subscribers="tariff_display_option_for_subscribers",n.tariff_display_option_for_all="tariff_display_option_for_all",n}(ht||{});function De(n,r){if(n&1&&p(0,"img",18),n&2){let a=g().$implicit;h("src",a.logo_url,ot)}}function Ee(n,r){if(n&1&&l(0),n&2){let a=g().$implicit;x(" ",a.name[0]," ")}}function Be(n,r){if(n&1){let a=y();o(0,"div",17)(1,"span"),M(2,De,1,1,"img",18)(3,Ee,1,1),s(),o(4,"div",19)(5,"p"),l(6),s(),o(7,"span"),l(8),s()(),o(9,"label",20)(10,"input",21),C("change",function(){let e=f(a).$implicit,i=g(2);return u(i.setResource(e.id))}),s(),p(11,"span",22),s()(),p(12,"div",23)}if(n&2){let a=r.$implicit,t=r.$index,e=g(2);c(),B("image ",e.getColour(t),""),c(),P(2,a.logo_url?2:3),c(4),m(a.name),c(2),m(a.type),c(2),h("checked",e.isChecked(a.id))}}function je(n,r){if(n&1){let a=y();o(0,"span",24),C("click",function(){let e=f(a).$implicit,i=g(2);return u(i.changeDisplayOptionValue(e))}),l(1),_(2,"translatePaid"),s(),p(3,"span",25)}if(n&2){let a=r.$implicit;c(),m(d(2,1,a))}}function Ne(n,r){if(n&1){let a=y();p(0,"div",23),o(1,"div",9),p(2,"input",26),o(3,"p",10),C("click",function(){f(a);let e=g(2);return u(e.changeUrlOpen())}),T(),o(4,"svg",27),p(5,"circle",28)(6,"circle",29)(7,"circle",30)(8,"circle",31),s()(),L(),o(9,"div")(10,"span",32),C("click",function(){f(a);let e=g(2);return u(e.copy())}),l(11),_(12,"translatePaid"),s(),p(13,"span",25),o(14,"span",32),C("click",function(){f(a);let e=g(2);return u(e.clearUrl())}),l(15),_(16,"translatePaid"),s()()()}if(n&2){let a=g(2);c(9),B("dropup-content ",a.urlOpen?"dropup-active":"",""),c(2),m(d(12,5,"admin_panel_tariffs_page__copy_url_button")),c(4),m(d(16,7,"admin_panel_tariffs_page__refresh_url"))}}function ze(n,r){if(n&1&&(p(0,"div",23),o(1,"div",33)(2,"p"),l(3),_(4,"translatePaid"),s(),o(5,"p",34),l(6),_(7,"translatePaid"),T(),o(8,"svg",35),p(9,"path",36),s()()()),n&2){let a=g(2);c(),at("routerLink","/tariffs/user-access/",a.tariffId,""),c(2),m(d(4,5,"admin_panel_tariffs_page__settings_page_exceptions")),c(3),Ot(" ",a.tariff.access_users_count," ",d(7,7,"admin_panel_tariffs_page__settings_page_exceptions_users1")," ")}}function Re(n,r){if(n&1){let a=y();o(0,"div",37),C("click",function(){f(a);let e=g(2);return u(e.changeDeleteAlert())}),s(),o(1,"div",38)(2,"span",39),C("click",function(){f(a);let e=g(2);return u(e.changeDeleteAlert())}),T(),o(3,"svg",40),p(4,"path",41),s()(),L(),o(5,"h1",42),l(6),_(7,"translatePaid"),s(),o(8,"p"),l(9),_(10,"translatePaid"),s(),o(11,"button",43),C("click",function(){f(a);let e=g(2);return u(e.deleteTariff())}),l(12),_(13,"translatePaid"),s(),o(14,"button",44),C("click",function(){f(a);let e=g(2);return u(e.changeDeleteAlert())}),l(15),_(16,"translatePaid"),s()()}n&2&&(h("@alertBackgroundAnimation",void 0),c(),h("@alertAnimation",void 0),c(5),m(d(7,6,"admin_panel_tariffs_page__settings_page_drop_tariff_label")),c(3),m(d(10,8,"admin_panel_tariffs_page__settings_page_drop_tariff_substring")),c(3),m(d(13,10,"admin_panel_tariffs_page__settings_page_drop_tariff")),c(3),m(d(16,12,"admin_panel_tariffs_page__settings_page_drop_tariff_substring_drop_cancel")))}function Ae(n,r){if(n&1){let a=y();o(0,"form",1),C("ngSubmit",function(){f(a);let e=g();return u(e.save())}),o(1,"div",2)(2,"span",3),l(3),_(4,"translatePaid"),s(),o(5,"span",4),l(6),s()(),p(7,"tariff-create-name"),o(8,"p",5),l(9),_(10,"translatePaid"),s(),p(11,"tariff-create-price-date"),o(12,"div",6)(13,"p"),l(14),_(15,"translatePaid"),s()(),o(16,"div",7),N(17,Be,13,7,null,null,j),o(19,"resource-create",8),C("loadResource",function(){f(a);let e=g();return u(e.loadResources())}),s()(),o(20,"p",5),l(21),_(22,"translatePaid"),s(),o(23,"div",6)(24,"p"),l(25),_(26,"translatePaid"),s()(),o(27,"div",7)(28,"div",9)(29,"p"),l(30),_(31,"translatePaid"),s(),o(32,"p",10),C("click",function(){f(a);let e=g();return u(e.changeDisplayOption())}),l(33),_(34,"translatePaid"),o(35,"span",11),p(36,"img",12),s()(),o(37,"div"),N(38,je,4,3,null,null,j),s()(),M(40,Ne,17,9)(41,ze,10,9),s(),o(42,"div",13),C("click",function(){f(a);let e=g();return u(e.changeDeleteAlert())}),l(43),_(44,"translatePaid"),s(),o(45,"div",14),p(46,"alert-notify"),o(47,"div",15)(48,"button",16),l(49),_(50,"translatePaid"),s()()(),M(51,Re,17,14),s()}if(n&2){let a=g();h("formGroup",a.editForm),c(3),m(d(4,16,"admin_panel_tariffs_page__settings_page_label")),c(3),x("ID ",a.tariffId,""),c(3),m(d(10,18,"admin_panel_tariffs_page__settings_page_name_and_description")),c(5),m(d(15,20,"admin_panel_tariffs_page__settings_page_connected_resources")),c(3),z(a.resources),c(4),m(d(22,22,"admin_panel_tariffs_page__settings_page_resources_connect_substring")),c(4),m(d(26,24,"admin_panel_tariffs_page__settings_page_display_option_label")),c(5),m(d(31,26,"admin_panel_tariffs_page__settings_page_display_option")),c(3),x(" ",d(34,28,a.editForm.get("display_option").value)," "),c(4),B("dropup-content ",a.displayOption?"dropup-active":"",""),c(),z(a.displayOptionNames),c(2),P(40,a.editForm.get("display_option").value==="tariff_display_options_only_for_url_access"?40:a.editForm.get("display_option").value==="tariff_display_options_only_for_selected_users"?41:-1),c(3),x(" ",d(44,30,"admin_panel_tariffs_page__settings_page_drop_tariff")," "),c(6),x(" ",d(50,32,"save_button")," "),c(2),P(51,a.deleteAlert?51:-1)}}var Zt=(()=>{let r=class r{constructor(t,e,i,I){this.route=t,this.router=e,this.backButton=i,this.notifyService=I,this.tariffService=k(U),this.resourceService=k(dt),this.getColour=Ft,this.displayOption=!1,this.urlOpen=!1,this.deleteAlert=!1,this.editForm=new W({name:new O(null,[v.required,v.minLength(1),v.maxLength(32)]),description:new O(null,v.required),access_url:new O(""),price:new _t([new W({currency:new O("RUB"),amount:new O(null)}),new W({currency:new O("USD"),amount:new O(null)})]),duration:new O(null),trial:new O(null),display_option:new O("tariff_display_options_only_for_selected_users"),is_recurrent:new O(!1),resources:new O([])}),this.displayOptionNames=Object.keys(ht)}ngOnInit(){this.backButton.getButton("/tariffs"),this.route.params.subscribe(t=>{this.tariffId=t.id,this.loadTariff()}),this.loadResources(),this.loadMinMaxCurrency()}loadTariff(){this.tariffService.detail(this.tariffId).subscribe(t=>{this.tariff=t,this.editForm.patchValue(A(D({},t),{duration:t.duration?.duration,trial:t.trial?.duration}))})}loadMinMaxCurrency(){this.tariffService.minMaxCurrency().subscribe(t=>{this.minMaxCurrency=t,this.editForm.controls.price.controls[0].controls.amount.setValidators([v.min(t.RUB?.min),v.max(t.RUB?.max)]),this.editForm.controls.price.controls[1].controls.amount.setValidators([v.min(t.USD?.min),v.max(t.USD?.max)]),this.editForm.controls.price.controls[1].controls.amount.updateValueAndValidity(),this.editForm.controls.price.controls[0].controls.amount.updateValueAndValidity()})}loadResources(){this.resourceService.resources().subscribe(t=>{this.resources=t})}changeUrlOpen(){this.urlOpen=!this.urlOpen}changeDisplayOptionValue(t){this.editForm.patchValue({display_option:t}),this.tariffService.update({display_option:t},this.tariffId).subscribe(e=>{e?.access_url&&this.editForm.controls.access_url.setValue(e.access_url)}),this.changeDisplayOption()}changeDisplayOption(){this.displayOption=!this.displayOption}isChecked(t){return this.editForm.get("resources").value.includes(t)}setResource(t){let e=this.editForm.get("resources").value,i=e.indexOf(t);i>-1?(e.splice(i,1),this.editForm.patchValue({resources:e})):this.editForm.patchValue({resources:[...e,t]})}save(){if(this.editForm.controls.name.invalid)this.notifyService.createNotification("notify__error_min_tariff_name");else if(this.editForm.controls.description.invalid)this.notifyService.createNotification("notify__error_min_tariff_description");else if(!this.editForm.get("resources").value.length)this.notifyService.createNotification("notify__error_tariff_resources");else{let t=this.rowValue;if(t.price.length){let{isNotStable:e,params:i}=this.pricetest();e.length?this.notifyService.createNotification(e,0,i):this.tariffService.update(t,this.tariffId).subscribe(()=>{this.router.navigate(["tariffs/"])})}else this.notifyService.createNotification("notify__error_tariff_price")}}pricetest(){let t="",e={};return this.editForm.controls.price.controls.forEach(i=>{!t.length&&i.controls.amount.invalid&&(i.controls.amount.getError("min")?(t="notify__error_tariff_min_price",console.log(i.get("currency").value),e={currency:i.get("amount").value+this.getCurrency(i),min_price:i.controls.amount.getError("min").min+this.getCurrency(i)}):(e={currency:i.get("amount").value+this.getCurrency(i),max_price:i.controls.amount.getError("max").max+this.getCurrency(i)},console.log(i.get("currency").value),t="notify__error_tariff_max_price"))}),{isNotStable:t,params:e}}getCurrency(t){return" "+t.get("currency").value}get rowValue(){let t=A(D({},this.editForm.getRawValue()),{duration:this.editForm.get("duration").value??0,price:this.editForm.get("price").value.filter(e=>e.amount)});return t.trial||delete t.trial,t}changeDeleteAlert(){this.deleteAlert=!this.deleteAlert}deleteTariff(){this.tariffService.delete(this.tariffId).subscribe(t=>{this.router.navigate(["tariffs/"])})}copy(){navigator.clipboard.writeText(this.editForm.controls.access_url.value),this.changeUrlOpen()}clearUrl(){this.editForm.controls.access_url.setValue(null),this.changeUrlOpen()}};r.\u0275fac=function(e){return new(e||r)(w(st),w(Y),w(Z),w(pt))},r.\u0275cmp=b({type:r,selectors:[["ng-component"]],decls:1,vars:1,consts:[["class","main","style","margin-bottom: 70px;","action","/action_page.php",3,"formGroup","ngSubmit",4,"ngIf"],["action","/action_page.php",1,"main",2,"margin-bottom","70px",3,"ngSubmit","formGroup"],[1,"title-text"],[1,"text"],[1,"id"],[1,"paragraph"],[1,"container-title"],[1,"container-white"],[3,"loadResource"],[1,"dropup"],[1,"right",3,"click"],[1,"margin-4"],["src","assets/images/Group 31.svg","alt","menu"],[1,"delete","container-white",2,"width","var(--width)","margin-top","20px",3,"click"],[1,"bottom"],[1,"down-button"],["type","submit"],[1,"card"],["alt","",3,"src"],[1,"infos"],[1,"switch","right"],["type","checkbox",1,"switch-input",3,"change","checked"],[1,"slider","round"],[1,"line"],[1,"item",3,"click"],[1,"line-border"],["type","text","placeholder","Url","formControlName","access_url",2,"width","80%"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["cx","12","cy","12","r","12","fill","#C4C4C7"],["cx","6","cy","12","r","2","fill","white"],["cx","12","cy","12","r","2","fill","white"],["cx","18","cy","12","r","2","fill","white"],[1,"item","primary",3,"click"],[1,"position-relative",3,"routerLink"],[1,"right",2,"right","5px"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","18","height","18","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m9 5 7 7-7 7"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[2,"line-height","30px"],[1,"delete","container-white",3,"click"],[1,"cancel","container-white","primary",3,"click"]],template:function(e,i){e&1&&M(0,Ae,52,34,"form",0),e&2&&h("ngIf",i.tariff)},dependencies:[q,V,Q,X,F,E,tt,wt,gt,K,mt,ft,S],styles:[".main[_ngcontent-%COMP%]   .paragraph[_ngcontent-%COMP%]{text-align:start;margin-top:10px}.main[_ngcontent-%COMP%]   .container-title[_ngcontent-%COMP%]{text-transform:uppercase;margin:12px 0}.main[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{position:relative;width:var(--width);margin-bottom:20px;display:flex;align-items:end}.main[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#000;font-size:20px;font-style:normal;font-weight:600;line-height:normal}.main[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{position:absolute;right:0;color:#636366;text-align:right;font-size:14px;font-style:normal;font-weight:400;line-height:normal}.main[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative}.main[_ngcontent-%COMP%]   .dropup[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{color:#8e8e93}.main[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{color:var(--primary);display:flex;align-items:center;height:40px;font-weight:500}.main[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-right:10px;width:40px;display:flex;justify-content:center}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}"],data:{animation:[jt,Nt]}});let n=r;return n})();var Le=(n,r)=>({routeUrl:n,page:"tariff_users_access_list",tariff_id:r}),Ge=n=>({"not-mobile":n}),Ue=n=>({active:n});function $e(n,r){if(n&1&&p(0,"img",9),n&2){let a=g().$implicit;h("src",a.logo_url,ot)}}function We(n,r){if(n&1&&(o(0,"div",12),l(1),s()),n&2){let a=g().$implicit;c(),x(" ",a.name[0]," ")}}function He(n,r){n&1&&p(0,"div",11)}function Ye(n,r){if(n&1){let a=y();o(0,"div",7)(1,"div",8),M(2,$e,1,1,"img",9)(3,We,2,1),o(4,"p"),l(5),s()(),o(6,"div",10),C("click",function(){let e=f(a).$implicit,i=g();return u(i.addedUser(e.telegram_id))}),l(7),_(8,"translatePaid"),s()(),M(9,He,1,0,"div",11)}if(n&2){let a=r.$implicit,t=r.$index,e=r.$count,i=g();h("id",a.telegram_id)("ngClass",G(9,Ge,!i.isMobile)),c(),h("ngClass",G(11,Ue,a.telegram_id===i.swipeUserId)),c(),P(2,a.logo_url?2:3),c(3),m(a.name),c(2),x(" ",d(8,7,"admin_panel_tariffs_page__user_exception_list__drop_user")," "),c(2),P(9,t!==e-1?9:-1)}}var Pt=(()=>{let r=class r{constructor(t,e,i){this.activatedRoute=t,this.tariffService=e,this.backButton=i,this.isMobile=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.tariffId=t.id,this.userId=t.user,this.backButton.getButton("tariffs/view/"+this.tariffId),this.userId?this.addedUser():this.loadUsers()}),this.checkDevice()}checkDevice(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this.isMobile=!0)}addedUser(t){t=t??this.userId,this.tariffService.changeAccessList(this.tariffId,t).subscribe(()=>{this.loadUsers()})}loadUsers(){this.tariffService.usersAccessList(this.tariffId).subscribe(t=>{this.users=t,this.subscribeUsers()})}subscribeUsers(){setTimeout(()=>{for(let t of this.users)document.getElementById(String(t.telegram_id)).addEventListener("scroll",e=>{this.handleSwipe(t.telegram_id)})},100)}handleSwipe(t){let i=document.getElementById(""+t);i.scrollLeft-i.clientWidth>-250&&(this.swipeUserId=t)}};r.\u0275fac=function(e){return new(e||r)(w(st),w(U),w(Z))},r.\u0275cmp=b({type:r,selectors:[["ng-component"]],decls:14,vars:10,consts:[[1,"main"],["routerLink","/users",1,"container-white","primary",2,"display","flex","align-items","center",3,"queryParams"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",2,"margin-right","15px"],["cx","12","cy","12","r","11.25","stroke","#007AFF","stroke-width","1.5"],["x","11.6","y","7.6","width","0.8001","height","8.8","rx","0.40005","stroke","#007AFF","stroke-width","0.8"],["x","16.4","y","11.6","width","0.8001","height","8.8","rx","0.40005","transform","rotate(90 16.4 11.6)","stroke","#007AFF","stroke-width","0.8"],[1,"container-white","users",2,"margin-top","15px"],[1,"swipe-container",3,"id","ngClass"],[1,"item",3,"ngClass"],["alt","",3,"src"],[1,"action",3,"click"],[1,"line"],[1,"img"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"h1"),l(2),_(3,"translatePaid"),s(),o(4,"div",1),T(),o(5,"svg",2),p(6,"circle",3)(7,"rect",4)(8,"rect",5),s(),l(9),_(10,"translatePaid"),s(),L(),o(11,"div",6),N(12,Ye,10,13,null,null,j),s()()),e&2&&(c(2),m(d(3,3,"admin_panel_tariffs_page__settings_page_exceptions")),c(2),h("queryParams",vt(7,Le,"/tariffs/user-access/"+i.tariffId,i.tariffId)),c(5),x(" ",d(10,5,"admin_panel_tariffs_page__user_exception_list__add_user")," "),c(3),z(i.users))},dependencies:[q,ct,S],styles:["h1[_ngcontent-%COMP%]{width:var(--width);margin-bottom:20px}.users[_ngcontent-%COMP%]{padding:0;overflow:hidden;width:calc(var(--width) + 24px)}.users[_ngcontent-%COMP%]   .swipe-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.users[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{margin-bottom:0;margin-top:0}.users[_ngcontent-%COMP%]   .swipe-container[_ngcontent-%COMP%]{display:flex;overflow-x:scroll;scroll-snap-type:x mandatory}.users[_ngcontent-%COMP%]   .swipe-container[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{min-width:60%!important;display:flex;align-items:center;justify-content:center}.users[_ngcontent-%COMP%]   .swipe-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:14px 16px;scroll-snap-align:start;display:flex;float:left;align-items:center;min-width:calc(100% - 28px)}.users[_ngcontent-%COMP%]   .swipe-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100px;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.users[_ngcontent-%COMP%]   .swipe-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .users[_ngcontent-%COMP%]   .swipe-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;margin-right:10px}.users[_ngcontent-%COMP%]   .swipe-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{background:linear-gradient(168deg,#6fd3fb 5.04%,#2c9ff0 91.24%);color:#fff;display:flex;justify-content:center;align-items:center}.users[_ngcontent-%COMP%]   .swipe-container[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{padding-left:14px;display:flex;align-items:center;min-width:100%;background-color:red;color:#fff;cursor:pointer}.users[_ngcontent-%COMP%]   .not-mobile[_ngcontent-%COMP%]{position:relative}.users[_ngcontent-%COMP%]   .not-mobile[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{position:absolute;right:0;width:100px;min-width:100px;background:none;height:100%;top:0;bottom:0;color:#2c9ff0;justify-content:center}"]});let n=r;return n})();var Jt=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=it({type:n}),n.\u0275inj=nt({}),n})();var ii=(()=>{let r=class r{};r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=it({type:r}),r.\u0275inj=nt({imports:[St.forChild([{path:"",component:Ut},{path:"create",component:qt},{path:"view/:id",component:Zt},{path:"user-access/:id",component:Pt},{path:"user-access/:id/:user",component:Pt}]),Bt,Tt,J,zt,Jt]});let n=r;return n})();export{ii as TariffModule};
