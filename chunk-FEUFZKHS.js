import{a as le}from"./chunk-DNOMEFTT.js";import{a as I}from"./chunk-7OFQO3HE.js";import{b as B,c as F,d as se}from"./chunk-QXDOXOUL.js";import"./chunk-F3ADXDIB.js";import{b as Y,e as N,g as ee,h as te,i as ie,k as G,l as ne,m as ue,o as re,t as oe,u as ae}from"./chunk-CTHILYG6.js";import{Aa as W,Ca as Z,D as h,E as g,F as b,G as C,Ga as v,Ha as E,O as o,P as S,T as y,V as w,Ya as z,aa as T,ab as J,cb as D,db as K,ea as e,fa as t,fb as Q,ga as l,gb as M,hb as X,ia as A,ja as c,jb as k,ka as d,q as O,r as H,t as f,ta as n,ua as p,v as x,va as _,w as U,ya as $,za as q}from"./chunk-OZNZNZBL.js";import{a as j,b as L}from"./chunk-DM275RSA.js";var P=(()=>{let u=class u{constructor(){this.http=f(z),this.resourceUrl=X("marketing/ab")}settings(){return this.http.get(`${this.resourceUrl}/getSettings`)}getData(r){return this.http.get(`${this.resourceUrl}/${r}`)}reset(r){return this.http.put(`${this.resourceUrl}/settings`,{reset:!0,state:r})}edit(r,i){return this.http.put(`${this.resourceUrl}/${r}`,i)}};u.\u0275fac=function(i){return new(i||u)},u.\u0275prov=O({token:u,factory:u.\u0275fac,providedIn:"root"});let a=u;return a})();function ge(a,u){if(a&1){let s=A();e(0,"div",1),c("click",function(){h(s);let i=d();return g(i.changeDeleteAlert())}),t(),e(1,"div",2)(2,"span",3),c("click",function(){h(s);let i=d();return g(i.changeDeleteAlert())}),b(),e(3,"svg",4),l(4,"path",5),t()(),C(),e(5,"h1"),n(6),v(7,"translatePaid"),t(),e(8,"p"),n(9),v(10,"translatePaid"),t(),e(11,"button",6),c("click",function(){h(s);let i=d();return g(i.resetAbTest())}),n(12),v(13,"translatePaid"),t(),e(14,"button",7),c("click",function(){h(s);let i=d();return g(i.changeDeleteAlert())}),n(15),v(16,"translatePaid"),t()()}a&2&&(o(6),p(E(7,4,"ab_tests__reset_page_label")),o(3),p(E(10,6,"ab_tests__reset_page_label_substring")),o(3),_("",E(13,8,"ab_tests__accept_reset")," "),o(3),_("",E(16,10,"ab_tests__cancel_reset")," "))}var me=(()=>{let u=class u{constructor(){this.openModal=!1}changeDeleteAlert(){this.openModal=!this.openModal}resetAbTest(){}};u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=x({type:u,selectors:[["ab-test-reset"]],standalone:!0,features:[Z],decls:4,vars:4,consts:[[1,"delete","container-white","margin-top",3,"click"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"delete","container-white",3,"click"],[1,"cancel","container-white","primary",3,"click"]],template:function(i,m){i&1&&(e(0,"button",0),c("click",function(){return m.changeDeleteAlert()}),n(1),v(2,"translatePaid"),t(),y(3,ge,17,12)),i&2&&(o(),_(" ",E(2,2,"ab_tests__reset_setting")," "),o(2),T(3,m.openModal?3:-1))},dependencies:[k],encapsulation:2});let a=u;return a})();function be(a,u){if(a&1){let s=A();e(0,"div",0)(1,"div",1)(2,"h1"),n(3),v(4,"translatePaid"),t()(),e(5,"p",2),n(6,"\u041C\u0435\u0442\u043E\u0434 \u043C\u0430\u0440\u043A\u0435\u0442\u0438\u043D\u0433\u043E\u0432\u043E\u0433\u043E \u0438\u0441\u0441\u043B\u0435\u0434\u043E\u0432\u0430\u043D\u0438\u044F, \u0441\u0443\u0442\u044C \u043A\u043E\u0442\u043E\u0440\u043E\u0433\u043E \u0437\u0430\u043A\u043B\u044E\u0447\u0430\u0435\u0442\u0441\u044F \u0432 \u0442\u043E\u043C, \u0447\u0442\u043E\u0431\u044B \u0441\u0440\u0430\u0432\u043D\u0438\u0442\u044C \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0440\u0430\u0437\u043B\u0438\u0447\u043D\u044B\u0445 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u043E\u0432 \u043F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u0438 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0438\u0437 \u043D\u0438\u0445 \u0431\u0443\u0434\u0435\u0442 \u0434\u0430\u0432\u0430\u0442\u044C \u043D\u0430\u0438\u0431\u043E\u043B\u044C\u0448\u0443\u044E \u043A\u043E\u043D\u0432\u0435\u0440\u0441\u0438\u044E \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0438"),t(),e(7,"div",3)(8,"p"),n(9,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u0410"),t()(),e(10,"div",4)(11,"div",5)(12,"p"),n(13,"\u0412\u0441\u0435\u0433\u043E \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u043E\u0432"),t(),e(14,"span",6),n(15),t()(),l(16,"div",7),e(17,"div",5)(18,"p"),n(19,"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043B\u0438 \u0431\u043E\u0442\u0430"),t(),e(20,"span",6),n(21),t()(),l(22,"div",7),e(23,"div",5)(24,"p"),n(25,"\u041A\u0443\u043F\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),t(),e(26,"span",6),n(27),t()(),l(28,"div",7),e(29,"div",5)(30,"p"),n(31,"\u0421R"),t(),e(32,"span",6),n(33),t()(),l(34,"div",7),e(35,"div",8)(36,"p"),n(37,"\u0414\u043E\u0445\u043E\u0434 \u0441 \u043F\u0440\u043E\u0434\u0430\u0436"),t(),e(38,"div",6)(39,"div"),n(40),t(),e(41,"div"),n(42),t()()(),l(43,"div",7),e(44,"div",9)(45,"p"),n(46,"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"),t(),e(47,"span",6),b(),e(48,"svg",10),l(49,"path",11),t()()()(),C(),e(50,"div",3)(51,"p"),n(52,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u0412"),t()(),e(53,"div",4)(54,"div",5)(55,"p"),n(56,"\u0412\u0441\u0435\u0433\u043E \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u043E\u0432"),t(),e(57,"span",6),n(58),t()(),l(59,"div",7),e(60,"div",5)(61,"p"),n(62,"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043B\u0438 \u0431\u043E\u0442\u0430"),t(),e(63,"span",6),n(64),t()(),l(65,"div",7),e(66,"div",5)(67,"p"),n(68,"\u041A\u0443\u043F\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),t(),e(69,"span",6),n(70),t()(),l(71,"div",7),e(72,"div",5)(73,"p"),n(74,"\u0421R"),t(),e(75,"span",6),n(76),t()(),l(77,"div",7),e(78,"div",8)(79,"p"),n(80,"\u0414\u043E\u0445\u043E\u0434 \u0441 \u043F\u0440\u043E\u0434\u0430\u0436"),t(),e(81,"div",6)(82,"div"),n(83),t(),e(84,"div"),n(85),t()()(),l(86,"div",7),e(87,"div",12)(88,"p"),n(89,"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"),t(),e(90,"span",6),b(),e(91,"svg",10),l(92,"path",11),t()()()(),C(),e(93,"div",13)(94,"p"),n(95,"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435"),t(),e(96,"div",6)(97,"label",14)(98,"input",15),W("ngModelChange",function(i){h(s);let m=d();return q(m.settings.settings.status,i)||(m.settings.settings.status=i),g(i)}),c("ngModelChange",function(){h(s);let i=d();return g(i.changeTest())}),t(),l(99,"span",16),t()()(),l(100,"ab-test-reset"),e(101,"div",17),l(102,"alert-notify"),t()()}if(a&2){let s=d();o(3),p(E(4,15,"marketing_page__ab_button")),o(12),p(s.settings.a.users_count),o(6),p(s.settings.a.users_blocked_count),o(6),p(s.settings.a.users_subscribed_count),o(6),p(s.settings.a.cr),o(7),_("",s.settings.a.currencyStats[0].amount," \u20BD"),o(2),_("",s.settings.a.currencyStats[1].amount," $"),o(16),p(s.settings.b.users_count),o(6),p(s.settings.b.users_blocked_count),o(6),p(s.settings.b.users_subscribed_count),o(6),p(s.settings.b.cr),o(7),_("",s.settings.b.currencyStats[0].amount," \u20BD"),o(2),_("",s.settings.b.currencyStats[1].amount," $"),o(13),w("disabled",s.disableSwitch),$("ngModel",s.settings.settings.status)}}function Ce(a,u){if(a&1){let s=A();e(0,"div",18),c("click",function(){h(s);let i=d();return g(i.changeDeleteModal())}),t(),e(1,"div",19)(2,"span",20),c("click",function(){h(s);let i=d();return g(i.changeDeleteModal())}),b(),e(3,"svg",21),l(4,"path",22),t()(),C(),e(5,"h1"),n(6,"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C A/B \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435?"),t(),e(7,"p"),n(8,"\u0412\u0441\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0431\u0435\u0437\u0432\u043E\u0437\u0432\u0440\u0430\u0442\u043D\u043E \u0443\u0434\u0430\u043B\u044F\u0442\u044C\u0441\u044F "),t(),e(9,"button",23),c("click",function(){h(s);let i=d();return g(i.reset())}),n(10,"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C A/B \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435"),t(),e(11,"button",24),c("click",function(){h(s);let i=d();return g(i.changeDeleteModal())}),n(12,"\u041E\u0442\u043C\u0435\u043D\u0430"),t()()}}var ce=(()=>{let u=class u{constructor(){this.abTestService=f(P),this.router=f(D),this.backButton=f(M),this.notifyService=f(B),this.disableSwitch=!1,this.deleteModal=!1}ngOnInit(){this.abTestService.settings().subscribe(r=>this.settings=r),this.backButton.getButton("/marketing/menu")}reset(){this.abTestService.reset(this.settings.settings.status).subscribe(()=>{this.router.navigate(["/marketing"]),this.changeDeleteModal()})}changeTest(){this.abTestService.reset(this.settings.settings.status).subscribe(r=>{Object.keys(r).includes("message_id")&&(this.disableSwitch=!0,this.settings.settings.status=!this.settings.settings.status,this.notifyService.createNotification(r.message_id))})}changeDeleteModal(){this.deleteModal=!this.deleteModal}};u.\u0275fac=function(i){return new(i||u)},u.\u0275cmp=x({type:u,selectors:[["ng-component"]],decls:2,vars:2,consts:[[1,"main"],[1,"title-text","text-center"],[1,"paragraph"],[1,"container-title"],[1,"container-white"],[1,"position-relative"],[1,"right"],[1,"line"],[1,"position-relative","big-right"],["routerLink","edit/a",1,"position-relative","primary"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#007AFF"],["routerLink","edit/b",1,"position-relative","primary"],[1,"container-white","margin-top","position-relative"],[1,"switch-mini"],["type","checkbox",1,"switch-input",3,"ngModelChange","disabled","ngModel"],[1,"slider","round"],[1,"bottom"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"delete","container-white",3,"click"],[1,"cancel","container-white","primary",3,"click"]],template:function(i,m){i&1&&y(0,be,103,17,"div",0)(1,Ce,13,0),i&2&&(T(0,m.settings?0:-1),o(),T(1,m.deleteModal?1:-1))},dependencies:[K,Y,ee,ne,F,me,k],styles:[".big-right[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center}.big-right[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-direction:column;align-items:end}.container-white[_ngcontent-%COMP%]{overflow:hidden}.right[_ngcontent-%COMP%]{color:#8e8e93}.margin-top[_ngcontent-%COMP%]{margin-top:20px}"]});let a=u;return a})();var de=(()=>{let u=class u{constructor(r,i,m,R,pe){this.activatedRoute=r,this.abTestService=i,this.router=m,this.backButton=R,this.notificationService=pe,this.editForm=new ie({message:new G(null,N.required),attachment:new G([],N.required)})}ngOnInit(){this.backButton.getButton("/marketing/ab-test"),this.activatedRoute.params.subscribe(r=>{this.type=r.type,this.loadData()})}loadData(){this.abTestService.getData(this.type).subscribe(r=>this.editForm.patchValue(L(j({},r),{attachment:[r.attachment]})))}save(){this.editForm.valid?this.abTestService.edit(this.type,L(j({},this.editForm.getRawValue()),{attachment:this.editForm.get("attachment").value[0].id})).subscribe(()=>{this.router.navigate(["/marketing/ab-test"])}):this.notificationService.createNotification(`notify__ab_message_${this.type}_required`)}};u.\u0275fac=function(i){return new(i||u)(S(J),S(P),S(D),S(M),S(B))},u.\u0275cmp=x({type:u,selectors:[["ng-component"]],decls:14,vars:9,consts:[[1,"main",3,"ngSubmit","formGroup"],[1,"title-text"],["placeholder","\u043F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044F",3,"unity"],[1,"down-description"],[3,"title","notHaveInput","form"],[1,"bottom"],[1,"down-button"],["type","submit"]],template:function(i,m){i&1&&(e(0,"form",0),c("ngSubmit",function(){return m.save()}),e(1,"div",1)(2,"h1"),n(3),t()(),l(4,"media",2),e(5,"p",3),n(6,"\u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435, \u043A\u043E\u0442\u043E\u0440\u043E\u0435 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044F \u043F\u0440\u0438 \u0437\u0430\u043F\u0443\u0441\u043A\u0435 \u0431\u043E\u0442\u0430"),t(),l(7,"preview",4),e(8,"div",5),l(9,"alert-notify"),e(10,"div",6)(11,"button",7),n(12),v(13,"translatePaid"),t()()()()),i&2&&(w("formGroup",m.editForm),o(3),_("\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u0430 ",m.type.toUpperCase(),""),o(),w("unity",!0),o(3),w("title",m.type.toUpperCase())("notHaveInput",!0)("form",m.editForm),o(5),_(" ",E(13,7,"save_button")," "))},dependencies:[I,ue,te,re,le,F,k],encapsulation:2});let a=u;return a})();var et=(()=>{let u=class u{};u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=U({type:u}),u.\u0275inj=H({imports:[Q.forChild([{path:"",component:ce},{path:"edit/:type",component:de}]),I,ae,oe,se]});let a=u;return a})();export{et as AbTestModule};
