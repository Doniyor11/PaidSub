import{a as gt}from"./chunk-3FBC6K3G.js";import{a as A}from"./chunk-SVFCUAVZ.js";import{a as T}from"./chunk-VSJ4LOTF.js";import{b as rt,c as st,d as wt}from"./chunk-YOG2K7P2.js";import"./chunk-5CAY3D4N.js";import{n as vt,o as bt}from"./chunk-KNFDVZSQ.js";import{c as ct,e as S,g as lt,h as mt,i as pt,k as v,m as dt,n as ut,o as ft,q as _t,u as ht}from"./chunk-S7DGSHZ6.js";import"./chunk-TRRUAURR.js";import{$a as V,Cb as l,Db as m,Ia as F,Ka as g,La as Q,Nb as tt,P as $,Pa as O,Q as G,Ra as P,Sa as Z,Ta as z,U as N,Ua as J,Va as o,Wa as r,Xa as d,Z as I,Zb as et,_ as q,aa as U,cb as h,db as x,fa as b,fc as D,ga as w,ha as B,hb as K,hc as it,ia as H,ic as nt,kc as ot,lb as W,lc as M,mb as X,mc as at,nb as Y,oc as y,pb as c,qb as p,rb as C,xa as s,ya as _}from"./chunk-ZB6I7ORA.js";import{a as R}from"./chunk-YHOLSLLF.js";var k=(()=>{let e=class e{constructor(){this.http=N(et)}resourceUrl(t){return at(`marketing/webinars/${t}/notifications`)}notifications(t){return this.http.get(this.resourceUrl(t))}detail(t,i){return this.http.get(`${this.resourceUrl(i)}/${t}`)}delete(t,i){return this.http.delete(`${this.resourceUrl(i)}/${t}`)}create(t,i){return this.http.post(this.resourceUrl(t),i)}update(t,i,a){return this.http.put(`${this.resourceUrl(t)}/${i}`,a)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ct=(()=>{let e=class e{transform(t){let i=Math.floor(t/24),a=t-Math.floor(t/24)*24;var f="\u0417\u0430 ";return i!==0&&(f+=i.toString()+" \u0434\u043D\u044F \u0438 "),f+=a.toString()+" \u0447\u0430\u0441\u0430 \u0434\u043E \u0441\u0442\u0430\u0440\u0442\u0430",f}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=U({name:"date",type:e,pure:!0});let n=e;return n})();function Ft(n,e){if(n&1&&(o(0,"div",6)(1,"div",7)(2,"p"),c(3),r(),o(4,"span"),c(5),l(6,"date"),r()(),o(7,"div",8),B(),o(8,"svg",9),d(9,"path",10),r()()()),n&2){let u=e.$implicit;K("routerLink","update/",u.id,""),s(3),p(u.message),s(2),p(m(6,4,u.before_start_hours))}}var yt=(()=>{let e=class e{constructor(t,i,a){this.activatedRoute=t,this.notificationService=i,this.backButton=a,this.mode="noData",this.titles={data:"autowebinar_settings_page__notification_settings",noData:"autowebinar_not_notifications"},this.description={data:"autowebinars_page_not_autowebinars_your_webinars_sublabel",noData:"autowebinar_not_notifications_sublabel"}}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.webinarId=t["webinar-id"],this.loadNotification(),this.backButton.getButton(`/marketing/webinar/view/${this.webinarId}`)})}loadNotification(){this.notificationService.notifications(this.webinarId).subscribe(t=>{this.notifications=t,t.length>0?this.mode="data":this.mode="noData"})}};e.\u0275fac=function(i){return new(i||e)(_(D),_(k),_(M))},e.\u0275cmp=I({type:e,selectors:[["ng-component"]],decls:17,vars:12,consts:[[1,"title"],["routerLink","create/",1,"create"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["cx","10","cy","10","r","10","fill","white"],["x","9","y","5","width","2","height","10","rx","1","fill","#007AFF"],["x","15","y","9","width","2","height","10","rx","1","transform","rotate(90 15 9)","fill","#007AFF"],[1,"container-white","card","m-4",3,"routerLink"],[1,"infos"],[1,"right"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#3C3C43","fill-opacity","0.3"]],template:function(i,a){i&1&&(o(0,"div")(1,"div",0)(2,"h1"),c(3),l(4,"translatePaid"),r(),o(5,"p"),c(6),l(7,"translatePaid"),r()(),o(8,"div",1),B(),o(9,"svg",2),d(10,"circle",3)(11,"rect",4)(12,"rect",5),r(),c(13),l(14,"translatePaid"),r(),z(15,Ft,10,6,"div",6,Z),r()),i&2&&(O("main m-7 ",a.mode,""),s(3),p(m(4,6,a.titles[a.mode])),s(3),p(m(7,8,a.description[a.mode])),s(7),C(" ",m(14,10,"autowebinar_create_notification_page_label")," "),s(2),J(a.notifications))},dependencies:[nt,y,Ct],styles:[".create[_ngcontent-%COMP%]{width:var(--width)!important}"]});let n=e;return n})();function Pt(n,e){if(n&1){let u=V();o(0,"div",1),h("click",function(){b(u);let i=x();return w(i.changeModal())}),r(),o(1,"div",2)(2,"span",3),h("click",function(){b(u);let i=x();return w(i.changeModal())}),B(),o(3,"svg",4),d(4,"path",5),r()(),H(),o(5,"h1"),c(6,"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435?"),r(),o(7,"p"),c(8),l(9,"translatePaid"),r(),o(10,"button",0),h("click",function(){b(u);let i=x();return w(i.deleteNotification())}),c(11),l(12,"translatePaid"),r(),o(13,"button",6),h("click",function(){b(u);let i=x();return w(i.changeModal())}),c(14),l(15,"translatePaid"),r()()}n&2&&(g("@alertBackgroundAnimation",void 0),s(),g("@alertAnimation",void 0),s(7),p(m(9,5,"admin_panel_tariffs_page__settings_page_drop_tariff_substring")),s(3),p(m(12,7,"autowebinar_notifications_drop")),s(3),p(m(15,9,"subscribers_page__search_cancel")))}var St=(()=>{let e=class e{constructor(){this.close=!1,this.router=N(it),this.notificationService=N(k)}changeModal(){this.close=!this.close}deleteNotification(){this.notificationService.delete(this.notificationId,this.webinarId).subscribe(()=>{this.router.navigate(["/marketing/notification/"+this.webinarId])})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=I({type:e,selectors:[["notification-delete"]],inputs:{notificationId:"notificationId",webinarId:"webinarId"},decls:4,vars:4,consts:[["type","button",1,"delete","container-white",3,"click"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],["type","button",1,"cancel","container-white","primary",3,"click"]],template:function(i,a){i&1&&(o(0,"button",0),h("click",function(){return a.changeModal()}),c(1),l(2,"translatePaid"),r(),F(3,Pt,16,11)),i&2&&(s(),p(m(2,2,"autowebinar_notifications_drop")),s(2),P(3,a.close?3:-1))},dependencies:[y],encapsulation:2,data:{animation:[vt,bt]}});let n=e;return n})();var Vt=["media"];function Dt(n,e){if(n&1&&d(0,"notification-delete",15),n&2){let u=x();g("webinarId",u.webinarId)("notificationId",u.notificationId)}}function Mt(n,e){n&1&&(c(0),l(1,"translatePaid")),n&2&&C(" ",m(1,1,"broadcasting_page__before_payment_step_3_ok")," ")}function Tt(n,e){n&1&&(c(0),l(1,"translatePaid")),n&2&&C(" ",m(1,1,"save_button")," ")}var j=(()=>{let e=class e{constructor(t,i,a,f,L){this.activatedRoute=t,this.notificationService=i,this.backButton=a,this._location=f,this.notificationAlertService=L,this.editForm=new pt({name:new v(null,S.required),before_start_minutes:new v(0),message:new v(null,[S.required,S.minLength(1),S.maxLength(32)]),attachment:new v([],S.required),day:new v(0),hours:new v(0),minuts:new v(0)}),this.mode="create",this.titles={update:"autowebinar_notifications_settings_page_label",create:"autowebinar_create_notification_page_label"}}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.webinarId=t["webinar-id"],this.backButton.getButton(`/marketing/notification/${this.webinarId}`),t.id&&(this.notificationId=t.id,this.loadNotification())})}loadNotification(){this.notificationService.detail(this.notificationId,this.webinarId).subscribe(t=>{this.notification=t,this.editForm.patchValue(R({},t)),this.media.loadImages(),this.mode="update"})}save(){console.log(this.rowValue.before_start_minutes),this.editForm.controls.name.invalid?this.notificationAlertService.createNotification("notify__autowebinar_notification_name_is_required"):this.editForm.controls.message.invalid?this.notificationAlertService.createNotification("notify__autowebinar_notification_message_is_required"):this.rowValue.before_start_minutes?this[this.mode]():this.notificationAlertService.createNotification("notify__autowebinar_notification_send_time_is_required")}create(){this.notificationService.create(this.webinarId,this.rowValue).subscribe(()=>{this._location.back()})}update(){this.notificationService.update(this.webinarId,this.notificationId,this.rowValue).subscribe(()=>{this._location.back()})}get rowValue(){return{before_start_minutes:this.beforeStartHours,message:this.editForm.get("message").value,attachment:this.images,name:this.editForm.get("name").value}}get images(){return this.editForm.get("attachment").value.map(t=>t.id)}get beforeStartHours(){let t=0;return t+=typeof this.editForm.controls.minuts.value=="number"?this.editForm.controls.minuts.value:0,t+=typeof this.editForm.controls.hours.value=="number"?this.editForm.controls.hours.value*60:0,t+=typeof this.editForm.controls.day.value=="number"?this.editForm.controls.day.value*24*60:0,t}};e.\u0275fac=function(i){return new(i||e)(_(D),_(k),_(M),_(tt),_(rt))},e.\u0275cmp=I({type:e,selectors:[["ng-component"]],viewQuery:function(i,a){if(i&1&&W(Vt,5),i&2){let f;X(f=Y())&&(a.media=f.first)}},decls:47,vars:30,consts:[["media",""],[1,"main",3,"ngSubmit","formGroup"],[1,"title-text"],["placeholder","autowebinar_notifications_name_textbox"],[1,"down-description"],["placeholder","autowebinar_notifications_message_textbox","messageControlName","message"],[1,"container-title"],[1,"container-white"],[1,"position-relative"],["type","number","placeholder","0","formControlName","day"],[1,"right"],[1,"line"],["type","number","placeholder","0","formControlName","hours"],["type","number","placeholder","0","formControlName","minuts"],["title","\u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435",3,"form"],[3,"webinarId","notificationId"],[1,"bottom"],[1,"down-button"],["type","submit"]],template:function(i,a){if(i&1){let f=V();o(0,"form",1),h("ngSubmit",function(){return b(f),w(a.save())}),o(1,"div",2)(2,"h1"),c(3),l(4,"translatePaid"),r()(),d(5,"name",3),o(6,"p",4),c(7),l(8,"translatePaid"),r(),d(9,"media",5,0),o(11,"p",4),c(12),l(13,"translatePaid"),r(),o(14,"div",6)(15,"p"),c(16),l(17,"translatePaid"),r()(),o(18,"div",7)(19,"div",8),d(20,"input",9),o(21,"p",10),c(22),l(23,"translatePaid"),r()(),d(24,"div",11),o(25,"div",8),d(26,"input",12),o(27,"p",10),c(28),l(29,"translatePaid"),r()(),d(30,"div",11),o(31,"div",8),d(32,"input",13),o(33,"p",10),c(34),l(35,"translatePaid"),r()()(),o(36,"p",4),c(37),l(38,"translatePaid"),r(),d(39,"preview",14),F(40,Dt,1,2,"notification-delete",15),o(41,"div",16),d(42,"alert-notify"),o(43,"div",17)(44,"button",18),F(45,Mt,2,3)(46,Tt,2,3),r()()()()}i&2&&(Q("margin-bottom","70px"),g("formGroup",a.editForm),s(3),p(m(4,14,a.titles[a.mode])),s(4),C(" ",m(8,16,"broadcasting_page__before_payment_settings_menu_sublabel")," "),s(5),p(m(13,18,"broadcasting_page__create_step_2_msg_text_input_sublabel")),s(4),p(m(17,20,"autowebinar_notifications_send_message_period_section")),s(6),p(m(23,22,"day_2")),s(6),p(m(29,24,"autowebinar_notifications_send_message_period_hours")),s(6),p(m(35,26,"autowebinar_notifications_send_message_period_minutes")),s(3),C(" ",m(38,28,"autowebinar_notifications_send_message_period_section_sublabel")," "),s(2),g("form",a.editForm),s(),P(40,a.notificationId?40:-1),s(5),P(45,a.mode==="create"?45:46))},dependencies:[dt,ct,ut,lt,mt,ft,_t,T,A,gt,st,St,y],encapsulation:2});let n=e;return n})();var be=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=q({type:e}),e.\u0275inj=G({imports:[ot.forChild([{path:":webinar-id",component:yt},{path:":webinar-id/create",component:j},{path:":webinar-id/update/:id",component:j}]),ht,T,A,wt]});let n=e;return n})();export{be as NotificationModule};
