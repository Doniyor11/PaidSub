import{a as d}from"./chunk-INW2X4BE.js";import{A as m,B as g,D as M,E as y,F,H as N,I as O,J as S,K as b,L as a,M as l,N as c,O as L,P as C,Q as s,R as P,ba as E,g as f,j as u,ja as I,l as v,s as _,t as x,u as p,v as h,xa as k,z as w}from"./chunk-SV3MNOEM.js";var T=(()=>{let e=class e{constructor(){this.http=u(I),this.resourceUrl=d("marketing/uploadMedia")}create(i){return this.http.post(this.resourceUrl,i)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();function D(o,e){if(o&1){let r=L();a(0,"div",9)(1,"div",10),C("click",function(){let t=_(r).$implicit,n=s(2);return x(n.deleteMedia(t))}),p(),a(2,"svg",11),c(3,"circle",12)(4,"rect",13)(5,"rect",14),l()(),h(),c(6,"img",15),l()}if(o&2){let r=e.$implicit,i=s(2);m(6),y("src",i.imgUrl+r,w)("alt",r)}}function B(o,e){if(o&1&&(c(0,"div",7),a(1,"div",8),S(2,D,7,2,"div",9,O),l()),o&2){let r=s();m(2),b(r.editForm.get(r.attachmentControlName).value)}}var J=(()=>{let e=class e{constructor(i,t){this.controlContainer=i,this.mediaService=t,this.attachmentControlName="attachment",this.container=!0,this.imgUrl=d("marketing/media/")}ngOnInit(){this.editForm=this.controlContainer.control,this.editForm.valueChanges.subscribe(i=>console.log(i))}sendMedia(i){let t=new FormData;for(let n of i.target.files)t.append("media",n);console.log(typeof i.target.files),this.mediaService.create(t).subscribe(n=>{this.editForm.get(this.attachmentControlName).setValue([...this.editForm.get(this.attachmentControlName).value,...n])})}deleteMedia(i){let t=this.editForm.get(this.attachmentControlName).value,n=t.indexOf(i);t.splice(n,1),this.editForm.get(this.attachmentControlName).setValue(t)}};e.\u0275fac=function(t){return new(t||e)(g(k),g(T))},e.\u0275cmp=v({type:e,selectors:[["media"]],inputs:{messageControlName:"messageControlName",attachmentControlName:"attachmentControlName",placeholder:"placeholder",container:"container"},standalone:!0,features:[E],decls:9,vars:6,consts:[[1,"position-relative"],["type","text",3,"placeholder"],["for","upload-media"],[1,"right"],["xmlns","http://www.w3.org/2000/svg","width","28","height","28","viewBox","0 0 28 28","fill","none"],["d","M21.0811 16.096L15.7931 21.384C13.2589 23.9182 9.15018 23.9182 6.616 21.384C4.08181 18.8498 4.08181 14.7411 6.616 12.2069L13.7341 5.08883C15.4248 3.39808 18.1661 3.39808 19.8568 5.08883C21.5476 6.77957 21.5476 9.5208 19.8568 11.2115L12.5145 18.5539C11.7201 19.3483 10.4322 19.3483 9.63779 18.5539C8.84342 17.7595 8.84342 16.4716 9.63779 15.6772L15.1501 10.1649C15.43 9.88501 15.43 9.43115 15.1501 9.15122C14.8701 8.87129 14.4163 8.87129 14.1363 9.15122L8.62407 14.6635C7.26983 16.0177 7.26983 18.2134 8.62407 19.5676C9.9783 20.9219 12.174 20.9219 13.5282 19.5676L20.8705 12.2253C23.1211 9.97466 23.1211 6.32571 20.8705 4.0751C18.6199 1.82449 14.971 1.82449 12.7204 4.0751L5.60227 11.1932C2.50822 14.2872 2.50822 19.3037 5.60227 22.3977C8.69632 25.4918 13.7128 25.4918 16.8068 22.3977L22.0948 17.1097C22.3748 16.8298 22.3748 16.3759 22.0948 16.096C21.8149 15.8161 21.361 15.8161 21.0811 16.096Z","fill","#858E99"],["type","file","multiple","","id","upload-media","accept","image/*,video/*",3,"change"],[1,"line"],[1,"images"],[1,"image"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 16 16","fill","none"],["cx","8","cy","8","r","7.5","fill","#3C3C43","fill-opacity","0.3","stroke","white"],["x","4.79297","y","4","width","10.4","height","1.12","rx","0.56","transform","rotate(45 4.79297 4)","fill","white"],["x","12.1465","y","4.79199","width","10.4","height","1.12","rx","0.56","transform","rotate(135 12.1465 4.79199)","fill","white"],[3,"src","alt"]],template:function(t,n){t&1&&(a(0,"div")(1,"div",0),c(2,"input",1),a(3,"label",2)(4,"span",3),p(),a(5,"svg",4),c(6,"path",5),l()()(),h(),a(7,"input",6),C("change",function(j){return n.sendMedia(j)}),l()(),M(8,B,4,0),l()),t&2&&(F(n.container?"container-white":""),m(2),P("placeholder","\u0422\u0435\u043A\u0441\u0442 ",n.placeholder,""),m(6),N(8,n.editForm.get(n.attachmentControlName).value&&n.editForm.get(n.attachmentControlName).value.length>0?8:-1))},styles:[".images[_ngcontent-%COMP%]{display:flex;gap:8px}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;height:70px;width:70px}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;object-fit:cover;border-radius:5px}.images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;right:4px;top:4px}#upload-media[_ngcontent-%COMP%]{display:none}"]});let o=e;return o})();export{J as a};
