import{a as nt}from"./chunk-P4BPVPMO.js";import{a as B}from"./chunk-5YCIQWUV.js";import{b as k,d as J,i as K,j as Q,k as X,m as V,n as Y,o as tt,q as et,v as it,w as ut}from"./chunk-RB3RWHFI.js";import{a as F}from"./chunk-QA46ANKF.js";import{Aa as H,D as g,E as h,F as C,G as _,Ga as S,Ha as w,O as a,P as x,T as O,V as b,Ya as $,aa as A,ab as W,cb as D,db as Z,ea as t,fa as e,fb as q,ga as l,gb as z,ia as I,ja as d,ka as p,q as L,r as R,t as v,ta as i,ua as c,v as f,va as E,w as G,ya as N,za as U}from"./chunk-HZLB4OZN.js";import{a as M,b as T}from"./chunk-DM275RSA.js";var y=(()=>{let n=class n{constructor(){this.http=v($),this.resourceUrl=z("marketing/ab")}settings(){return this.http.get(`${this.resourceUrl}/getSettings`)}getData(r){return this.http.get(`${this.resourceUrl}/${r}`)}reset(r){return this.http.put(`${this.resourceUrl}/settings`,{reset:!0,state:r})}edit(r,u){return this.http.put(`${this.resourceUrl}/${r}`,u)}};n.\u0275fac=function(u){return new(u||n)},n.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"});let s=n;return s})();function ct(s,n){if(s&1){let o=I();t(0,"div",0)(1,"div",1)(2,"h1"),i(3),S(4,"translatePaid"),e()(),t(5,"p",2),i(6,"\u041C\u0435\u0442\u043E\u0434 \u043C\u0430\u0440\u043A\u0435\u0442\u0438\u043D\u0433\u043E\u0432\u043E\u0433\u043E \u0438\u0441\u0441\u043B\u0435\u0434\u043E\u0432\u0430\u043D\u0438\u044F, \u0441\u0443\u0442\u044C \u043A\u043E\u0442\u043E\u0440\u043E\u0433\u043E \u0437\u0430\u043A\u043B\u044E\u0447\u0430\u0435\u0442\u0441\u044F \u0432 \u0442\u043E\u043C, \u0447\u0442\u043E\u0431\u044B \u0441\u0440\u0430\u0432\u043D\u0438\u0442\u044C \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0440\u0430\u0437\u043B\u0438\u0447\u043D\u044B\u0445 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u043E\u0432 \u043F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0433\u043E \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F \u0438 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442\u044C, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0438\u0437 \u043D\u0438\u0445 \u0431\u0443\u0434\u0435\u0442 \u0434\u0430\u0432\u0430\u0442\u044C \u043D\u0430\u0438\u0431\u043E\u043B\u044C\u0448\u0443\u044E \u043A\u043E\u043D\u0432\u0435\u0440\u0441\u0438\u044E \u0432 \u043F\u0440\u043E\u0434\u0430\u0436\u0438"),e(),t(7,"div",3)(8,"p"),i(9,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u0410"),e()(),t(10,"div",4)(11,"div",5)(12,"p"),i(13,"\u0412\u0441\u0435\u0433\u043E \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u043E\u0432"),e(),t(14,"span",6),i(15),e()(),l(16,"div",7),t(17,"div",5)(18,"p"),i(19,"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043B\u0438 \u0431\u043E\u0442\u0430"),e(),t(20,"span",6),i(21),e()(),l(22,"div",7),t(23,"div",5)(24,"p"),i(25,"\u041A\u0443\u043F\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),e(),t(26,"span",6),i(27),e()(),l(28,"div",7),t(29,"div",5)(30,"p"),i(31,"\u0421R"),e(),t(32,"span",6),i(33),e()(),l(34,"div",7),t(35,"div",8)(36,"p"),i(37,"\u0414\u043E\u0445\u043E\u0434 \u0441 \u043F\u0440\u043E\u0434\u0430\u0436"),e(),t(38,"div",6)(39,"div"),i(40),e(),t(41,"div"),i(42),e()()(),l(43,"div",7),t(44,"div",9)(45,"p"),i(46,"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"),e(),t(47,"span",6),C(),t(48,"svg",10),l(49,"path",11),e()()()(),_(),t(50,"div",3)(51,"p"),i(52,"\u0412\u0430\u0440\u0438\u0430\u043D\u0442 \u0412"),e()(),t(53,"div",4)(54,"div",5)(55,"p"),i(56,"\u0412\u0441\u0435\u0433\u043E \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u043E\u0432"),e(),t(57,"span",6),i(58),e()(),l(59,"div",7),t(60,"div",5)(61,"p"),i(62,"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043B\u0438 \u0431\u043E\u0442\u0430"),e(),t(63,"span",6),i(64),e()(),l(65,"div",7),t(66,"div",5)(67,"p"),i(68,"\u041A\u0443\u043F\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),e(),t(69,"span",6),i(70),e()(),l(71,"div",7),t(72,"div",5)(73,"p"),i(74,"\u0421R"),e(),t(75,"span",6),i(76),e()(),l(77,"div",7),t(78,"div",8)(79,"p"),i(80,"\u0414\u043E\u0445\u043E\u0434 \u0441 \u043F\u0440\u043E\u0434\u0430\u0436"),e(),t(81,"div",6)(82,"div"),i(83),e(),t(84,"div"),i(85),e()()(),l(86,"div",7),t(87,"div",12)(88,"p"),i(89,"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"),e(),t(90,"span",6),C(),t(91,"svg",10),l(92,"path",11),e()()()(),_(),t(93,"div",13)(94,"p"),i(95,"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435"),e(),t(96,"div",6)(97,"label",14)(98,"input",15),H("ngModelChange",function(u){g(o);let m=p();return U(m.settings.settings.status,u)||(m.settings.settings.status=u),h(u)}),d("ngModelChange",function(){g(o);let u=p();return h(u.changeTest())}),e(),l(99,"span",16),e()()(),t(100,"button",17),d("click",function(){g(o);let u=p();return h(u.reset())}),i(101," \u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C "),e()()}if(s&2){let o=p();a(3),c(w(4,14,"marketing_page__ab_button")),a(12),c(o.settings.a.users_count),a(6),c(o.settings.a.users_blocked_count),a(6),c(o.settings.a.users_subscribed_count),a(6),c(o.settings.a.cr),a(7),E("",o.settings.a.currencyStats[0].amount," \u20BD"),a(2),E("",o.settings.a.currencyStats[1].amount," $"),a(16),c(o.settings.b.users_count),a(6),c(o.settings.b.users_blocked_count),a(6),c(o.settings.b.users_subscribed_count),a(6),c(o.settings.b.cr),a(7),E("",o.settings.b.currencyStats[0].amount," \u20BD"),a(2),E("",o.settings.b.currencyStats[1].amount," $"),a(13),N("ngModel",o.settings.settings.status)}}function dt(s,n){if(s&1){let o=I();t(0,"div",18),d("click",function(){g(o);let u=p();return h(u.changeDeleteModal())}),e(),t(1,"div",19)(2,"span",20),d("click",function(){g(o);let u=p();return h(u.changeDeleteModal())}),C(),t(3,"svg",21),l(4,"path",22),e()(),_(),t(5,"h1"),i(6,"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C A/B \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435?"),e(),t(7,"p"),i(8,"\u0412\u0441\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0431\u0435\u0437\u0432\u043E\u0437\u0432\u0440\u0430\u0442\u043D\u043E \u0443\u0434\u0430\u043B\u044F\u0442\u044C\u0441\u044F "),e(),t(9,"button",23),d("click",function(){g(o);let u=p();return h(u.reset())}),i(10,"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C A/B \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435"),e(),t(11,"button",24),d("click",function(){g(o);let u=p();return h(u.changeDeleteModal())}),i(12,"\u041E\u0442\u043C\u0435\u043D\u0430"),e()()}}var rt=(()=>{let n=class n{constructor(){this.abTestService=v(y),this.router=v(D),this.backButton=v(F),this.deleteModal=!1}ngOnInit(){this.abTestService.settings().subscribe(r=>this.settings=r),this.backButton.getButton("/marketing/menu")}reset(){this.abTestService.reset(this.settings.settings.status).subscribe(()=>{this.router.navigate(["/marketing"]),this.changeDeleteModal()})}changeTest(){this.abTestService.reset(this.settings.settings.status).subscribe()}changeDeleteModal(){this.deleteModal=!this.deleteModal}};n.\u0275fac=function(u){return new(u||n)},n.\u0275cmp=f({type:n,selectors:[["ng-component"]],decls:2,vars:2,consts:[[1,"main"],[1,"title-text","text-center"],[1,"paragraph"],[1,"container-title"],[1,"container-white"],[1,"position-relative"],[1,"right"],[1,"line"],[1,"position-relative","big-right"],["routerLink","edit/a",1,"position-relative","primary"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#007AFF"],["routerLink","edit/b",1,"position-relative","primary"],[1,"container-white","margin-top","position-relative"],[1,"switch"],["type","checkbox",1,"switch-input",3,"ngModelChange","ngModel"],[1,"slider","round"],[1,"delete","container-white","margin-top",3,"click"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"delete","container-white",3,"click"],[1,"cancel","container-white","primary",3,"click"]],template:function(u,m){u&1&&O(0,ct,102,16,"div",0)(1,dt,13,0),u&2&&(A(0,m.settings?0:-1),a(),A(1,m.deleteModal?1:-1))},dependencies:[Z,J,K,Y,k],styles:[".big-right[_ngcontent-%COMP%]{height:40px;display:flex;align-items:center}.big-right[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-direction:column;align-items:end}.container-white[_ngcontent-%COMP%]{overflow:hidden}.right[_ngcontent-%COMP%]{color:#8e8e93}.margin-top[_ngcontent-%COMP%]{margin-top:20px}"]});let s=n;return s})();var ot=(()=>{let n=class n{constructor(r,u,m,j){this.activatedRoute=r,this.abTestService=u,this.router=m,this.backButton=j,this.editForm=new X({message:new V(null),attachment:new V([])})}ngOnInit(){this.backButton.getButton("/marketing/ab-test"),this.activatedRoute.params.subscribe(r=>{this.type=r.type,this.loadData()})}loadData(){this.abTestService.getData(this.type).subscribe(r=>this.editForm.patchValue(T(M({},r),{attachment:[r.attachment]})))}save(){this.editForm.get("attachment").value?.length&&this.abTestService.edit(this.type,T(M({},this.editForm.getRawValue()),{attachment:this.editForm.get("attachment").value[0].id})).subscribe(()=>{this.router.navigate(["../../"])})}};n.\u0275fac=function(u){return new(u||n)(x(W),x(y),x(D),x(F))},n.\u0275cmp=f({type:n,selectors:[["ng-component"]],decls:12,vars:9,consts:[[1,"main",3,"ngSubmit","formGroup"],[1,"title-text"],["placeholder","\u043F\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044F",3,"unity"],[1,"down-description"],[3,"title","notHaveInput","form"],[1,"down-button"],["type","submit"]],template:function(u,m){u&1&&(t(0,"form",0),d("ngSubmit",function(){return m.save()}),t(1,"div",1)(2,"h1"),i(3),e()(),l(4,"media",2),t(5,"p",3),i(6,"\u0421\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435, \u043A\u043E\u0442\u043E\u0440\u043E\u0435 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044F \u043F\u0440\u0438 \u0437\u0430\u043F\u0443\u0441\u043A\u0435 \u0431\u043E\u0442\u0430"),e(),l(7,"preview",4),t(8,"div",5)(9,"button",6),i(10),S(11,"translatePaid"),e()()()),u&2&&(b("formGroup",m.editForm),a(3),E("\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u0430 ",m.type.toUpperCase(),""),a(),b("unity",!0),a(3),b("title",m.type.toUpperCase())("notHaveInput",!0)("form",m.editForm),a(3),E(" ",w(11,7,"save_button")," "))},dependencies:[B,tt,Q,et,nt,k],encapsulation:2});let s=n;return s})();var Rt=(()=>{let n=class n{};n.\u0275fac=function(u){return new(u||n)},n.\u0275mod=G({type:n}),n.\u0275inj=R({imports:[q.forChild([{path:"",component:rt},{path:"edit/:type",component:ot}]),B,ut,it]});let s=n;return s})();export{Rt as AbTestModule};
