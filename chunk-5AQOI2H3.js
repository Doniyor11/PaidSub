import{a as gt}from"./chunk-MAAQSTPP.js";import{a as G,b as N,d as M}from"./chunk-Q2HNSVUD.js";import{a as Q}from"./chunk-BZWCVSEU.js";import{b as j}from"./chunk-PQFS2QVL.js";import{c as lt,e as A,g as ct,h as mt,i as pt,k as $,m as dt,o as ht,q as _t,t as vt,u as ft}from"./chunk-Z66TR4HV.js";import{a as V}from"./chunk-XSXLIR7R.js";import{$a as y,D,Da as ut,E as F,F as f,G as k,O as r,P as v,T,V as C,Va as ot,Xa as at,Z as I,_ as Y,aa as P,ba as tt,bb as R,ca as et,cb as L,da as it,ea as e,eb as rt,fa as i,fb as st,ga as l,ia as nt,ja as g,ka as x,na as B,pa as E,q as K,qa as b,r as W,ra as S,t as _,ta as a,ua as c,v as d,va as O,w as X,wa as U}from"./chunk-JKYKRWW6.js";import{a as H,b as Z,f as J}from"./chunk-DM275RSA.js";var h=(()=>{let o=class o{constructor(){this.http=_(at),this.resourceUrl=st("marketing/utm")}utms(){return this.http.get(this.resourceUrl)}create(t){return this.http.post(this.resourceUrl,t)}detail(t,n){return this.http.get(`${this.resourceUrl}/${n}/stats/${t}`)}periods(t){return this.http.get(`${this.resourceUrl}/${t}/period_stats`)}delete(t){return this.http.delete(`${this.resourceUrl}/${t}`)}};o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=K({token:o,factory:o.\u0275fac,providedIn:"root"});let s=o;return s})();var Dt=s=>({path:s});function Ft(s,o){if(s&1&&(e(0,"div",7)(1,"div",8)(2,"p"),a(3),i(),e(4,"span"),a(5),i()(),e(6,"span",9),f(),e(7,"svg",10),l(8,"path",11),i()()()),s&2){let m=o.$implicit;B("routerLink","view/",m.created_at,"/",m.utm,""),r(3),c(m.name),r(2),O("\u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440: ",m.utm,"")}}var Ct=(()=>{let o=class o{constructor(){this.utmService=_(h),this.backButton=_(V),this.titles={data:"\u0412\u0430\u0448\u0438 UTM-\u043C\u0435\u0442\u043A\u0438",noData:"UTM-\u043C\u0435\u0442\u043E\u043A \u043F\u043E\u043A\u0430 \u043D\u0435\u0442\u0443.."},this.description={data:"UTM-\u043C\u0435\u0442\u043A\u0438 \u044D\u0442\u043E \u0442\u0435\u0433\u0438, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u0432\u043F\u0438\u0441\u044B\u0432\u0430\u044E\u0442\u0441\u044F \u0432 \u0441\u0441\u044B\u043B\u043A\u0443. \u041E\u043D\u0438 \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u044E\u0442 \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0432 \u0430\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0435 \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u0443\u044E \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043E \u043A\u0430\u0436\u0434\u043E\u043C \u0438\u0441\u0442\u043E\u0447\u043D\u0438\u043A\u0435 \u0442\u0440\u0430\u0444\u0438\u043A\u0430.",noData:"\u0427\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E, \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \u043D\u0430 \u043A\u043D\u043E\u043F\u043A\u0443 \u043D\u0438\u0436\u0435"},this.images={noData:"assets/Enot web/enot_thinking.json",data:"assets/Enot web/enot_business.json"},this.mode="noData"}ngOnInit(){this.backButton.getButton("/marketing/menu"),this.utmService.utms().subscribe(t=>{this.utms=t,t.length>0&&(this.mode="data")})}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=d({type:o,selectors:[["ng-component"]],decls:15,vars:8,consts:[[1,"title"],["height","300px","width","300px",3,"options"],["routerLink","create/",1,"create"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["cx","10","cy","10","r","10","fill","white"],["x","9","y","5","width","2","height","10","rx","1","fill","#007AFF"],["x","15","y","9","width","2","height","10","rx","1","transform","rotate(90 15 9)","fill","#007AFF"],[1,"container-white","card","m-4",3,"routerLink"],[1,"infos"],[1,"right"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#3C3C43","fill-opacity","0.3"]],template:function(n,u){n&1&&(e(0,"div")(1,"div",0),l(2,"ng-lottie",1),e(3,"h1"),a(4),i(),e(5,"p"),a(6),i()(),e(7,"button",2),f(),e(8,"svg",3),l(9,"circle",4)(10,"rect",5)(11,"rect",6),i(),a(12," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0442\u0430\u0440\u0438\u0444 "),i(),et(13,Ft,9,5,"div",7,tt),i()),n&2&&(Y("main ",u.mode,""),r(2),C("options",ut(6,Dt,u.images[u.mode])),r(2),c(u.titles[u.mode]),r(2),c(u.description[u.mode]),r(7),it(u.utms))},dependencies:[L,j],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.main[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{width:calc(var(--width) + 20px)}"]});let s=o;return s})();var xt=(()=>{let o=class o{constructor(){this.utmService=_(h),this.router=_(R),this.editForm=new pt({name:new $("",[A.required,A.minLength(1),A.maxLength(32)]),label:new $("",[A.required])})}save(){this.utmService.create(this.editForm.getRawValue()).subscribe(()=>{this.router.navigate(["/marketing/utm"])})}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=d({type:o,selectors:[["ng-component"]],decls:14,vars:2,consts:[[1,"main",3,"ngSubmit","formGroup"],[1,"title-text"],[1,"container-white"],["placeholder","UTM",3,"container"],[1,"line"],[1,"position-relative"],["type","text","formControlName","label","placeholder","\u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440"],[1,"down-description"],[1,"down-button"],["type","submit"]],template:function(n,u){n&1&&(e(0,"form",0),g("ngSubmit",function(){return u.save()}),e(1,"div",1)(2,"h1"),a(3,"\u041D\u043E\u0432\u0430\u044F UTM-\u043C\u0435\u0442\u043A\u0430"),i()(),e(4,"div",2),l(5,"name",3)(6,"div",4),e(7,"div",5),l(8,"input",6),i()(),e(9,"p",7),a(10," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440 UTM-\u043C\u0435\u0442\u043A\u0438 (\u043E\u043D \u0431\u0443\u0434\u0435\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C\u0441\u044F \u0432 \u0432\u0430\u0448\u0435\u0439 \u0441\u0441\u044B\u043B\u043A\u0435) "),i(),e(11,"div",8)(12,"button",9),a(13," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),i()()()),n&2&&(C("formGroup",u.editForm),r(5),C("container",!1))},dependencies:[dt,lt,ct,mt,ht,_t,Q],encapsulation:2});let s=o;return s})();function kt(s,o){if(s&1){let m=nt();e(0,"div",1),g("click",function(){D(m);let n=x();return F(n.changeDeleteAlert())}),i(),e(1,"div",2)(2,"span",3),g("click",function(){D(m);let n=x();return F(n.changeDeleteAlert())}),f(),e(3,"svg",4),l(4,"path",5),i()(),k(),e(5,"h1"),a(6,"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C UTM-\u043C\u0435\u0442\u043A\u0443?"),i(),e(7,"p"),a(8,"\u0412\u0441\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0431\u0435\u0437\u0432\u043E\u0437\u0432\u0440\u0430\u0442\u043D\u043E \u0443\u0434\u0430\u043B\u044F\u0442\u044C\u0441\u044F"),i(),e(9,"button",0),g("click",function(){D(m);let n=x();return F(n.deleteMailing())}),a(10,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C UTM-\u043C\u0435\u0442\u043A\u0443"),i(),e(11,"button",6),g("click",function(){D(m);let n=x();return F(n.changeDeleteAlert())}),a(12,"\u041E\u0442\u043C\u0435\u043D\u0430"),i()()}}var Et=(()=>{let o=class o{constructor(){this.utmService=_(h),this.router=_(R),this.openModal=!1}changeDeleteAlert(){this.openModal=!this.openModal}deleteMailing(){this.changeDeleteAlert(),this.utmService.delete(this.label).subscribe(()=>{this.router.navigate(["/marketing/utm/"])})}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=d({type:o,selectors:[["utm-delete"]],inputs:{label:"label"},decls:3,vars:1,consts:[[1,"delete","container-white",3,"click"],[1,"background",3,"click"],[1,"alert"],[1,"close",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18 17.94 6M18 18 6.06 6"],[1,"cancel","container-white","primary",3,"click"]],template:function(n,u){n&1&&(e(0,"button",0),g("click",function(){return u.changeDeleteAlert()}),a(1,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C UTM-\u043C\u0435\u0442\u043A\u0443"),i(),T(2,kt,13,0)),n&2&&(r(2),P(2,u.openModal?2:-1))},encapsulation:2});let s=o;return s})();function Bt(s,o){if(s&1&&(e(0,"div",0)(1,"div",1)(2,"h1"),a(3),i()(),e(4,"div",2)(5,"p"),a(6," \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 "),i()(),e(7,"div",3)(8,"div",4)(9,"p"),a(10,"\u0412\u0441\u0435\u0433\u043E \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u043E\u0432"),i(),e(11,"span",5),a(12),i()(),l(13,"div",6),e(14,"div",4)(15,"p"),a(16,"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043B\u0438 \u0431\u043E\u0442\u0430"),i(),e(17,"span",5),a(18),i()(),l(19,"div",6),e(20,"div",4)(21,"p"),a(22,"\u041A\u0443\u043F\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),i(),e(23,"span",5),a(24),i()(),l(25,"div",6),e(26,"div",4)(27,"p"),a(28,"\u041D\u0435 \u043F\u0440\u043E\u0434\u043B\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),i(),e(29,"span",5),a(30),i()(),l(31,"div",6),e(32,"div",7)(33,"p"),a(34,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0433\u0440\u0430\u0444\u0438\u043A"),i(),e(35,"span",5),f(),e(36,"svg",8),l(37,"path",9),i()()()(),k(),e(38,"div",2)(39,"p"),a(40," \u0414\u043E\u0445\u043E\u0434 \u0441 \u043F\u0440\u043E\u0434\u0430\u0436 "),i()(),e(41,"div",3)(42,"div",4)(43,"p"),a(44,"RUB"),i(),e(45,"span",5),a(46),i()(),l(47,"div",6),e(48,"div",4)(49,"p"),a(50,"USD"),i(),e(51,"span",5),a(52),i()(),l(53,"div",6),e(54,"div",7)(55,"p"),a(56,"\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0433\u0440\u0430\u0444\u0438\u043A"),i(),e(57,"span",5),f(),e(58,"svg",8),l(59,"path",9),i()()()(),k(),l(60,"utm-delete",10),i()),s&2){let m=x();r(3),c(m.label),r(9),c(m.utm.users_count),r(6),c(m.utm.inactive_users_count),r(6),c(m.utm.buyed_subs_users_count),r(6),c(m.utm.not_prolong_subs_users_count),r(2),B("routerLink","/marketing/utm/view-statistica/",m.created_at,"/",m.label,""),r(14),c(m.utm.finance_stats[1].amount),r(6),c(m.utm.finance_stats[0].amount),r(2),B("routerLink","/marketing/utm/view-statistica-price/",m.created_at,"/",m.label,""),r(6),C("label",m.label)}}var bt=(()=>{let o=class o{constructor(t,n,u){this.activatedRoute=t,this.utmService=n,this.backButton=u}ngOnInit(){this.backButton.getButton("/marketing/utm"),this.activatedRoute.params.subscribe(t=>{this.created_at=t.created_at,this.label=t.label,this.loadUtm()})}loadUtm(){this.utmService.detail(this.created_at,this.label).subscribe(t=>{this.utm=Z(H({},t),{finance_stats:t.finance_stats.length?t.finance_stats:[{amount:0,currency:"RUB"},{amount:0,currency:"USD"}]})})}};o.\u0275fac=function(n){return new(n||o)(v(y),v(h),v(V))},o.\u0275cmp=d({type:o,selectors:[["ng-component"]],decls:1,vars:1,consts:[[1,"main"],[1,"title-text"],[1,"container-title"],[1,"container-white"],[1,"position-relative"],[1,"right"],[1,"line"],[1,"position-relative","primary",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","7","height","12","viewBox","0 0 7 12","fill","none"],["d","M0.292893 10.2929C-0.0976311 10.6834 -0.0976311 11.3166 0.292893 11.7071C0.683418 12.0976 1.31658 12.0976 1.70711 11.7071L6.70711 6.70711C7.09763 6.31658 7.09763 5.68342 6.70711 5.29289L1.70711 0.292893C1.31658 -0.0976311 0.683418 -0.0976311 0.292893 0.292893C-0.0976311 0.683418 -0.0976311 1.31658 0.292893 1.70711L4.58579 6L0.292893 10.2929Z","fill","#007AFF"],[3,"label"]],template:function(n,u){n&1&&T(0,Bt,61,14,"div",0),n&2&&P(0,u.utm?0:-1)},dependencies:[L,Et],encapsulation:2});let s=o;return s})();var St=J(gt());var Ut=["users_count_tmpl"],At=["buyed_subs_users_count_tmpl"],Tt=["inactive_users_count_tmpl"],Pt=["not_prolong_subs_users_count_tmpl"],wt=(()=>{let o=class o{constructor(t,n){this.activatedRoute=t,this.utmService=n,this.data={users_count:{data:[],sum:0,action:0,persentage:0,color:"#3178DE"},inactive_users_count:{data:[],sum:0,action:0,persentage:0,color:"#B84041"},buyed_subs_users_count:{data:[],sum:0,action:0,persentage:0,color:"#4CC063"},not_prolong_subs_users_count:{data:[],sum:0,action:0,persentage:0,color:"#F7931A"}}}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.created_at=t.created_at,this.label=t.label,this.loadPeriods()})}loadPeriods(){this.utmService.periods(this.label).subscribe(t=>{this.stats=t,this.fromToDate=N(t[0].date,t[t.length-1].date),this.calculateInfos("users_count",this.users_count_tmpl),this.calculateInfos("inactive_users_count",this.inactive_users_count_tmpl),this.calculateInfos("buyed_subs_users_count",this.buyed_subs_users_count_tmpl),this.calculateInfos("not_prolong_subs_users_count",this.not_prolong_subs_users_count_tmpl)})}calculateInfos(t,n){this.stats.forEach(u=>{this.data[t].data.push({x:u.date,y:u[t]}),this.data[t].sum+=u[t]}),this.data[t].action=this.stats[this.stats.length-1][t]-this.stats[this.stats.length-2][t],this.data[t].persentage=Math.floor((this.stats[this.stats.length-1][t]??1/this.stats[this.stats.length-2][t]??1)*100),this.loadChart(n,this.data[t].data,this.data[t].color)}loadChart(t,n,u){this.canvas=t.nativeElement,this.ctx=this.canvas.getContext("2d"),new St.Chart(this.ctx,{type:"line",data:{datasets:[{label:"Broadcasted",backgroundColor:"rgba(255, 99, 132, 0.0)",borderColor:u,fill:!0,data:n}]},options:{plugins:{legend:!0},responsive:!0,scales:{xAxes:[{type:"linear",position:"bottom",ticks:{userCallback:p=>G(new Date(M(p)).getMonth())+" "+new Date(M(p)).getDate()}}],yAxes:[{type:"linear",ticks:{userCallback:function(p){return p.toString()}}}]}}})}};o.\u0275fac=function(n){return new(n||o)(v(y),v(h))},o.\u0275cmp=d({type:o,selectors:[["ng-component"]],viewQuery:function(n,u){if(n&1&&(E(Ut,5),E(At,5),E(Tt,5),E(Pt,5)),n&2){let p;b(p=S())&&(u.users_count_tmpl=p.first),b(p=S())&&(u.buyed_subs_users_count_tmpl=p.first),b(p=S())&&(u.inactive_users_count_tmpl=p.first),b(p=S())&&(u.not_prolong_subs_users_count_tmpl=p.first)}},decls:74,vars:29,consts:[["users_count_tmpl",""],["buyed_subs_users_count_tmpl",""],["inactive_users_count_tmpl",""],["not_prolong_subs_users_count_tmpl",""],[1,"main"],[1,"title-text"],[1,"container-title","position-relative"],[1,"position-relative"],[1,"right"],[1,"container-white","period-main-infos"],[1,"persentage"],[1,"current"],[1,"amount"],[1,"name"],[1,"container-title"],[1,"container-white"],[1,"from-to"],["width","340","height","350"]],template:function(n,u){n&1&&(e(0,"div",4)(1,"div",5)(2,"h1"),a(3,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430"),i()(),e(4,"div",6)(5,"p",7),a(6," \u043E\u0431\u0449\u0430\u044F "),e(7,"span",8),a(8),i()()(),e(9,"div",9)(10,"div",10)(11,"div",11)(12,"span",12),a(13),i(),e(14,"span"),a(15),i()(),e(16,"p",13),a(17,"\u0412\u0441\u0435\u0433\u043E \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u043E\u0432"),i()(),e(18,"div",10)(19,"div",11)(20,"span",12),a(21),i(),e(22,"span"),a(23),i()(),e(24,"p",13),a(25,"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043B\u0438 \u0431\u043E\u0442\u0430"),i()(),e(26,"div",10)(27,"div",11)(28,"span",12),a(29),i(),e(30,"span"),a(31),i()(),e(32,"p",13),a(33,"\u041A\u0443\u043F\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),i()(),e(34,"div",10)(35,"div",11)(36,"span",12),a(37),i(),e(38,"span"),a(39),i()(),e(40,"p",13),a(41,"\u041D\u0435 \u043F\u0440\u043E\u0434\u043B\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),i()()(),e(42,"div",14)(43,"p"),a(44,"\u0412\u0441\u0435\u0433\u043E \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u043E\u0432"),i()(),e(45,"div",15)(46,"span",16),a(47),i(),l(48,"canvas",17,0),i(),e(50,"div",14)(51,"p"),a(52,"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043B\u0438 \u0431\u043E\u0442\u0430"),i()(),e(53,"div",15)(54,"span",16),a(55),i(),l(56,"canvas",17,1),i(),e(58,"div",14)(59,"p"),a(60,"\u041A\u0443\u043F\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),i()(),e(61,"div",15)(62,"span",16),a(63),i(),l(64,"canvas",17,2),i(),e(66,"div",14)(67,"p"),a(68,"\u041D\u0435 \u043F\u0440\u043E\u0434\u043B\u0438\u043B\u0438 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443"),i()(),e(69,"div",15)(70,"span",16),a(71),i(),l(72,"canvas",17,3),i()()),n&2&&(r(8),O(" ",u.fromToDate," "),r(5),c(u.data.users_count.sum),r(),I(u.data.users_count.action>0?"plus":"minus"),r(),U(" ",u.data.users_count.action," (",u.data.users_count.persentage,"%) "),r(6),c(u.data.buyed_subs_users_count.sum),r(),I(u.data.buyed_subs_users_count.action>0?"plus":"minus"),r(),U(" ",u.data.buyed_subs_users_count.action," (",u.data.buyed_subs_users_count.persentage,"%) "),r(6),c(u.data.inactive_users_count.sum),r(),I(u.data.inactive_users_count.action>0?"plus":"minus"),r(),U(" ",u.data.inactive_users_count.action," (",u.data.inactive_users_count.persentage,"%) "),r(6),c(u.data.not_prolong_subs_users_count.sum),r(),I(u.data.not_prolong_subs_users_count.action>0?"plus":"minus"),r(),U(" ",u.data.not_prolong_subs_users_count.action," (",u.data.not_prolong_subs_users_count.persentage,"%) "),r(8),c(u.fromToDate),r(8),c(u.fromToDate),r(8),c(u.fromToDate),r(8),c(u.fromToDate))},styles:['.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]{width:calc(50% - 8px);margin:10px 4px}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#000;font-size:17px;font-style:normal;font-weight:600;line-height:normal;letter-spacing:-.5px;margin-right:3px}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{font-size:12px;color:#b84041}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]:before{content:"+"}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{font-size:12px;color:#38913b}.main[_ngcontent-%COMP%]   .period-main-infos[_ngcontent-%COMP%]   .persentage[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#636366;font-size:13px;font-style:normal;font-weight:400;line-height:18px}']});let s=o;return s})();var yt=J(gt());var Ot=["price"],Mt=(()=>{let o=class o{constructor(t,n){this.activatedRoute=t,this.utmService=n,this.priceData={rub:[],usd:[]}}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.created_at=t.created_at,this.label=t.label,this.loadPeriod()})}loadPeriod(){var t=0;this.utmService.periods(this.label).subscribe(n=>{this.stats=n,n.forEach(u=>{u.finance_stats.length?(this.priceData.rub.push({x:u.date,y:u.finance_stats[1]?.amount}),this.priceData.usd.push({x:u.date,y:u.finance_stats[0].amount})):(this.priceData.rub.push({x:u.date,y:0}),this.priceData.usd.push({x:u.date,y:0}))}),this.fromToDate=N(n[0].date,n[n.length-1].date),this.loadChart()})}loadChart(){this.canvas=this.price.nativeElement,this.ctx=this.canvas.getContext("2d"),new yt.Chart(this.ctx,{type:"line",data:{datasets:[{label:"USD",backgroundColor:"rgba(255, 99, 132, 0.0)",borderColor:"#3178DE",fill:!0,data:this.priceData.usd},{label:"RUB",backgroundColor:"rgba(255, 99, 132, 0.0)",borderColor:"#4CC063",fill:!0,data:this.priceData.rub}]},options:{plugins:{legend:!0},responsive:!0,scales:{xAxes:[{type:"linear",position:"bottom",ticks:{userCallback:t=>G(new Date(M(t)).getMonth())+" "+new Date(M(t)).getDate()}}],yAxes:[{type:"linear",ticks:{userCallback:function(t){return t.toString()}}}]}}})}};o.\u0275fac=function(n){return new(n||o)(v(y),v(h))},o.\u0275cmp=d({type:o,selectors:[["ng-component"]],viewQuery:function(n,u){if(n&1&&E(Ot,5),n&2){let p;b(p=S())&&(u.price=p.first)}},decls:9,vars:1,consts:[["price",""],[1,"main"],[1,"title-text"],[1,"container-white"],[1,"from-to"],["width","340","height","350"]],template:function(n,u){n&1&&(e(0,"div",1)(1,"div",2)(2,"h1"),a(3,"\u0414\u043E\u0445\u043E\u0434 \u0441 \u043F\u0440\u043E\u0434\u0430\u0436"),i()(),e(4,"div",3)(5,"span",4),a(6),i(),l(7,"canvas",5,0),i()()),n&2&&(r(6),c(u.fromToDate))},encapsulation:2});let s=o;return s})();var ye=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=X({type:o}),o.\u0275inj=W({imports:[rt.forChild([{path:"",component:Ct},{path:"create",component:xt},{path:"view/:created_at/:label",component:bt},{path:"view-statistica/:created_at/:label",component:wt},{path:"view-statistica-price/:created_at/:label",component:Mt}]),ft,vt,ot,Q,j]});let s=o;return s})();export{ye as UtmModule};
